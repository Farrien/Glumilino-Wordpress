(function(d,c){var b,e;d.wp=d.wp||{};if(!("addEventListener" in d)){return}function a(j,i){var h;if("function"===typeof d.Event){h=new Event(i)}else{h=document.createEvent("Event");h.initEvent(i,true,true)}j.dispatchEvent(h)}function g(){this.handlers={nativeVideo:new b(),youtube:new e()}}g.prototype={initialize:function(){if(this.supportsVideo()){for(var i in this.handlers){var h=this.handlers[i];if("test" in h&&h.test(c)){this.activeHandler=h.initialize.call(h,c);a(document,"wp-custom-header-video-loaded");break}}}},supportsVideo:function(){if(d.innerWidth<c.minWidth||d.innerHeight<c.minHeight){return false}return true},BaseVideoHandler:f};function f(){}f.prototype={initialize:function(j){var i=this,h=document.createElement("button");this.settings=j;this.container=document.getElementById("wp-custom-header");this.button=h;h.setAttribute("type","button");h.setAttribute("id","wp-custom-header-video-button");h.setAttribute("class","wp-custom-header-video-button wp-custom-header-video-play");h.innerHTML=j.l10n.play;h.addEventListener("click",function(){if(i.isPaused()){i.play()}else{i.pause()}});this.container.addEventListener("play",function(){h.className="wp-custom-header-video-button wp-custom-header-video-play";h.innerHTML=j.l10n.pause;if("a11y" in d.wp){d.wp.a11y.speak(j.l10n.playSpeak)}});this.container.addEventListener("pause",function(){h.className="wp-custom-header-video-button wp-custom-header-video-pause";h.innerHTML=j.l10n.play;if("a11y" in d.wp){d.wp.a11y.speak(j.l10n.pauseSpeak)}});this.ready()},ready:function(){},isPaused:function(){},pause:function(){},play:function(){},setVideo:function(i){var h,j=this.container.getElementsByClassName("customize-partial-edit-shortcut");if(j.length){h=this.container.removeChild(j[0])}this.container.innerHTML="";this.container.appendChild(i);if(h){this.container.appendChild(h)}},showControls:function(){if(!this.container.contains(this.button)){this.container.appendChild(this.button)}},test:function(){return false},trigger:function(h){a(this.container,h)}};f.extend=function(h){var j;function i(){var k=f.apply(this,arguments);return k}i.prototype=Object.create(f.prototype);i.prototype.constructor=i;for(j in h){i.prototype[j]=h[j]}return i};b=f.extend({test:function(h){var i=document.createElement("video");return i.canPlayType(h.mimeType)},ready:function(){var h=this,i=document.createElement("video");i.id="wp-custom-header-video";i.autoplay="autoplay";i.loop="loop";i.muted="muted";i.width=this.settings.width;i.height=this.settings.height;i.addEventListener("play",function(){h.trigger("play")});i.addEventListener("pause",function(){h.trigger("pause")});i.addEventListener("canplay",function(){h.showControls()});this.video=i;h.setVideo(i);i.src=this.settings.videoUrl},isPaused:function(){return this.video.paused},pause:function(){this.video.pause()},play:function(){this.video.play()}});e=f.extend({test:function(h){return"video/x-youtube"===h.mimeType},ready:function(){var i=this;if("YT" in d){YT.ready(i.loadVideo.bind(i))}else{var h=document.createElement("script");h.src="https://www.youtube.com/iframe_api";h.onload=function(){YT.ready(i.loadVideo.bind(i))};document.getElementsByTagName("head")[0].appendChild(h)}},loadVideo:function(){var i=this,j=document.createElement("div"),h=/^.*(?:(?:youtu\.be\/|v\/|vi\/|u\/\w\/|embed\/)|(?:(?:watch)?\?v(?:i)?=|\&v(?:i)?=))([^#\&\?]*).*/;j.id="wp-custom-header-video";i.setVideo(j);i.player=new YT.Player(j,{height:this.settings.height,width:this.settings.width,videoId:this.settings.videoUrl.match(h)[1],events:{onReady:function(k){k.target.mute();i.showControls()},onStateChange:function(k){if(YT.PlayerState.PLAYING===k.data){i.trigger("play")}else{if(YT.PlayerState.PAUSED===k.data){i.trigger("pause")}else{if(YT.PlayerState.ENDED===k.data){k.target.playVideo()}}}}},playerVars:{autoplay:1,controls:0,disablekb:1,fs:0,iv_load_policy:3,loop:1,modestbranding:1,playsinline:1,rel:0,showinfo:0}})},isPaused:function(){return YT.PlayerState.PAUSED===this.player.getPlayerState()},pause:function(){this.player.pauseVideo()},play:function(){this.player.playVideo()}});d.wp.customHeader=new g();document.addEventListener("DOMContentLoaded",d.wp.customHeader.initialize.bind(d.wp.customHeader),false);if("customize" in d.wp){d.wp.customize.selectiveRefresh.bind("render-partials-response",function(h){if("custom_header_settings" in h){c=h.custom_header_settings}});d.wp.customize.selectiveRefresh.bind("partial-content-rendered",function(h){if("custom_header"===h.partial.id){d.wp.customHeader.initialize()}})}})(window,window._wpCustomHeaderSettings||{});