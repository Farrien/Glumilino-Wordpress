(function(a){var b={add:"ajaxAdd",del:"ajaxDel",dim:"ajaxDim",process:"process",recolor:"recolor"},c;c={settings:{url:ajaxurl,type:"POST",response:"ajax-response",what:"",alt:"alternate",altOffset:0,addColor:"#ffff33",delColor:"#faafaa",dimAddColor:"#ffff33",dimDelColor:"#ff3333",confirm:null,addBefore:null,addAfter:null,delBefore:null,delAfter:null,dimBefore:null,dimAfter:null},nonce:function(f,g){var e=wpAjax.unserialize(f.attr("href")),d=a("#"+g.element);return g.nonce||e._ajax_nonce||d.find('input[name="_ajax_nonce"]').val()||e._wpnonce||d.find('input[name="_wpnonce"]').val()||0},parseData:function(f,g){var h=[],e;try{e=a(f).data("wp-lists")||"";e=e.match(new RegExp(g+":[\\S]+"));if(e){h=e[0].split(":")}}catch(d){}return h},pre:function(h,f,g){var d,e,i;f=a.extend({},this.wpList.settings,{element:null,nonce:0,target:h.get(0)},f||{});if(a.isFunction(f.confirm)){d=a("#"+f.element);if("add"!==g){e=d.css("backgroundColor");d.css("backgroundColor","#ff9966")}i=f.confirm.call(this,h,f,g,e);if("add"!==g){d.css("backgroundColor",e)}if(!i){return false}}return f},ajaxAdd:function(h,f){var k=this,l=a(h),g=c.parseData(l,"add"),j,d,i,e;f=f||{};f=c.pre.call(k,l,f,"add");f.element=g[2]||l.prop("id")||f.element||null;f.addColor=g[3]?"#"+g[3]:f.addColor;if(!f){return false}if(!l.is('[id="'+f.element+'-submit"]')){return !c.add.call(k,l,f)}if(!f.element){return true}f.action="add-"+f.what;f.nonce=c.nonce(l,f);if(!wpAjax.validateForm("#"+f.element)){return false}f.data=a.param(a.extend({_ajax_nonce:f.nonce,action:f.action},wpAjax.unserialize(g[4]||"")));j=a("#"+f.element+" :input").not('[name="_ajax_nonce"], [name="_wpnonce"], [name="action"]');d=a.isFunction(j.fieldSerialize)?j.fieldSerialize():j.serialize();if(d){f.data+="&"+d}if(a.isFunction(f.addBefore)){f=f.addBefore(f);if(!f){return true}}if(!f.data.match(/_ajax_nonce=[a-f0-9]+/)){return true}f.success=function(m){i=wpAjax.parseAjaxResponse(m,f.response,f.element);e=m;if(!i||i.errors){return false}if(true===i){return true}a.each(i.responses,function(){c.add.call(k,this.data,a.extend({},f,{position:this.position||0,id:this.id||0,oldId:this.oldId||null}))});k.wpList.recolor();a(k).trigger("wpListAddEnd",[f,k.wpList]);c.clear.call(k,"#"+f.element)};f.complete=function(n,m){if(a.isFunction(f.addAfter)){f.addAfter(e,a.extend({xml:n,status:m,parsed:i},f))}};a.ajax(f);return false},ajaxDel:function(f,g){var j=this,d=a(f),i=c.parseData(d,"delete"),e,h,k;g=g||{};g=c.pre.call(j,d,g,"delete");g.element=i[2]||g.element||null;g.delColor=i[3]?"#"+i[3]:g.delColor;if(!g||!g.element){return false}g.action="delete-"+g.what;g.nonce=c.nonce(d,g);g.data=a.extend({_ajax_nonce:g.nonce,action:g.action,id:g.element.split("-").pop()},wpAjax.unserialize(i[4]||""));if(a.isFunction(g.delBefore)){g=g.delBefore(g,j);if(!g){return true}}if(!g.data._ajax_nonce){return true}e=a("#"+g.element);if("none"!==g.delColor){e.css("backgroundColor",g.delColor).fadeOut(350,function(){j.wpList.recolor();a(j).trigger("wpListDelEnd",[g,j.wpList])})}else{j.wpList.recolor();a(j).trigger("wpListDelEnd",[g,j.wpList])}g.success=function(l){h=wpAjax.parseAjaxResponse(l,g.response,g.element);k=l;if(!h||h.errors){e.stop().stop().css("backgroundColor","#faa").show().queue(function(){j.wpList.recolor();a(this).dequeue()});return false}};g.complete=function(m,l){if(a.isFunction(g.delAfter)){e.queue(function(){g.delAfter(k,a.extend({xml:m,status:l,parsed:h},g))}).dequeue()}};a.ajax(g);return false},ajaxDim:function(i,f){var k=this,n=a(i),h=c.parseData(n,"dim"),l,d,g,m,j,e;if("none"===n.parent().css("display")){return false}f=f||{};f=c.pre.call(k,n,f,"dim");f.element=h[2]||f.element||null;f.dimClass=h[3]||f.dimClass||null;f.dimAddColor=h[4]?"#"+h[4]:f.dimAddColor;f.dimDelColor=h[5]?"#"+h[5]:f.dimDelColor;if(!f||!f.element||!f.dimClass){return true}f.action="dim-"+f.what;f.nonce=c.nonce(n,f);f.data=a.extend({_ajax_nonce:f.nonce,action:f.action,id:f.element.split("-").pop(),dimClass:f.dimClass},wpAjax.unserialize(h[6]||""));if(a.isFunction(f.dimBefore)){f=f.dimBefore(f);if(!f){return true}}l=a("#"+f.element);d=l.toggleClass(f.dimClass).is("."+f.dimClass);g=c.getColor(l);m=d?f.dimAddColor:f.dimDelColor;l.toggleClass(f.dimClass);if("none"!==m){l.animate({backgroundColor:m},"fast").queue(function(){l.toggleClass(f.dimClass);a(this).dequeue()}).animate({backgroundColor:g},{complete:function(){a(this).css("backgroundColor","");a(k).trigger("wpListDimEnd",[f,k.wpList])}})}else{a(k).trigger("wpListDimEnd",[f,k.wpList])}if(!f.data._ajax_nonce){return true}f.success=function(o){j=wpAjax.parseAjaxResponse(o,f.response,f.element);e=o;if(true===j){return true}if(!j||j.errors){l.stop().stop().css("backgroundColor","#ff3333")[d?"removeClass":"addClass"](f.dimClass).show().queue(function(){k.wpList.recolor();a(this).dequeue()});return false}if("undefined"!==typeof j.responses[0].supplemental.comment_link){var p=n.find(".submitted-on"),q=p.find("a");if(""!==j.responses[0].supplemental.comment_link){p.html(a("<a></a>").text(p.text()).prop("href",j.responses[0].supplemental.comment_link))}else{if(q.length){p.text(q.text())}}}};f.complete=function(p,o){if(a.isFunction(f.dimAfter)){l.queue(function(){f.dimAfter(e,a.extend({xml:p,status:o,parsed:j},f))}).dequeue()}};a.ajax(f);return false},getColor:function(d){return a(d).css("backgroundColor")||"#ffffff"},add:function(i,j){var h=a(this),g=a(i),f=false,e,d;if("string"===typeof j){j={what:j}}j=a.extend({position:0,id:0,oldId:null},this.wpList.settings,j);if(!g.length||!j.what){return false}if(j.oldId){f=a("#"+j.what+"-"+j.oldId)}if(j.id&&(j.id!==j.oldId||!f||!f.length)){a("#"+j.what+"-"+j.id).remove()}if(f&&f.length){f.before(g);f.remove()}else{if(isNaN(j.position)){e="after";if("-"===j.position.substr(0,1)){j.position=j.position.substr(1);e="before"}d=h.find("#"+j.position);if(1===d.length){d[e](g)}else{h.append(g)}}else{if("comment"!==j.what||0===a("#"+j.element).length){if(j.position<0){h.prepend(g)}else{h.append(g)}}}}if(j.alt){g.toggleClass(j.alt,(h.children(":visible").index(g[0])+j.altOffset)%2)}if("none"!==j.addColor){g.css("backgroundColor",j.addColor).animate({backgroundColor:c.getColor(g)},{complete:function(){a(this).css("backgroundColor","")}})}h.each(function(k,l){l.wpList.process(g)});return g},clear:function(e){var h=this,d=a(e),g,f;if(h.wpList&&d.parents("#"+h.id).length){return}d.find(":input").each(function(j,i){if(a(i).parents(".form-no-clear").length){return}g=i.type.toLowerCase();f=i.tagName.toLowerCase();if("text"===g||"password"===g||"textarea"===f){i.value=""}else{if("checkbox"===g||"radio"===g){i.checked=false}else{if("select"===f){i.selectedIndex=null}}}})},process:function(e){var f=this,d=a(e||document);d.on("submit",'form[data-wp-lists^="add:'+f.id+':"]',function(){return f.wpList.add(this)});d.on("click",'a[data-wp-lists^="add:'+f.id+':"], input[data-wp-lists^="add:'+f.id+':"]',function(){return f.wpList.add(this)});d.on("click",'[data-wp-lists^="delete:'+f.id+':"]',function(){return f.wpList.del(this)});d.on("click",'[data-wp-lists^="dim:'+f.id+':"]',function(){return f.wpList.dim(this)})},recolor:function(){var e=this,f=[":even",":odd"],d;if(!e.wpList.settings.alt){return}d=a(".list-item:visible",e);if(!d.length){d=a(e).children(":visible")}if(e.wpList.settings.altOffset%2){f.reverse()}d.filter(f[0]).addClass(e.wpList.settings.alt).end();d.filter(f[1]).removeClass(e.wpList.settings.alt)},init:function(){var d=this;d.wpList.process=function(e){d.each(function(){this.wpList.process(e)})};d.wpList.recolor=function(){d.each(function(){this.wpList.recolor()})}}};a.fn.wpList=function(d){this.each(function(e,f){f.wpList={settings:a.extend({},c.settings,{what:c.parseData(f,"list")[1]||""},d)};a.each(b,function(g,h){f.wpList[g]=function(i,j){return c[h].call(f,i,j)}})});c.init.call(this);this.wpList.process();return this}})(jQuery);