var QTags,edCanvas,edButtons=[];var edAddTag=function(){},edCheckOpenTags=function(){},edCloseAllTags=function(){},edInsertImage=function(){},edInsertLink=function(){},edInsertTag=function(){},edLink=function(){},edQuickLink=function(){},edRemoveTag=function(){},edShowButton=function(){},edShowLinks=function(){},edSpell=function(){},edToolbar=function(){};function quicktags(b){return new QTags(b)}function edInsertContent(c,d){return QTags.insertContent(d)}function edButton(h,i,j,f,g){return QTags.addButton(h,i,j,f,g,"",-1)}(function(){var e=function(a){var c,d,i,b;if(typeof jQuery!=="undefined"){jQuery(document).ready(a)}else{c=e;c.funcs=[];c.ready=function(){if(!c.isReady){c.isReady=true;for(d=0;d<c.funcs.length;d++){c.funcs[d]()}}};if(c.isReady){a()}else{c.funcs.push(a)}if(!c.eventAttached){if(document.addEventListener){i=function(){document.removeEventListener("DOMContentLoaded",i,false);c.ready()};document.addEventListener("DOMContentLoaded",i,false);window.addEventListener("load",c.ready,false)}else{if(document.attachEvent){i=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",i);c.ready()}};document.attachEvent("onreadystatechange",i);window.attachEvent("onload",c.ready);b=function(){try{document.documentElement.doScroll("left")}catch(j){setTimeout(b,50);return}c.ready()};b()}}c.eventAttached=true}}},f=(function(){var b=new Date(),a;a=function(d){var c=d.toString();if(c.length<2){c="0"+c}return c};return b.getUTCFullYear()+"-"+a(b.getUTCMonth()+1)+"-"+a(b.getUTCDate())+"T"+a(b.getUTCHours())+":"+a(b.getUTCMinutes())+":"+a(b.getUTCSeconds())+"+00:00"})(),g;g=QTags=function(d){if(typeof(d)==="string"){d={id:d}}else{if(typeof(d)!=="object"){return false}}var b=this,r=d.id,p=document.getElementById(r),t="qt_"+r,c,a,q,s,o;if(!r||!p){return false}b.name=t;b.id=r;b.canvas=p;b.settings=d;if(r==="content"&&typeof(adminpage)==="string"&&(adminpage==="post-new-php"||adminpage==="post-php")){edCanvas=p;q="ed_toolbar"}else{q=t+"_toolbar"}c=document.getElementById(q);if(!c){c=document.createElement("div");c.id=q;c.className="quicktags-toolbar"}p.parentNode.insertBefore(c,p);b.toolbar=c;a=function(j){j=j||window.event;var k=j.target||j.srcElement,i=k.clientWidth||k.offsetWidth,l;if(!i){return}if(/ ed_button /.test(" "+k.className+" ")){b.canvas=p=document.getElementById(r);l=k.id.replace(t+"_","");if(b.theButtons[l]){b.theButtons[l].callback.call(b.theButtons[l],k,p,b)}}};o=function(){window.wpActiveEditor=r};s=document.getElementById("wp-"+r+"-wrap");if(c.addEventListener){c.addEventListener("click",a,false);if(s){s.addEventListener("click",o,false)}}else{if(c.attachEvent){c.attachEvent("onclick",a);if(s){s.attachEvent("onclick",o)}}}b.getButton=function(i){return b.theButtons[i]};b.getButtonElement=function(i){return document.getElementById(t+"_"+i)};g.instances[r]=b;if(!g.instances["0"]){g.instances["0"]=g.instances[r];e(function(){g._buttonsInit()})}};function h(a){a=a||"";a=a.replace(/&([^#])(?![a-z1-4]{1,8};)/gi,"&#038;$1");return a.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}g.instances={};g.getInstance=function(a){return g.instances[a]};g._buttonsInit=function(){var a=this,u,w,t,b,d,i,c,v,r,x,s=",strong,em,link,block,del,ins,img,ul,ol,li,code,more,close,";for(i in a.instances){if("0"===i){continue}c=a.instances[i];u=c.canvas;w=c.name;t=c.settings;d="";b={};x="";if(t.buttons){x=","+t.buttons+","}for(r in edButtons){if(!edButtons[r]){continue}v=edButtons[r].id;if(x&&s.indexOf(","+v+",")!==-1&&x.indexOf(","+v+",")===-1){continue}if(!edButtons[r].instance||edButtons[r].instance===i){b[v]=edButtons[r];if(edButtons[r].html){d+=edButtons[r].html(w+"_")}}}if(x&&x.indexOf(",dfw,")!==-1){b.dfw=new g.DFWButton();d+=b.dfw.html(w+"_")}if("rtl"===document.getElementsByTagName("html")[0].dir){b.textdirection=new g.TextDirectionButton();d+=b.textdirection.html(w+"_")}c.toolbar.innerHTML=d;c.theButtons=b;if(typeof jQuery!=="undefined"){jQuery(document).triggerHandler("quicktags-init",[c])}}a.buttonsInitDone=true};g.addButton=function(s,d,p,q,t,c,b,a,o){var r;if(!s||!d){return}b=b||0;q=q||"";o=o||{};if(typeof(p)==="function"){r=new g.Button(s,d,t,c,a,o);r.callback=p}else{if(typeof(p)==="string"){r=new g.TagButton(s,d,p,q,t,c,a,o)}else{return}}if(b===-1){return r}if(b>0){while(typeof(edButtons[b])!=="undefined"){b++}edButtons[b]=r}else{edButtons[edButtons.length]=r}if(this.buttonsInitDone){this._buttonsInit()}};g.insertContent=function(d){var c,l,m,b,a,n=document.getElementById(wpActiveEditor);if(!n){return false}if(document.selection){n.focus();c=document.selection.createRange();c.text=d;n.focus()}else{if(n.selectionStart||n.selectionStart===0){a=n.value;l=n.selectionStart;m=n.selectionEnd;b=n.scrollTop;n.value=a.substring(0,l)+d+a.substring(m,a.length);n.selectionStart=l+d.length;n.selectionEnd=l+d.length;n.scrollTop=b;n.focus()}else{n.value+=d;n.focus()}}return true};g.Button=function(a,c,d,b,k,l){this.id=a;this.display=c;this.access="";this.title=b||"";this.instance=k||"";this.attr=l||{}};g.Button.prototype.html=function(r){var n,d,c,a=this.title?' title="'+h(this.title)+'"':"",b=this.attr&&this.attr.ariaLabel?' aria-label="'+h(this.attr.ariaLabel)+'"':"",o=this.display?' value="'+h(this.display)+'"':"",p=this.id?' id="'+h(r+this.id)+'"':"",q=(c=window.wp)&&c.editor&&c.editor.dfw;if(this.id==="fullscreen"){return'<button type="button"'+p+' class="ed_button qt-dfw qt-fullscreen"'+a+b+"></button>"}else{if(this.id==="dfw"){n=q&&q.isActive()?"":' disabled="disabled"';d=q&&q.isOn()?" active":"";return'<button type="button"'+p+' class="ed_button qt-dfw'+d+'"'+a+b+n+"></button>"}}return'<input type="button"'+p+' class="ed_button button button-small"'+a+b+o+" />"};g.Button.prototype.callback=function(){};g.TagButton=function(r,n,q,d,p,c,b,o){var a=this;g.Button.call(a,r,n,p,c,b,o);a.tagStart=q;a.tagEnd=d};g.TagButton.prototype=new g.Button();g.TagButton.prototype.openTag=function(a,b){if(!b.openTags){b.openTags=[]}if(this.tagEnd){b.openTags.push(this.id);a.value="/"+a.value;if(this.attr.ariaLabelClose){a.setAttribute("aria-label",this.attr.ariaLabelClose)}}};g.TagButton.prototype.closeTag=function(a,c){var b=this.isOpen(c);if(b!==false){c.openTags.splice(b,1)}a.value=this.display;if(this.attr.ariaLabel){a.setAttribute("aria-label",this.attr.ariaLabel)}};g.TagButton.prototype.isOpen=function(d){var a=this,b=0,c=false;if(d.openTags){while(c===false&&b<d.openTags.length){c=d.openTags[b]===a.id?b:false;b++}}else{c=false}return c};g.TagButton.prototype.callback=function(b,r,a){var z=this,B,x,d,t,A=r.value,l,y,c,v,i=A?z.tagEnd:"";if(document.selection){r.focus();v=document.selection.createRange();if(v.text.length>0){if(!z.tagEnd){v.text=v.text+z.tagStart}else{v.text=z.tagStart+v.text+i}}else{if(!z.tagEnd){v.text=z.tagStart}else{if(z.isOpen(a)===false){v.text=z.tagStart;z.openTag(b,a)}else{v.text=i;z.closeTag(b,a)}}}r.focus()}else{if(r.selectionStart||r.selectionStart===0){B=r.selectionStart;x=r.selectionEnd;if(B<x&&A.charAt(x-1)==="\n"){x-=1}d=x;t=r.scrollTop;l=A.substring(0,B);y=A.substring(x,A.length);c=A.substring(B,x);if(B!==x){if(!z.tagEnd){r.value=l+c+z.tagStart+y;d+=z.tagStart.length}else{r.value=l+z.tagStart+c+i+y;d+=z.tagStart.length+i.length}}else{if(!z.tagEnd){r.value=l+z.tagStart+y;d=B+z.tagStart.length}else{if(z.isOpen(a)===false){r.value=l+z.tagStart+y;z.openTag(b,a);d=B+z.tagStart.length}else{r.value=l+i+y;d=B+i.length;z.closeTag(b,a)}}}r.selectionStart=d;r.selectionEnd=d;r.scrollTop=t;r.focus()}else{if(!i){r.value+=z.tagStart}else{if(z.isOpen(a)!==false){r.value+=z.tagStart;z.openTag(b,a)}else{r.value+=i;z.closeTag(b,a)}}r.focus()}}};g.SpellButton=function(){};g.CloseButton=function(){g.Button.call(this,"close",quicktagsL10n.closeTags,"",quicktagsL10n.closeAllOpenTags)};g.CloseButton.prototype=new g.Button();g._close=function(b,a,m){var d,l,c=m.openTags;if(c){while(c.length>0){d=m.getButton(c[c.length-1]);l=document.getElementById(m.name+"_"+d.id);if(b){d.callback.call(d,l,a,m)}else{d.closeTag(l,m)}}}};g.CloseButton.prototype.callback=g._close;g.closeAllTags=function(a){var b=this.getInstance(a);g._close("",b.canvas,b)};g.LinkButton=function(){var a={ariaLabel:quicktagsL10n.link};g.TagButton.call(this,"link","link","","</a>","","","",a)};g.LinkButton.prototype=new g.TagButton();g.LinkButton.prototype.callback=function(b,a,d,l){var m,c=this;if(typeof wpLink!=="undefined"){wpLink.open(d.id);return}if(!l){l="http://"}if(c.isOpen(d)===false){m=prompt(quicktagsL10n.enterURL,l);if(m){c.tagStart='<a href="'+m+'">';g.TagButton.prototype.callback.call(c,b,a,d)}}else{g.TagButton.prototype.callback.call(c,b,a,d)}};g.ImgButton=function(){var a={ariaLabel:quicktagsL10n.image};g.TagButton.call(this,"img","img","","","","","",a)};g.ImgButton.prototype=new g.TagButton();g.ImgButton.prototype.callback=function(c,a,l,m){if(!m){m="http://"}var b=prompt(quicktagsL10n.enterImageURL,m),d;if(b){d=prompt(quicktagsL10n.enterImageDescription,"");this.tagStart='<img src="'+b+'" alt="'+d+'" />';g.TagButton.prototype.callback.call(this,c,a,l)}};g.DFWButton=function(){g.Button.call(this,"dfw","","f",quicktagsL10n.dfw)};g.DFWButton.prototype=new g.Button();g.DFWButton.prototype.callback=function(){var a;if(!(a=window.wp)||!a.editor||!a.editor.dfw){return}window.wp.editor.dfw.toggle()};g.TextDirectionButton=function(){g.Button.call(this,"textdirection",quicktagsL10n.textdirection,"",quicktagsL10n.toggleTextdirection)};g.TextDirectionButton.prototype=new g.Button();g.TextDirectionButton.prototype.callback=function(c,a){var d=("rtl"===document.getElementsByTagName("html")[0].dir),b=a.style.direction;if(!b){b=(d)?"rtl":"ltr"}a.style.direction=("rtl"===b)?"ltr":"rtl";a.focus()};edButtons[10]=new g.TagButton("strong","b","<strong>","</strong>","","","",{ariaLabel:quicktagsL10n.strong,ariaLabelClose:quicktagsL10n.strongClose});edButtons[20]=new g.TagButton("em","i","<em>","</em>","","","",{ariaLabel:quicktagsL10n.em,ariaLabelClose:quicktagsL10n.emClose});edButtons[30]=new g.LinkButton();edButtons[40]=new g.TagButton("block","b-quote","\n\n<blockquote>","</blockquote>\n\n","","","",{ariaLabel:quicktagsL10n.blockquote,ariaLabelClose:quicktagsL10n.blockquoteClose});edButtons[50]=new g.TagButton("del","del",'<del datetime="'+f+'">',"</del>","","","",{ariaLabel:quicktagsL10n.del,ariaLabelClose:quicktagsL10n.delClose});edButtons[60]=new g.TagButton("ins","ins",'<ins datetime="'+f+'">',"</ins>","","","",{ariaLabel:quicktagsL10n.ins,ariaLabelClose:quicktagsL10n.insClose});edButtons[70]=new g.ImgButton();edButtons[80]=new g.TagButton("ul","ul","<ul>\n","</ul>\n\n","","","",{ariaLabel:quicktagsL10n.ul,ariaLabelClose:quicktagsL10n.ulClose});edButtons[90]=new g.TagButton("ol","ol","<ol>\n","</ol>\n\n","","","",{ariaLabel:quicktagsL10n.ol,ariaLabelClose:quicktagsL10n.olClose});edButtons[100]=new g.TagButton("li","li","\t<li>","</li>\n","","","",{ariaLabel:quicktagsL10n.li,ariaLabelClose:quicktagsL10n.liClose});edButtons[110]=new g.TagButton("code","code","<code>","</code>","","","",{ariaLabel:quicktagsL10n.code,ariaLabelClose:quicktagsL10n.codeClose});edButtons[120]=new g.TagButton("more","more","<!--more-->\n\n","","","","",{ariaLabel:quicktagsL10n.more});edButtons[140]=new g.CloseButton()})();