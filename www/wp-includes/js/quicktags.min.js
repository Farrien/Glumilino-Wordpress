var QTags,edCanvas,edButtons=[];var edAddTag=function(){},edCheckOpenTags=function(){},edCloseAllTags=function(){},edInsertImage=function(){},edInsertLink=function(){},edInsertTag=function(){},edLink=function(){},edQuickLink=function(){},edRemoveTag=function(){},edShowButton=function(){},edShowLinks=function(){},edSpell=function(){},edToolbar=function(){};function quicktags(a){return new QTags(a)}function edInsertContent(b,a){return QTags.insertContent(a)}function edButton(e,d,c,b,a){return QTags.addButton(e,d,c,b,a,"",-1)}(function(){var b=function(j){var g,f,e,h;if(typeof jQuery!=="undefined"){jQuery(document).ready(j)}else{g=b;g.funcs=[];g.ready=function(){if(!g.isReady){g.isReady=true;for(f=0;f<g.funcs.length;f++){g.funcs[f]()}}};if(g.isReady){j()}else{g.funcs.push(j)}if(!g.eventAttached){if(document.addEventListener){e=function(){document.removeEventListener("DOMContentLoaded",e,false);g.ready()};document.addEventListener("DOMContentLoaded",e,false);window.addEventListener("load",g.ready,false)}else{if(document.attachEvent){e=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",e);g.ready()}};document.attachEvent("onreadystatechange",e);window.attachEvent("onload",g.ready);h=function(){try{document.documentElement.doScroll("left")}catch(i){setTimeout(h,50);return}g.ready()};h()}}g.eventAttached=true}}},a=(function(){var e=new Date(),f;f=function(g){var h=g.toString();if(h.length<2){h="0"+h}return h};return e.getUTCFullYear()+"-"+f(e.getUTCMonth()+1)+"-"+f(e.getUTCDate())+"T"+f(e.getUTCHours())+":"+f(e.getUTCMinutes())+":"+f(e.getUTCSeconds())+"+00:00"})(),d;d=QTags=function(k){if(typeof(k)==="string"){k={id:k}}else{if(typeof(k)!=="object"){return false}}var m=this,g=k.id,i=document.getElementById(g),e="qt_"+g,l,n,h,f,j;if(!g||!i){return false}m.name=e;m.id=g;m.canvas=i;m.settings=k;if(g==="content"&&typeof(adminpage)==="string"&&(adminpage==="post-new-php"||adminpage==="post-php")){edCanvas=i;h="ed_toolbar"}else{h=e+"_toolbar"}l=document.getElementById(h);if(!l){l=document.createElement("div");l.id=h;l.className="quicktags-toolbar"}i.parentNode.insertBefore(l,i);m.toolbar=l;n=function(q){q=q||window.event;var p=q.target||q.srcElement,r=p.clientWidth||p.offsetWidth,o;if(!r){return}if(/ ed_button /.test(" "+p.className+" ")){m.canvas=i=document.getElementById(g);o=p.id.replace(e+"_","");if(m.theButtons[o]){m.theButtons[o].callback.call(m.theButtons[o],p,i,m)}}};j=function(){window.wpActiveEditor=g};f=document.getElementById("wp-"+g+"-wrap");if(l.addEventListener){l.addEventListener("click",n,false);if(f){f.addEventListener("click",j,false)}}else{if(l.attachEvent){l.attachEvent("onclick",n);if(f){f.attachEvent("onclick",j)}}}m.getButton=function(o){return m.theButtons[o]};m.getButtonElement=function(o){return document.getElementById(e+"_"+o)};d.instances[g]=m;if(!d.instances["0"]){d.instances["0"]=d.instances[g];b(function(){d._buttonsInit()})}};function c(e){e=e||"";e=e.replace(/&([^#])(?![a-z1-4]{1,8};)/gi,"&#038;$1");return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}d.instances={};d.getInstance=function(e){return d.instances[e]};d._buttonsInit=function(){var q=this,h,f,j,p,n,m,o,g,l,e,k=",strong,em,link,block,del,ins,img,ul,ol,li,code,more,close,";for(m in q.instances){if("0"===m){continue}o=q.instances[m];h=o.canvas;f=o.name;j=o.settings;n="";p={};e="";if(j.buttons){e=","+j.buttons+","}for(l in edButtons){if(!edButtons[l]){continue}g=edButtons[l].id;if(e&&k.indexOf(","+g+",")!==-1&&e.indexOf(","+g+",")===-1){continue}if(!edButtons[l].instance||edButtons[l].instance===m){p[g]=edButtons[l];if(edButtons[l].html){n+=edButtons[l].html(f+"_")}}}if(e&&e.indexOf(",dfw,")!==-1){p.dfw=new d.DFWButton();n+=p.dfw.html(f+"_")}if("rtl"===document.getElementsByTagName("html")[0].dir){p.textdirection=new d.TextDirectionButton();n+=p.textdirection.html(f+"_")}o.toolbar.innerHTML=n;o.theButtons=p;if(typeof jQuery!=="undefined"){jQuery(document).triggerHandler("quicktags-init",[o])}}q.buttonsInitDone=true};d.addButton=function(f,k,i,h,e,l,m,n,j){var g;if(!f||!k){return}m=m||0;h=h||"";j=j||{};if(typeof(i)==="function"){g=new d.Button(f,k,e,l,n,j);g.callback=i}else{if(typeof(i)==="string"){g=new d.TagButton(f,k,i,h,e,l,n,j)}else{return}}if(m===-1){return g}if(m>0){while(typeof(edButtons[m])!=="undefined"){m++}edButtons[m]=g}else{edButtons[edButtons.length]=g}if(this.buttonsInitDone){this._buttonsInit()}};d.insertContent=function(h){var i,g,f,j,k,e=document.getElementById(wpActiveEditor);if(!e){return false}if(document.selection){e.focus();i=document.selection.createRange();i.text=h;e.focus()}else{if(e.selectionStart||e.selectionStart===0){k=e.value;g=e.selectionStart;f=e.selectionEnd;j=e.scrollTop;e.value=k.substring(0,g)+h+k.substring(f,k.length);e.selectionStart=g+h.length;e.selectionEnd=g+h.length;e.scrollTop=j;e.focus()}else{e.value+=h;e.focus()}}return true};d.Button=function(j,h,g,i,f,e){this.id=j;this.display=h;this.access="";this.title=i||"";this.instance=f||"";this.attr=e||{}};d.Button.prototype.html=function(e){var i,j,k,m=this.title?' title="'+c(this.title)+'"':"",l=this.attr&&this.attr.ariaLabel?' aria-label="'+c(this.attr.ariaLabel)+'"':"",h=this.display?' value="'+c(this.display)+'"':"",g=this.id?' id="'+c(e+this.id)+'"':"",f=(k=window.wp)&&k.editor&&k.editor.dfw;if(this.id==="fullscreen"){return'<button type="button"'+g+' class="ed_button qt-dfw qt-fullscreen"'+m+l+"></button>"}else{if(this.id==="dfw"){i=f&&f.isActive()?"":' disabled="disabled"';j=f&&f.isOn()?" active":"";return'<button type="button"'+g+' class="ed_button qt-dfw'+j+'"'+m+l+i+"></button>"}}return'<input type="button"'+g+' class="ed_button button button-small"'+m+l+h+" />"};d.Button.prototype.callback=function(){};d.TagButton=function(e,i,f,j,g,k,l,h){var m=this;d.Button.call(m,e,i,g,k,l,h);m.tagStart=f;m.tagEnd=j};d.TagButton.prototype=new d.Button();d.TagButton.prototype.openTag=function(f,e){if(!e.openTags){e.openTags=[]}if(this.tagEnd){e.openTags.push(this.id);f.value="/"+f.value;if(this.attr.ariaLabelClose){f.setAttribute("aria-label",this.attr.ariaLabelClose)}}};d.TagButton.prototype.closeTag=function(g,e){var f=this.isOpen(e);if(f!==false){e.openTags.splice(f,1)}g.value=this.display;if(this.attr.ariaLabel){g.setAttribute("aria-label",this.attr.ariaLabel)}};d.TagButton.prototype.isOpen=function(e){var h=this,g=0,f=false;if(e.openTags){while(f===false&&g<e.openTags.length){f=e.openTags[g]===h.id?g:false;g++}}else{f=false}return f};d.TagButton.prototype.callback=function(p,j,q){var w=this,s,f,n,h,u=j.value,k,e,o,g,m=u?w.tagEnd:"";if(document.selection){j.focus();g=document.selection.createRange();if(g.text.length>0){if(!w.tagEnd){g.text=g.text+w.tagStart}else{g.text=w.tagStart+g.text+m}}else{if(!w.tagEnd){g.text=w.tagStart}else{if(w.isOpen(q)===false){g.text=w.tagStart;w.openTag(p,q)}else{g.text=m;w.closeTag(p,q)}}}j.focus()}else{if(j.selectionStart||j.selectionStart===0){s=j.selectionStart;f=j.selectionEnd;if(s<f&&u.charAt(f-1)==="\n"){f-=1}n=f;h=j.scrollTop;k=u.substring(0,s);e=u.substring(f,u.length);o=u.substring(s,f);if(s!==f){if(!w.tagEnd){j.value=k+o+w.tagStart+e;n+=w.tagStart.length}else{j.value=k+w.tagStart+o+m+e;n+=w.tagStart.length+m.length}}else{if(!w.tagEnd){j.value=k+w.tagStart+e;n=s+w.tagStart.length}else{if(w.isOpen(q)===false){j.value=k+w.tagStart+e;w.openTag(p,q);n=s+w.tagStart.length}else{j.value=k+m+e;n=s+m.length;w.closeTag(p,q)}}}j.selectionStart=n;j.selectionEnd=n;j.scrollTop=h;j.focus()}else{if(!m){j.value+=w.tagStart}else{if(w.isOpen(q)!==false){j.value+=w.tagStart;w.openTag(p,q)}else{j.value+=m;w.closeTag(p,q)}}j.focus()}}};d.SpellButton=function(){};d.CloseButton=function(){d.Button.call(this,"close",quicktagsL10n.closeTags,"",quicktagsL10n.closeAllOpenTags)};d.CloseButton.prototype=new d.Button();d._close=function(j,k,f){var h,g,i=f.openTags;if(i){while(i.length>0){h=f.getButton(i[i.length-1]);g=document.getElementById(f.name+"_"+h.id);if(j){h.callback.call(h,g,k,f)}else{h.closeTag(g,f)}}}};d.CloseButton.prototype.callback=d._close;d.closeAllTags=function(f){var e=this.getInstance(f);d._close("",e.canvas,e)};d.LinkButton=function(){var e={ariaLabel:quicktagsL10n.link};d.TagButton.call(this,"link","link","","</a>","","","",e)};d.LinkButton.prototype=new d.TagButton();d.LinkButton.prototype.callback=function(j,k,h,g){var f,i=this;if(typeof wpLink!=="undefined"){wpLink.open(h.id);return}if(!g){g="http://"}if(i.isOpen(h)===false){f=prompt(quicktagsL10n.enterURL,g);if(f){i.tagStart='<a href="'+f+'">';d.TagButton.prototype.callback.call(i,j,k,h)}}else{d.TagButton.prototype.callback.call(i,j,k,h)}};d.ImgButton=function(){var e={ariaLabel:quicktagsL10n.image};d.TagButton.call(this,"img","img","","","","","",e)};d.ImgButton.prototype=new d.TagButton();d.ImgButton.prototype.callback=function(i,k,g,f){if(!f){f="http://"}var j=prompt(quicktagsL10n.enterImageURL,f),h;if(j){h=prompt(quicktagsL10n.enterImageDescription,"");this.tagStart='<img src="'+j+'" alt="'+h+'" />';d.TagButton.prototype.callback.call(this,i,k,g)}};d.DFWButton=function(){d.Button.call(this,"dfw","","f",quicktagsL10n.dfw)};d.DFWButton.prototype=new d.Button();d.DFWButton.prototype.callback=function(){var e;if(!(e=window.wp)||!e.editor||!e.editor.dfw){return}window.wp.editor.dfw.toggle()};d.TextDirectionButton=function(){d.Button.call(this,"textdirection",quicktagsL10n.textdirection,"",quicktagsL10n.toggleTextdirection)};d.TextDirectionButton.prototype=new d.Button();d.TextDirectionButton.prototype.callback=function(g,i){var f=("rtl"===document.getElementsByTagName("html")[0].dir),h=i.style.direction;if(!h){h=(f)?"rtl":"ltr"}i.style.direction=("rtl"===h)?"ltr":"rtl";i.focus()};edButtons[10]=new d.TagButton("strong","b","<strong>","</strong>","","","",{ariaLabel:quicktagsL10n.strong,ariaLabelClose:quicktagsL10n.strongClose});edButtons[20]=new d.TagButton("em","i","<em>","</em>","","","",{ariaLabel:quicktagsL10n.em,ariaLabelClose:quicktagsL10n.emClose});edButtons[30]=new d.LinkButton();edButtons[40]=new d.TagButton("block","b-quote","\n\n<blockquote>","</blockquote>\n\n","","","",{ariaLabel:quicktagsL10n.blockquote,ariaLabelClose:quicktagsL10n.blockquoteClose});edButtons[50]=new d.TagButton("del","del",'<del datetime="'+a+'">',"</del>","","","",{ariaLabel:quicktagsL10n.del,ariaLabelClose:quicktagsL10n.delClose});edButtons[60]=new d.TagButton("ins","ins",'<ins datetime="'+a+'">',"</ins>","","","",{ariaLabel:quicktagsL10n.ins,ariaLabelClose:quicktagsL10n.insClose});edButtons[70]=new d.ImgButton();edButtons[80]=new d.TagButton("ul","ul","<ul>\n","</ul>\n\n","","","",{ariaLabel:quicktagsL10n.ul,ariaLabelClose:quicktagsL10n.ulClose});edButtons[90]=new d.TagButton("ol","ol","<ol>\n","</ol>\n\n","","","",{ariaLabel:quicktagsL10n.ol,ariaLabelClose:quicktagsL10n.olClose});edButtons[100]=new d.TagButton("li","li","\t<li>","</li>\n","","","",{ariaLabel:quicktagsL10n.li,ariaLabelClose:quicktagsL10n.liClose});edButtons[110]=new d.TagButton("code","code","<code>","</code>","","","",{ariaLabel:quicktagsL10n.code,ariaLabelClose:quicktagsL10n.codeClose});edButtons[120]=new d.TagButton("more","more","<!--more-->\n\n","","","","",{ariaLabel:quicktagsL10n.more});edButtons[140]=new d.CloseButton()})();