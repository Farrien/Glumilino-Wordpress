/*!
 * jQuery UI Droppable 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/droppable/
 */
;!function(b){"function"==typeof define&&define.amd?define(["jquery","./core","./widget","./mouse","./draggable"],b):b(jQuery)}(function(b){return b.widget("ui.droppable",{version:"1.11.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var a,f=this.options,e=f.accept;this.isover=!1,this.isout=!0,this.accept=b.isFunction(e)?e:function(c){return c.is(e)},this.proportions=function(){return arguments.length?void (a=arguments[0]):a?a:a={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(f.scope),f.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(a){b.ui.ddmanager.droppables[a]=b.ui.ddmanager.droppables[a]||[],b.ui.ddmanager.droppables[a].push(this)},_splice:function(d){for(var c=0;c<d.length;c++){d[c]===this&&d.splice(c,1)}},_destroy:function(){var a=b.ui.ddmanager.droppables[this.options.scope];this._splice(a),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(a,f){if("accept"===a){this.accept=b.isFunction(f)?f:function(c){return c.is(f)}}else{if("scope"===a){var e=b.ui.ddmanager.droppables[this.options.scope];this._splice(e),this._addToManager(f)}}this._super(a,f)},_activate:function(a){var d=b.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),d&&this._trigger("activate",a,this.ui(d))},_deactivate:function(a){var d=b.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),d&&this._trigger("deactivate",a,this.ui(d))},_over:function(a){var d=b.ui.ddmanager.current;d&&(d.currentItem||d.element)[0]!==this.element[0]&&this.accept.call(this.element[0],d.currentItem||d.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",a,this.ui(d)))},_out:function(a){var d=b.ui.ddmanager.current;d&&(d.currentItem||d.element)[0]!==this.element[0]&&this.accept.call(this.element[0],d.currentItem||d.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",a,this.ui(d)))},_drop:function(a,h){var g=h||b.ui.ddmanager.current,f=!1;return !(!g||(g.currentItem||g.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var d=b(this).droppable("instance");if(d.options.greedy&&!d.options.disabled&&d.options.scope===g.options.scope&&d.accept.call(d.element[0],g.currentItem||g.element)&&b.ui.intersect(g,b.extend(d,{offset:d.element.offset()}),d.options.tolerance,a)){return f=!0,!1}}),!f&&(!!this.accept.call(this.element[0],g.currentItem||g.element)&&(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",a,this.ui(g)),this.element)))},ui:function(c){return{draggable:c.currentItem||c.element,helper:c.helper,position:c.position,offset:c.positionAbs}}}),b.ui.intersect=function(){function c(e,d,f){return e>=d&&e<d+f}return function(x,w,v,u){if(!w.offset){return !1}var t=(x.positionAbs||x.position.absolute).left+x.margins.left,s=(x.positionAbs||x.position.absolute).top+x.margins.top,r=t+x.helperProportions.width,q=s+x.helperProportions.height,p=w.offset.left,o=w.offset.top,n=p+w.proportions().width,a=o+w.proportions().height;switch(v){case"fit":return p<=t&&r<=n&&o<=s&&q<=a;case"intersect":return p<t+x.helperProportions.width/2&&r-x.helperProportions.width/2<n&&o<s+x.helperProportions.height/2&&q-x.helperProportions.height/2<a;case"pointer":return c(u.pageY,o,w.proportions().height)&&c(u.pageX,p,w.proportions().width);case"touch":return(s>=o&&s<=a||q>=o&&q<=a||s<o&&q>a)&&(t>=p&&t<=n||r>=p&&r<=n||t<p&&r>n);default:return !1}}}(),b.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(a,n){var m,l,k=b.ui.ddmanager.droppables[a.options.scope]||[],j=n?n.type:null,i=(a.currentItem||a.element).find(":data(ui-droppable)").addBack();b:for(m=0;m<k.length;m++){if(!(k[m].options.disabled||a&&!k[m].accept.call(k[m].element[0],a.currentItem||a.element))){for(l=0;l<i.length;l++){if(i[l]===k[m].element[0]){k[m].proportions().height=0;continue b}}k[m].visible="none"!==k[m].element.css("display"),k[m].visible&&("mousedown"===j&&k[m]._activate.call(k[m],n),k[m].offset=k[m].element.offset(),k[m].proportions({width:k[m].element[0].offsetWidth,height:k[m].element[0].offsetHeight}))}}},drop:function(a,f){var e=!1;return b.each((b.ui.ddmanager.droppables[a.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&b.ui.intersect(a,this,this.options.tolerance,f)&&(e=this._drop.call(this,f)||e),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],a.currentItem||a.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,f)))}),e},dragStart:function(a,d){a.element.parentsUntil("body").bind("scroll.droppable",function(){a.options.refreshPositions||b.ui.ddmanager.prepareOffsets(a,d)})},drag:function(a,d){a.options.refreshPositions&&b.ui.ddmanager.prepareOffsets(a,d),b.each(b.ui.ddmanager.droppables[a.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var l,k,j,i=b.ui.intersect(a,this,this.options.tolerance,d),c=!i&&this.isover?"isout":i&&!this.isover?"isover":null;c&&(this.options.greedy&&(k=this.options.scope,j=this.element.parents(":data(ui-droppable)").filter(function(){return b(this).droppable("instance").options.scope===k}),j.length&&(l=b(j[0]).droppable("instance"),l.greedyChild="isover"===c)),l&&"isover"===c&&(l.isover=!1,l.isout=!0,l._out.call(l,d)),this[c]=!0,this["isout"===c?"isover":"isout"]=!1,this["isover"===c?"_over":"_out"].call(this,d),l&&"isout"===c&&(l.isout=!1,l.isover=!0,l._over.call(l,d)))}})},dragStop:function(a,d){a.element.parentsUntil("body").unbind("scroll.droppable"),a.options.refreshPositions||b.ui.ddmanager.prepareOffsets(a,d)}},b.ui.droppable});