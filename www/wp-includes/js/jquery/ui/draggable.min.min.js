/*!
 * jQuery UI Draggable 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/draggable/
 */
;!function(b){"function"==typeof define&&define.amd?define(["jquery","./core","./mouse","./widget"],b):b(jQuery)}(function(b){return b.widget("ui.draggable",b.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(d,c){this._super(d,c),"handle"===d&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void (this.destroyOnClear=!0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(a){var d=this.options;return this._blurActiveElement(a),!(this.helper||d.disabled||b(a.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(a),!!this.handle&&(this._blockFrames(d.iframeFix===!0?"iframe":d.iframeFix),!0))},_blockFrames:function(a){this.iframeBlocks=this.document.find(a).map(function(){var c=b(this);return b("<div>").css("position","absolute").appendTo(c.parent()).outerWidth(c.outerWidth()).outerHeight(c.outerHeight()).offset(c.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(a){var f=this.document[0];if(this.handleElement.is(a.target)){try{f.activeElement&&"body"!==f.activeElement.nodeName.toLowerCase()&&b(f.activeElement).blur()}catch(e){}}},_mouseStart:function(a){var d=this.options;return this.helper=this._createHelper(a),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),b.ui.ddmanager&&(b.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===b(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(a),this.originalPosition=this.position=this._generatePosition(a,!1),this.originalPageX=a.pageX,this.originalPageY=a.pageY,d.cursorAt&&this._adjustOffsetFromHelper(d.cursorAt),this._setContainment(),this._trigger("start",a)===!1?(this._clear(),!1):(this._cacheHelperProportions(),b.ui.ddmanager&&!d.dropBehaviour&&b.ui.ddmanager.prepareOffsets(this,a),this._normalizeRightBottom(),this._mouseDrag(a,!0),b.ui.ddmanager&&b.ui.ddmanager.dragStart(this,a),!0)},_refreshOffsets:function(c){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:c.pageX-this.offset.left,top:c.pageY-this.offset.top}},_mouseDrag:function(a,f){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(a,!0),this.positionAbs=this._convertPositionTo("absolute"),!f){var e=this._uiHash();if(this._trigger("drag",a,e)===!1){return this._mouseUp({}),!1}this.position=e.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",b.ui.ddmanager&&b.ui.ddmanager.drag(this,a),!1},_mouseStop:function(a){var f=this,e=!1;return b.ui.ddmanager&&!this.options.dropBehaviour&&(e=b.ui.ddmanager.drop(this,a)),this.dropped&&(e=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!e||"valid"===this.options.revert&&e||this.options.revert===!0||b.isFunction(this.options.revert)&&this.options.revert.call(this.element,e)?b(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){f._trigger("stop",a)!==!1&&f._clear()}):this._trigger("stop",a)!==!1&&this._clear(),!1},_mouseUp:function(a){return this._unblockFrames(),b.ui.ddmanager&&b.ui.ddmanager.dragStop(this,a),this.handleElement.is(a.target)&&this.element.focus(),b.ui.mouse.prototype._mouseUp.call(this,a)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(a){return !this.options.handle||!!b(a.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(a){var h=this.options,g=b.isFunction(h.helper),f=g?b(h.helper.apply(this.element[0],[a])):"clone"===h.helper?this.element.clone().removeAttr("id"):this.element;return f.parents("body").length||f.appendTo("parent"===h.appendTo?this.element[0].parentNode:h.appendTo),g&&f[0]===this.element[0]&&this._setPositionRelative(),f[0]===this.element[0]||/(fixed|absolute)/.test(f.css("position"))||f.css("position","absolute"),f},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(a){"string"==typeof a&&(a=a.split(" ")),b.isArray(a)&&(a={left:+a[0],top:+a[1]||0}),"left" in a&&(this.offset.click.left=a.left+this.margins.left),"right" in a&&(this.offset.click.left=this.helperProportions.width-a.right+this.margins.left),"top" in a&&(this.offset.click.top=a.top+this.margins.top),"bottom" in a&&(this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top)},_isRootNode:function(c){return/(html|body)/i.test(c.tagName)||c===this.document[0]},_getParentOffset:function(){var a=this.offsetParent.offset(),d=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==d&&b.contains(this.scrollParent[0],this.offsetParent[0])&&(a.left+=this.scrollParent.scrollLeft(),a.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(a={top:0,left:0}),{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition){return{top:0,left:0}}var d=this.element.position(),c=this._isRootNode(this.scrollParent[0]);return{top:d.top-(parseInt(this.helper.css("top"),10)||0)+(c?0:this.scrollParent.scrollTop()),left:d.left-(parseInt(this.helper.css("left"),10)||0)+(c?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a,j,i,h=this.options,g=this.document[0];return this.relativeContainer=null,h.containment?"window"===h.containment?void (this.containment=[b(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,b(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,b(window).scrollLeft()+b(window).width()-this.helperProportions.width-this.margins.left,b(window).scrollTop()+(b(window).height()||g.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===h.containment?void (this.containment=[0,0,b(g).width()-this.helperProportions.width-this.margins.left,(b(g).height()||g.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):h.containment.constructor===Array?void (this.containment=h.containment):("parent"===h.containment&&(h.containment=this.helper[0].parentNode),j=b(h.containment),i=j[0],void (i&&(a=/(scroll|auto)/.test(j.css("overflow")),this.containment=[(parseInt(j.css("borderLeftWidth"),10)||0)+(parseInt(j.css("paddingLeft"),10)||0),(parseInt(j.css("borderTopWidth"),10)||0)+(parseInt(j.css("paddingTop"),10)||0),(a?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(j.css("borderRightWidth"),10)||0)-(parseInt(j.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(a?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(j.css("borderBottomWidth"),10)||0)-(parseInt(j.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=j))):void (this.containment=null)},_convertPositionTo:function(f,e){e||(e=this.position);var h="absolute"===f?1:-1,g=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*h+this.offset.parent.top*h-("fixed"===this.cssPosition?-this.offset.scroll.top:g?0:this.offset.scroll.top)*h,left:e.left+this.offset.relative.left*h+this.offset.parent.left*h-("fixed"===this.cssPosition?-this.offset.scroll.left:g?0:this.offset.scroll.left)*h}},_generatePosition:function(t,s){var r,q,p,o,n=this.options,m=this._isRootNode(this.scrollParent[0]),l=t.pageX,k=t.pageY;return m&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),s&&(this.containment&&(this.relativeContainer?(q=this.relativeContainer.offset(),r=[this.containment[0]+q.left,this.containment[1]+q.top,this.containment[2]+q.left,this.containment[3]+q.top]):r=this.containment,t.pageX-this.offset.click.left<r[0]&&(l=r[0]+this.offset.click.left),t.pageY-this.offset.click.top<r[1]&&(k=r[1]+this.offset.click.top),t.pageX-this.offset.click.left>r[2]&&(l=r[2]+this.offset.click.left),t.pageY-this.offset.click.top>r[3]&&(k=r[3]+this.offset.click.top)),n.grid&&(p=n.grid[1]?this.originalPageY+Math.round((k-this.originalPageY)/n.grid[1])*n.grid[1]:this.originalPageY,k=r?p-this.offset.click.top>=r[1]||p-this.offset.click.top>r[3]?p:p-this.offset.click.top>=r[1]?p-n.grid[1]:p+n.grid[1]:p,o=n.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/n.grid[0])*n.grid[0]:this.originalPageX,l=r?o-this.offset.click.left>=r[0]||o-this.offset.click.left>r[2]?o:o-this.offset.click.left>=r[0]?o-n.grid[0]:o+n.grid[0]:o),"y"===n.axis&&(l=this.originalPageX),"x"===n.axis&&(k=this.originalPageY)),{top:k-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:m?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:m?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(a,f,e){return e=e||this._uiHash(),b.ui.plugin.call(this,a,[f,e,this],!0),/^(drag|start|stop)/.test(a)&&(this.positionAbs=this._convertPositionTo("absolute"),e.offset=this.positionAbs),b.Widget.prototype._trigger.call(this,a,f,e)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),b.ui.plugin.add("draggable","connectToSortable",{start:function(a,h,g){var f=b.extend({},h,{item:g.element});g.sortables=[],b(g.options.connectToSortable).each(function(){var d=b(this).sortable("instance");d&&!d.options.disabled&&(g.sortables.push(d),d.refreshPositions(),d._trigger("activate",a,f))})},stop:function(a,h,g){var f=b.extend({},h,{item:g.element});g.cancelHelperRemoval=!1,b.each(g.sortables,function(){var c=this;c.isOver?(c.isOver=0,g.cancelHelperRemoval=!0,c.cancelHelperRemoval=!1,c._storedCSS={position:c.placeholder.css("position"),top:c.placeholder.css("top"),left:c.placeholder.css("left")},c._mouseStop(a),c.options.helper=c.options._helper):(c.cancelHelperRemoval=!0,c._trigger("deactivate",a,f))})},drag:function(a,f,e){b.each(e.sortables,function(){var d=!1,c=this;c.positionAbs=e.positionAbs,c.helperProportions=e.helperProportions,c.offset.click=e.offset.click,c._intersectsWith(c.containerCache)&&(d=!0,b.each(e.sortables,function(){return this.positionAbs=e.positionAbs,this.helperProportions=e.helperProportions,this.offset.click=e.offset.click,this!==c&&this._intersectsWith(this.containerCache)&&b.contains(c.element[0],this.element[0])&&(d=!1),d})),d?(c.isOver||(c.isOver=1,e._parent=f.helper.parent(),c.currentItem=f.helper.appendTo(c.element).data("ui-sortable-item",!0),c.options._helper=c.options.helper,c.options.helper=function(){return f.helper[0]},a.target=c.currentItem[0],c._mouseCapture(a,!0),c._mouseStart(a,!0,!0),c.offset.click.top=e.offset.click.top,c.offset.click.left=e.offset.click.left,c.offset.parent.left-=e.offset.parent.left-c.offset.parent.left,c.offset.parent.top-=e.offset.parent.top-c.offset.parent.top,e._trigger("toSortable",a),e.dropped=c.element,b.each(e.sortables,function(){this.refreshPositions()}),e.currentItem=e.element,c.fromOutside=e),c.currentItem&&(c._mouseDrag(a),f.position=c.position)):c.isOver&&(c.isOver=0,c.cancelHelperRemoval=!0,c.options._revert=c.options.revert,c.options.revert=!1,c._trigger("out",a,c._uiHash(c)),c._mouseStop(a,!0),c.options.revert=c.options._revert,c.options.helper=c.options._helper,c.placeholder&&c.placeholder.remove(),f.helper.appendTo(e._parent),e._refreshOffsets(a),f.position=e._generatePosition(a,!0),e._trigger("fromSortable",a),e.dropped=!1,b.each(e.sortables,function(){this.refreshPositions()}))})}}),b.ui.plugin.add("draggable","cursor",{start:function(a,j,i){var h=b("body"),g=i.options;h.css("cursor")&&(g._cursor=h.css("cursor")),h.css("cursor",g.cursor)},stop:function(a,h,g){var f=g.options;f._cursor&&b("body").css("cursor",f._cursor)}}),b.ui.plugin.add("draggable","opacity",{start:function(a,j,i){var h=b(j.helper),g=i.options;h.css("opacity")&&(g._opacity=h.css("opacity")),h.css("opacity",g.opacity)},stop:function(a,h,g){var f=g.options;f._opacity&&b(h.helper).css("opacity",f._opacity)}}),b.ui.plugin.add("draggable","scroll",{start:function(e,d,f){f.scrollParentNotHidden||(f.scrollParentNotHidden=f.helper.scrollParent(!1)),f.scrollParentNotHidden[0]!==f.document[0]&&"HTML"!==f.scrollParentNotHidden[0].tagName&&(f.overflowOffset=f.scrollParentNotHidden.offset())},drag:function(a,n,m){var l=m.options,k=!1,j=m.scrollParentNotHidden[0],i=m.document[0];j!==i&&"HTML"!==j.tagName?(l.axis&&"x"===l.axis||(m.overflowOffset.top+j.offsetHeight-a.pageY<l.scrollSensitivity?j.scrollTop=k=j.scrollTop+l.scrollSpeed:a.pageY-m.overflowOffset.top<l.scrollSensitivity&&(j.scrollTop=k=j.scrollTop-l.scrollSpeed)),l.axis&&"y"===l.axis||(m.overflowOffset.left+j.offsetWidth-a.pageX<l.scrollSensitivity?j.scrollLeft=k=j.scrollLeft+l.scrollSpeed:a.pageX-m.overflowOffset.left<l.scrollSensitivity&&(j.scrollLeft=k=j.scrollLeft-l.scrollSpeed))):(l.axis&&"x"===l.axis||(a.pageY-b(i).scrollTop()<l.scrollSensitivity?k=b(i).scrollTop(b(i).scrollTop()-l.scrollSpeed):b(window).height()-(a.pageY-b(i).scrollTop())<l.scrollSensitivity&&(k=b(i).scrollTop(b(i).scrollTop()+l.scrollSpeed))),l.axis&&"y"===l.axis||(a.pageX-b(i).scrollLeft()<l.scrollSensitivity?k=b(i).scrollLeft(b(i).scrollLeft()-l.scrollSpeed):b(window).width()-(a.pageX-b(i).scrollLeft())<l.scrollSensitivity&&(k=b(i).scrollLeft(b(i).scrollLeft()+l.scrollSpeed)))),k!==!1&&b.ui.ddmanager&&!l.dropBehaviour&&b.ui.ddmanager.prepareOffsets(m,a)}}),b.ui.plugin.add("draggable","snap",{start:function(a,h,g){var f=g.options;g.snapElements=[],b(f.snap.constructor!==String?f.snap.items||":data(ui-draggable)":f.snap).each(function(){var d=b(this),e=d.offset();this!==g.element[0]&&g.snapElements.push({item:this,width:d.outerWidth(),height:d.outerHeight(),top:e.top,left:e.left})})},drag:function(L,K,J){var I,H,G,F,E,D,C,B,A,z,y=J.options,x=y.snapTolerance,w=K.offset.left,v=w+J.helperProportions.width,u=K.offset.top,a=u+J.helperProportions.height;for(A=J.snapElements.length-1;A>=0;A--){E=J.snapElements[A].left-J.margins.left,D=E+J.snapElements[A].width,C=J.snapElements[A].top-J.margins.top,B=C+J.snapElements[A].height,v<E-x||w>D+x||a<C-x||u>B+x||!b.contains(J.snapElements[A].item.ownerDocument,J.snapElements[A].item)?(J.snapElements[A].snapping&&J.options.snap.release&&J.options.snap.release.call(J.element,L,b.extend(J._uiHash(),{snapItem:J.snapElements[A].item})),J.snapElements[A].snapping=!1):("inner"!==y.snapMode&&(I=Math.abs(C-a)<=x,H=Math.abs(B-u)<=x,G=Math.abs(E-v)<=x,F=Math.abs(D-w)<=x,I&&(K.position.top=J._convertPositionTo("relative",{top:C-J.helperProportions.height,left:0}).top),H&&(K.position.top=J._convertPositionTo("relative",{top:B,left:0}).top),G&&(K.position.left=J._convertPositionTo("relative",{top:0,left:E-J.helperProportions.width}).left),F&&(K.position.left=J._convertPositionTo("relative",{top:0,left:D}).left)),z=I||H||G||F,"outer"!==y.snapMode&&(I=Math.abs(C-u)<=x,H=Math.abs(B-a)<=x,G=Math.abs(E-w)<=x,F=Math.abs(D-v)<=x,I&&(K.position.top=J._convertPositionTo("relative",{top:C,left:0}).top),H&&(K.position.top=J._convertPositionTo("relative",{top:B-J.helperProportions.height,left:0}).top),G&&(K.position.left=J._convertPositionTo("relative",{top:0,left:E}).left),F&&(K.position.left=J._convertPositionTo("relative",{top:0,left:D-J.helperProportions.width}).left)),!J.snapElements[A].snapping&&(I||H||G||F||z)&&J.options.snap.snap&&J.options.snap.snap.call(J.element,L,b.extend(J._uiHash(),{snapItem:J.snapElements[A].item})),J.snapElements[A].snapping=I||H||G||F||z)}}}),b.ui.plugin.add("draggable","stack",{start:function(a,l,k){var j,i=k.options,h=b.makeArray(b(i.stack)).sort(function(d,e){return(parseInt(b(d).css("zIndex"),10)||0)-(parseInt(b(e).css("zIndex"),10)||0)});h.length&&(j=parseInt(b(h[0]).css("zIndex"),10)||0,b(h).each(function(c){b(this).css("zIndex",j+c)}),this.css("zIndex",j+h.length))}}),b.ui.plugin.add("draggable","zIndex",{start:function(a,j,i){var h=b(j.helper),g=i.options;h.css("zIndex")&&(g._zIndex=h.css("zIndex")),h.css("zIndex",g.zIndex)},stop:function(a,h,g){var f=g.options;f._zIndex&&b(h.helper).css("zIndex",f._zIndex)}}),b.ui.draggable});