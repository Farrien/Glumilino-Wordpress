/*!
 * jQuery UI Selectmenu 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/selectmenu
 */
;!function(b){"function"==typeof define&&define.amd?define(["jquery","./core","./widget","./position","./menu"],b):b(jQuery)}(function(b){return b.widget("ui.selectmenu",{version:"1.11.4",defaultElement:"<select>",options:{appendTo:null,disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:null,change:null,close:null,focus:null,open:null,select:null},_create:function(){var c=this.element.uniqueId().attr("id");this.ids={element:c,button:c+"-button",menu:c+"-menu"},this._drawButton(),this._drawMenu(),this.options.disabled&&this.disable()},_drawButton:function(){var a=this;this.label=b("label[for='"+this.ids.element+"']").attr("for",this.ids.button),this._on(this.label,{click:function(c){this.button.focus(),c.preventDefault()}}),this.element.hide(),this.button=b("<span>",{"class":"ui-selectmenu-button ui-widget ui-state-default ui-corner-all",tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true"}).insertAfter(this.element),b("<span>",{"class":"ui-icon "+this.options.icons.button}).prependTo(this.button),this.buttonText=b("<span>",{"class":"ui-selectmenu-text"}).appendTo(this.button),this._setText(this.buttonText,this.element.find("option:selected").text()),this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){a.menuItems||a._refreshMenu()}),this._hoverable(this.button),this._focusable(this.button)},_drawMenu:function(){var a=this;this.menu=b("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=b("<div>",{"class":"ui-selectmenu-menu ui-front"}).append(this.menu).appendTo(this._appendTo()),this.menuInstance=this.menu.menu({role:"listbox",select:function(d,e){d.preventDefault(),a._setSelection(),a._select(e.item.data("ui-selectmenu-item"),d)},focus:function(e,g){var f=g.item.data("ui-selectmenu-item");null!=a.focusIndex&&f.index!==a.focusIndex&&(a._trigger("focus",e,{item:f}),a.isOpen||a._select(f,e)),a.focusIndex=f.index,a.button.attr("aria-activedescendant",a.menuItems.eq(f.index).attr("id"))}}).menu("instance"),this.menu.addClass("ui-corner-bottom").removeClass("ui-corner-all"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return !1},this.menuInstance._isDivider=function(){return !1}},refresh:function(){this._refreshMenu(),this._setText(this.buttonText,this._getSelectedItem().text()),this.options.width||this._resizeButton()},_refreshMenu:function(){this.menu.empty();var d,c=this.element.find("option");c.length&&(this._parseOptions(c),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup"),d=this._getSelectedItem(),this.menuInstance.focus(null,d),this._setAria(d.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(c){this.options.disabled||(this.menuItems?(this.menu.find(".ui-state-focus").removeClass("ui-state-focus"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",c))},_position:function(){this.menuWrap.position(b.extend({of:this.button},this.options.position))},close:function(c){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",c))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderMenu:function(a,h){var g=this,f="";b.each(h,function(e,d){d.optgroup!==f&&(b("<li>",{"class":"ui-selectmenu-optgroup ui-menu-divider"+(d.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""),text:d.optgroup}).appendTo(a),f=d.optgroup),g._renderItemData(a,d)})},_renderItemData:function(d,c){return this._renderItem(d,c).data("ui-selectmenu-item",c)},_renderItem:function(a,f){var e=b("<li>");return f.disabled&&e.addClass("ui-state-disabled"),this._setText(e,f.label),e.appendTo(a)},_setText:function(d,c){c?d.text(c):d.html("&#160;")},_move:function(g,f){var j,i,h=".ui-menu-item";this.isOpen?j=this.menuItems.eq(this.focusIndex):(j=this.menuItems.eq(this.element[0].selectedIndex),h+=":not(.ui-state-disabled)"),i="first"===g||"last"===g?j["first"===g?"prevAll":"nextAll"](h).eq(-1):j[g+"All"](h).eq(0),i.length&&this.menuInstance.focus(f,i)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex)},_toggle:function(c){this[this.isOpen?"close":"open"](c)},_setSelection:function(){var c;this.range&&(window.getSelection?(c=window.getSelection(),c.removeAllRanges(),c.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(a){this.isOpen&&(b(a.target).closest(".ui-selectmenu-menu, #"+this.ids.button).length||this.close(a))}},_buttonEvents:{mousedown:function(){var c;window.getSelection?(c=window.getSelection(),c.rangeCount&&(this.range=c.getRangeAt(0))):this.range=document.selection.createRange()},click:function(c){this._setSelection(),this._toggle(c)},keydown:function(a){var d=!0;switch(a.keyCode){case b.ui.keyCode.TAB:case b.ui.keyCode.ESCAPE:this.close(a),d=!1;break;case b.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(a);break;case b.ui.keyCode.UP:a.altKey?this._toggle(a):this._move("prev",a);break;case b.ui.keyCode.DOWN:a.altKey?this._toggle(a):this._move("next",a);break;case b.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(a):this._toggle(a);break;case b.ui.keyCode.LEFT:this._move("prev",a);break;case b.ui.keyCode.RIGHT:this._move("next",a);break;case b.ui.keyCode.HOME:case b.ui.keyCode.PAGE_UP:this._move("first",a);break;case b.ui.keyCode.END:case b.ui.keyCode.PAGE_DOWN:this._move("last",a);break;default:this.menu.trigger(a),d=!1}d&&a.preventDefault()}},_selectFocusedItem:function(d){var c=this.menuItems.eq(this.focusIndex);c.hasClass("ui-state-disabled")||this._select(c.data("ui-selectmenu-item"),d)},_select:function(e,d){var f=this.element[0].selectedIndex;this.element[0].selectedIndex=e.index,this._setText(this.buttonText,e.label),this._setAria(e),this._trigger("select",d,{item:e}),e.index!==f&&this._trigger("change",d,{item:e}),this.close(d)},_setAria:function(d){var c=this.menuItems.eq(d.index).attr("id");this.button.attr({"aria-labelledby":c,"aria-activedescendant":c}),this.menu.attr("aria-activedescendant",c)},_setOption:function(d,c){"icons"===d&&this.button.find("span.ui-icon").removeClass(this.options.icons.button).addClass(c.button),this._super(d,c),"appendTo"===d&&this.menuWrap.appendTo(this._appendTo()),"disabled"===d&&(this.menuInstance.option("disabled",c),this.button.toggleClass("ui-state-disabled",c).attr("aria-disabled",c),this.element.prop("disabled",c),c?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)),"width"===d&&this._resizeButton()},_appendTo:function(){var a=this.options.appendTo;return a&&(a=a.jquery||a.nodeType?b(a):this.document.find(a).eq(0)),a&&a[0]||(a=this.element.closest(".ui-front")),a.length||(a=this.document[0].body),a},_toggleAttr:function(){this.button.toggleClass("ui-corner-top",this.isOpen).toggleClass("ui-corner-all",!this.isOpen).attr("aria-expanded",this.isOpen),this.menuWrap.toggleClass("ui-selectmenu-open",this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var c=this.options.width;c||(c=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(c)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){return{disabled:this.element.prop("disabled")}},_parseOptions:function(a){var d=[];a.each(function(c,i){var h=b(i),g=h.parent("optgroup");d.push({element:h,index:c,value:h.val(),label:h.text(),optgroup:g.attr("label")||"",disabled:g.prop("disabled")||h.prop("disabled")})}),this.items=d},_destroy:function(){this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.label.attr("for",this.ids.element)}})});