/*!
 * jQuery UI Dialog 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/dialog/
 */
;!function(b){"function"==typeof define&&define.amd?define(["jquery","./core","./widget","./button","./draggable","./mouse","./position","./resizable"],b):b(jQuery)}(function(b){return b.widget("ui.dialog",{version:"1.11.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"Close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(a){var d=b(this).css(a).offset().top;d<0&&b(this).css("top",a.top-d)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&b.fn.draggable&&this._makeDraggable(),this.options.resizable&&b.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var a=this.options.appendTo;return a&&(a.jquery||a.nodeType)?b(a):this.document.find(a||"body").eq(0)},_destroy:function(){var d,c=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),d=c.parent.children().eq(c.index),d.length&&d[0]!==this.element[0]?d.before(this.element):c.parent.append(this.element)},widget:function(){return this.uiDialog},disable:b.noop,enable:b.noop,close:function(a){var h,g=this;if(this._isOpen&&this._trigger("beforeClose",a)!==!1){if(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),!this.opener.filter(":focusable").focus().length){try{h=this.document[0].activeElement,h&&"body"!==h.nodeName.toLowerCase()&&b(h).blur()}catch(f){}}this._hide(this.uiDialog,this.options.hide,function(){g._trigger("close",a)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(a,j){var i=!1,h=this.uiDialog.siblings(".ui-front:visible").map(function(){return +b(this).css("z-index")}).get(),g=Math.max.apply(null,h);return g>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",g+1),i=!0),i&&!j&&this._trigger("focus",a),i},open:function(){var a=this;return this._isOpen?void (this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=b(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){a._focusTabbable(),a._trigger("focus")}),this._makeFocusTarget(),void this._trigger("open"))},_focusTabbable:function(){var c=this._focusedElement;c||(c=this.element.find("[autofocus]")),c.length||(c=this.element.find(":tabbable")),c.length||(c=this.uiDialogButtonPane.find(":tabbable")),c.length||(c=this.uiDialogTitlebarClose.filter(":tabbable")),c.length||(c=this.uiDialog),c.eq(0).focus()},_keepFocus:function(a){function d(){var e=this.document[0].activeElement,f=this.uiDialog[0]===e||b.contains(this.uiDialog[0],e);f||this._focusTabbable()}a.preventDefault(),d.call(this),this._delay(d)},_createWrapper:function(){this.uiDialog=b("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(a){if(this.options.closeOnEscape&&!a.isDefaultPrevented()&&a.keyCode&&a.keyCode===b.ui.keyCode.ESCAPE){return a.preventDefault(),void this.close(a)}if(a.keyCode===b.ui.keyCode.TAB&&!a.isDefaultPrevented()){var h=this.uiDialog.find(":tabbable"),g=h.filter(":first"),f=h.filter(":last");a.target!==f[0]&&a.target!==this.uiDialog[0]||a.shiftKey?a.target!==g[0]&&a.target!==this.uiDialog[0]||!a.shiftKey||(this._delay(function(){f.focus()}),a.preventDefault()):(this._delay(function(){g.focus()}),a.preventDefault())}},mousedown:function(c){this._moveToTop(c)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var a;this.uiDialogTitlebar=b("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(c){b(c.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=b("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(c){c.preventDefault(),this.close(c)}}),a=b("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(a),this.uiDialog.attr({"aria-labelledby":a.attr("id")})},_title:function(c){this.options.title||c.html("&#160;"),c.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=b("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=b("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var a=this,d=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),b.isEmptyObject(d)||b.isArray(d)&&!d.length?void this.uiDialog.removeClass("ui-dialog-buttons"):(b.each(d,function(j,i){var h,g;i=b.isFunction(i)?{click:i,text:j}:i,i=b.extend({type:"button"},i),h=i.click,i.click=function(){h.apply(a.element[0],arguments)},g={icons:i.icons,text:i.showText},delete i.icons,delete i.showText,b("<button></button>",i).button(g).appendTo(a.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function a(c){return{position:c.position,offset:c.offset}}var f=this,e=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(g,c){b(this).addClass("ui-dialog-dragging"),f._blockFrames(),f._trigger("dragStart",g,a(c))},drag:function(c,g){f._trigger("drag",c,a(g))},stop:function(j,i){var d=i.offset.left-f.document.scrollLeft(),c=i.offset.top-f.document.scrollTop();e.position={my:"left top",at:"left"+(d>=0?"+":"")+d+" top"+(c>=0?"+":"")+c,of:f.window},b(this).removeClass("ui-dialog-dragging"),f._unblockFrames(),f._trigger("dragStop",j,a(i))}})},_makeResizable:function(){function a(c){return{originalPosition:c.originalPosition,originalSize:c.originalSize,position:c.position,size:c.size}}var l=this,k=this.options,j=k.resizable,i=this.uiDialog.css("position"),h="string"==typeof j?j:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:k.maxWidth,maxHeight:k.maxHeight,minWidth:k.minWidth,minHeight:this._minHeight(),handles:h,start:function(f,c){b(this).addClass("ui-dialog-resizing"),l._blockFrames(),l._trigger("resizeStart",f,a(c))},resize:function(c,e){l._trigger("resize",c,a(e))},stop:function(o,n){var m=l.uiDialog.offset(),d=m.left-l.document.scrollLeft(),c=m.top-l.document.scrollTop();k.height=l.uiDialog.height(),k.width=l.uiDialog.width(),k.position={my:"left top",at:"left"+(d>=0?"+":"")+d+" top"+(c>=0?"+":"")+c,of:l.window},b(this).removeClass("ui-dialog-resizing"),l._unblockFrames(),l._trigger("resizeStop",o,a(n))}}).css("position",i)},_trackFocus:function(){this._on(this.widget(),{focusin:function(a){this._makeFocusTarget(),this._focusedElement=b(a.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var a=this._trackingInstances(),d=b.inArray(this,a);d!==-1&&a.splice(d,1)},_trackingInstances:function(){var c=this.document.data("ui-dialog-instances");return c||(c=[],this.document.data("ui-dialog-instances",c)),c},_minHeight:function(){var c=this.options;return"auto"===c.height?c.minHeight:Math.min(c.minHeight,c.height)},_position:function(){var c=this.uiDialog.is(":visible");c||this.uiDialog.show(),this.uiDialog.position(this.options.position),c||this.uiDialog.hide()},_setOptions:function(a){var h=this,g=!1,f={};b.each(a,function(d,c){h._setOption(d,c),d in h.sizeRelatedOptions&&(g=!0),d in h.resizableRelatedOptions&&(f[d]=c)}),g&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",f)},_setOption:function(g,f){var j,i,h=this.uiDialog;"dialogClass"===g&&h.removeClass(this.options.dialogClass).addClass(f),"disabled"!==g&&(this._super(g,f),"appendTo"===g&&this.uiDialog.appendTo(this._appendTo()),"buttons"===g&&this._createButtons(),"closeText"===g&&this.uiDialogTitlebarClose.button({label:""+f}),"draggable"===g&&(j=h.is(":data(ui-draggable)"),j&&!f&&h.draggable("destroy"),!j&&f&&this._makeDraggable()),"position"===g&&this._position(),"resizable"===g&&(i=h.is(":data(ui-resizable)"),i&&!f&&h.resizable("destroy"),i&&"string"==typeof f&&h.resizable("option","handles",f),i||f===!1||this._makeResizable()),"title"===g&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var f,e,h,g=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),g.minWidth>g.width&&(g.width=g.minWidth),f=this.uiDialog.css({height:"auto",width:g.width}).outerHeight(),e=Math.max(0,g.minHeight-f),h="number"==typeof g.maxHeight?Math.max(0,g.maxHeight-f):"none","auto"===g.height?this.element.css({minHeight:e,maxHeight:h,height:"auto"}):this.element.height(Math.max(0,g.height-f)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var a=b(this);return b("<div>").css({position:"absolute",width:a.outerWidth(),height:a.outerHeight()}).appendTo(a.parent()).offset(a.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(a){return !!b(a.target).closest(".ui-dialog").length||!!b(a.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var a=!0;this._delay(function(){a=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(c){a||this._allowInteraction(c)||(c.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=b("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var c=this.document.data("ui-dialog-overlays")-1;c?this.document.data("ui-dialog-overlays",c):this.document.unbind("focusin").removeData("ui-dialog-overlays"),this.overlay.remove(),this.overlay=null}}})});