(function(a){a.ui.FloatPanel.zIndex=100100;a.PluginManager.add("wordpress",function(e){var f,b,l=a.DOM,h=a.each,j=e.editorManager.i18n.translate,d=window.jQuery,g=window.wp,c=(g&&g.editor&&g.editor.autop&&e.getParam("wpautop",true));if(d){d(document).triggerHandler("tinymce-editor-setup",[e])}function i(o){var n,m,p,q=0;m=(o==="hide");if(e.theme.panel){p=e.theme.panel.find(".toolbar:not(.menubar)")}if(!p||p.length<2||(o==="hide"&&!p[1].visible())){return}if(!o&&p[1].visible()){o="hide"}h(p,function(s,r){if(r>0){if(o==="hide"){s.hide();q+=30}else{s.show();q-=30}}});if(q&&!m){if(!a.Env.iOS){n=e.getContentAreaContainer().firstChild;l.setStyle(n,"height",n.clientHeight+q)}if(o==="hide"){setUserSetting("hidetb","0");f&&f.active(false)}else{setUserSetting("hidetb","1");f&&f.active(true)}}e.fire("wp-toolbar-toggle")}e.addButton("wp_adv",{tooltip:"Toolbar Toggle",cmd:"WP_Adv",onPostRender:function(){f=this;f.active(getUserSetting("hidetb")==="1"?true:false)}});e.on("PostRender",function(){if(e.getParam("wordpress_adv_hidden",true)&&getUserSetting("hidetb","0")==="0"){i("hide")}});e.addCommand("WP_Adv",function(){i()});e.on("focus",function(){window.wpActiveEditor=e.id});e.on("BeforeSetContent",function(m){var n;if(m.content){if(m.content.indexOf("<!--more")!==-1){n=j("Read more...");m.content=m.content.replace(/<!--more(.*?)-->/g,function(o,p){return'<img src="'+a.Env.transparentSrc+'" data-wp-more="more" data-wp-more-text="'+p+'" class="wp-more-tag mce-wp-more" alt="" title="'+n+'" data-mce-resize="false" data-mce-placeholder="1" />'})}if(m.content.indexOf("<!--nextpage-->")!==-1){n=j("Page break");m.content=m.content.replace(/<!--nextpage-->/g,'<img src="'+a.Env.transparentSrc+'" data-wp-more="nextpage" class="wp-more-tag mce-wp-nextpage" alt="" title="'+n+'" data-mce-resize="false" data-mce-placeholder="1" />')}if(m.load&&m.format!=="raw"&&c){m.content=g.editor.autop(m.content)}if(m.content.indexOf("<script")!==-1||m.content.indexOf("<style")!==-1){m.content=m.content.replace(/<(script|style)[^>]*>[\s\S]*?<\/\1>/g,function(p,o){return'<img src="'+a.Env.transparentSrc+'" data-wp-preserve="'+encodeURIComponent(p)+'" data-mce-resize="false" data-mce-placeholder="1" class="mce-object" width="20" height="20" alt="&lt;'+o+'&gt;" title="&lt;'+o+'&gt;" />'})}m.content=m.content.replace(/<p>([^<>]+)<\/p>/gi,function(o,p){if(p==="&nbsp;"||!/\S/.test(p)){return"<p><br /></p>"}return o})}});e.on("PostProcess",function(m){if(m.get){m.content=m.content.replace(/<img[^>]+>/g,function(q){var o,n,p="";if(q.indexOf('data-wp-more="more"')!==-1){if(o=q.match(/data-wp-more-text="([^"]+)"/)){p=o[1]}n="<!--more"+p+"-->"}else{if(q.indexOf('data-wp-more="nextpage"')!==-1){n="<!--nextpage-->"}else{if(q.indexOf("data-wp-preserve")!==-1){if(o=q.match(/ data-wp-preserve="([^"]+)"/)){n=decodeURIComponent(o[1])}}}}return n||q})}});e.on("ResolveName",function(n){var m;if(n.target.nodeName==="IMG"&&(m=e.dom.getAttrib(n.target,"data-wp-more"))){n.name=m}});e.addCommand("WP_More",function(m){var o,n,s,q="wp-more-tag",r=e.dom,p=e.selection.getNode();m=m||"more";q+=" mce-wp-"+m;s=m==="more"?"Read more...":"Next page";s=j(s);n='<img src="'+a.Env.transparentSrc+'" alt="" title="'+s+'" class="'+q+'" data-wp-more="'+m+'" data-mce-resize="false" data-mce-placeholder="1" />';if(p.nodeName==="BODY"||(p.nodeName==="P"&&p.parentNode.nodeName==="BODY")){e.insertContent(n);return}o=r.getParent(p,function(t){if(t.parentNode&&t.parentNode.nodeName==="BODY"){return true}return false},e.getBody());if(o){if(o.nodeName==="P"){o.appendChild(r.create("p",null,n).firstChild)}else{r.insertAfter(r.create("p",null,n),o)}e.nodeChanged()}});e.addCommand("WP_Code",function(){e.formatter.toggle("code")});e.addCommand("WP_Page",function(){e.execCommand("WP_More","nextpage")});e.addCommand("WP_Help",function(){var n=a.Env.mac?j("Ctrl + Alt + letter:"):j("Shift + Alt + letter:"),y=a.Env.mac?j("Cmd + letter:"):j("Ctrl + letter:"),v=[],u=[],x={},w={},o=0,m=0,r=e.settings.wp_shortcut_labels,q,p,s,z;if(!r){return}function t(D,C){var A="<tr>";var B=0;C=C||1;h(D,function(F,E){A+="<td><kbd>"+E+"</kbd></td><td>"+j(F)+"</td>";B++});while(B<C){A+="<td></td><td></td>";B++}return A+"</tr>"}h(r,function(B,A){var C;if(B.indexOf("meta")!==-1){o++;C=B.replace("meta","").toLowerCase();if(C){x[C]=A;if(o%2===0){v.push(t(x,2));x={}}}}else{if(B.indexOf("access")!==-1){m++;C=B.replace("access","").toLowerCase();if(C){w[C]=A;if(m%2===0){u.push(t(w,2));w={}}}}}});if(o%2>0){v.push(t(x,2))}if(m%2>0){u.push(t(w,2))}q=[j("Letter"),j("Action"),j("Letter"),j("Action")];q="<tr><th>"+q.join("</th><th>")+"</th></tr>";p='<div class="wp-editor-help">';p=p+"<h2>"+j("Default shortcuts,")+" "+y+'</h2><table class="wp-help-th-center fixed">'+q+v.join("")+"</table><h2>"+j("Additional shortcuts,")+" "+n+'</h2><table class="wp-help-th-center fixed">'+q+u.join("")+"</table>";if(e.plugins.wptextpattern&&(!a.Env.ie||a.Env.ie>8)){p=p+"<h2>"+j("When starting a new paragraph with one of these formatting shortcuts followed by a space, the formatting will be applied automatically. Press Backspace or Escape to undo.")+'</h2><table class="wp-help-th-center fixed">'+t({"*":"Bullet list","1.":"Numbered list"})+t({"-":"Bullet list","1)":"Numbered list"})+"</table>";p=p+"<h2>"+j("The following formatting shortcuts are replaced when pressing Enter. Press Escape or the Undo button to undo.")+'</h2><table class="wp-help-single">'+t({">":"Blockquote"})+t({"##":"Heading 2"})+t({"###":"Heading 3"})+t({"####":"Heading 4"})+t({"#####":"Heading 5"})+t({"######":"Heading 6"})+t({"---":"Horizontal line"})+"</table>"}p=p+"<h2>"+j("Focus shortcuts:")+'</h2><table class="wp-help-single">'+t({"Alt + F8":"Inline toolbar (when an image, link or preview is selected)"})+t({"Alt + F9":"Editor menu (when enabled)"})+t({"Alt + F10":"Editor toolbar"})+t({"Alt + F11":"Elements path"})+"</table><p>"+j("To move focus to other buttons use Tab or the arrow keys. To return focus to the editor press Escape or use one of the buttons.")+"</p>";p+="</div>";s=e.windowManager.open({title:"Keyboard Shortcuts",items:{type:"container",classes:"wp-help",html:p},buttons:{text:"Close",onclick:"close"}});if(s.$el){s.$el.find('div[role="application"]').attr("role","document");z=s.$el.find(".mce-wp-help");if(z[0]){z.attr("tabindex","0");z[0].focus();z.on("keydown",function(A){if(A.keyCode>=33&&A.keyCode<=40){A.stopPropagation()}})}}});e.addCommand("WP_Medialib",function(){if(g&&g.media&&g.media.editor){g.media.editor.open(e.id)}});e.addButton("wp_more",{tooltip:"Insert Read More tag",onclick:function(){e.execCommand("WP_More","more")}});e.addButton("wp_page",{tooltip:"Page break",onclick:function(){e.execCommand("WP_More","nextpage")}});e.addButton("wp_help",{tooltip:"Keyboard Shortcuts",cmd:"WP_Help"});e.addButton("wp_code",{tooltip:"Code",cmd:"WP_Code",stateSelector:"code"});if(g&&g.media&&g.media.editor){e.addMenuItem("add_media",{text:"Add Media",icon:"wp-media-library",context:"insert",cmd:"WP_Medialib"})}e.addMenuItem("wp_more",{text:"Insert Read More tag",icon:"wp_more",context:"insert",onclick:function(){e.execCommand("WP_More","more")}});e.addMenuItem("wp_page",{text:"Page break",icon:"wp_page",context:"insert",onclick:function(){e.execCommand("WP_More","nextpage")}});e.on("BeforeExecCommand",function(m){if(a.Env.webkit&&(m.command==="InsertUnorderedList"||m.command==="InsertOrderedList")){if(!b){b=e.dom.create("style",{type:"text/css"},"#tinymce,#tinymce span,#tinymce li,#tinymce li>span,#tinymce p,#tinymce p>span{font:medium sans-serif;color:#000;line-height:normal;}")}e.getDoc().head.appendChild(b)}});e.on("ExecCommand",function(m){if(a.Env.webkit&&b&&("InsertUnorderedList"===m.command||"InsertOrderedList"===m.command)){e.dom.remove(b)}});e.on("init",function(){var o=a.Env,n=["mceContentBody"],q=e.getDoc(),r=e.dom;if(o.iOS){r.addClass(q.documentElement,"ios")}if(e.getParam("directionality")==="rtl"){n.push("rtl");r.setAttrib(q.documentElement,"dir","rtl")}r.setAttrib(q.documentElement,"lang",e.getParam("wp_lang_attr"));if(o.ie){if(parseInt(o.ie,10)===9){n.push("ie9")}else{if(parseInt(o.ie,10)===8){n.push("ie8")}else{if(o.ie<8){n.push("ie7")}}}}else{if(o.webkit){n.push("webkit")}}n.push("wp-editor");h(n,function(t){if(t){r.addClass(q.body,t)}});e.on("BeforeSetContent",function(t){if(t.content){t.content=t.content.replace(/<p>\s*<(p|div|ul|ol|dl|table|blockquote|h[1-6]|fieldset|pre)( [^>]*)?>/gi,"<$1$2>").replace(/<\/(p|div|ul|ol|dl|table|blockquote|h[1-6]|fieldset|pre)>\s*<\/p>/gi,"</$1>")}});if(d){d(document).triggerHandler("tinymce-editor-init",[e])}if(window.tinyMCEPreInit&&window.tinyMCEPreInit.dragDropUpload){r.bind(q,"dragstart dragend dragover drop",function(t){if(d){d(document).trigger(new d.Event(t))}})}if(e.getParam("wp_paste_filters",true)){e.on("PastePreProcess",function(t){t.content=t.content.replace(/<br class="?Apple-interchange-newline"?>/gi,"");if(!a.Env.webkit){t.content=t.content.replace(/(<[^>]+) style="[^"]*"([^>]*>)/gi,"$1$2");t.content=t.content.replace(/(<[^>]+) data-mce-style=([^>]+>)/gi,"$1 style=$2")}});e.on("PastePostProcess",function(t){h(r.select("p",t.node),function(u){if(r.isEmpty(u)){r.remove(u)}})})}if(e.settings.wp_shortcut_labels&&e.theme.panel){var s={};var m="Shift+Alt+";var p="Ctrl+";if(a.Env.mac){m="\u2303\u2325";p="\u2318"}h(e.settings.wp_shortcut_labels,function(u,t){s[t]=u.replace("access",m).replace("meta",p)});h(e.theme.panel.find("button"),function(t){if(t&&t.settings.tooltip&&s.hasOwnProperty(t.settings.tooltip)){t.settings.tooltip=e.translate(t.settings.tooltip)+" ("+s[t.settings.tooltip]+")"}});h(e.theme.panel.find("listbox"),function(t){if(t&&t.settings.text==="Paragraph"){h(t.settings.values,function(u){if(u.text&&s.hasOwnProperty(u.text)){u.shortcut="("+s[u.text]+")"}})}})}});e.on("SaveContent",function(m){if(!e.inline&&e.isHidden()){m.content=m.element.value;return}m.content=m.content.replace(/<p>(?:<br ?\/?>|\u00a0|\uFEFF| )*<\/p>/g,"<p>&nbsp;</p>");if(c){m.content=g.editor.removep(m.content)}});e.on("preInit",function(){var m="@[id|accesskey|class|dir|lang|style|tabindex|title|contenteditable|draggable|dropzone|hidden|spellcheck|translate],i,b,script[src|async|defer|type|charset|crossorigin|integrity]";e.schema.addValidElements(m);if(a.Env.iOS){e.settings.height=300}h({c:"JustifyCenter",r:"JustifyRight",l:"JustifyLeft",j:"JustifyFull",q:"mceBlockQuote",u:"InsertUnorderedList",o:"InsertOrderedList",m:"WP_Medialib",z:"WP_Adv",t:"WP_More",d:"Strikethrough",h:"WP_Help",p:"WP_Page",x:"WP_Code"},function(o,n){e.shortcuts.add("access+"+n,"",o)});e.addShortcut("meta+s","",function(){if(g&&g.autosave){g.autosave.server.triggerSave()}});if(window.getUserSetting("editor_plain_text_paste_warning")>1){e.settings.paste_plaintext_inform=false}if(a.Env.mac){a.$(e.iframeElement).attr("title",j("Rich Text Area. Press Control-Option-H for help."))}});e.on("PastePlainTextToggle",function(m){if(m.state===true){var n=parseInt(window.getUserSetting("editor_plain_text_paste_warning"),10)||0;if(n<2){window.setUserSetting("editor_plain_text_paste_warning",++n)}}});e.on("preinit",function(){var n=a.ui.Factory,p=e.settings,t,q,v,m=e.getContainer(),o=document.getElementById("wpadminbar"),w=document.getElementById(e.id+"_ifr"),x,y,u;if(m){x=a.$(".mce-toolbar-grp",m)[0];y=a.$(".mce-statusbar",m)[0]}if(e.id==="content"){u=document.getElementById("post-status-info")}function r(D,B){var C,E=[],A;h(D,function(G){var H;function F(){var I=e.selection;if(H==="bullist"){I.selectorChanged("ul > li",function(L,J){var K=J.parents.length,M;while(K--){M=J.parents[K].nodeName;if(M==="OL"||M=="UL"){break}}G.active(L&&M==="UL")})}if(H==="numlist"){I.selectorChanged("ol > li",function(L,J){var K=J.parents.length,M;while(K--){M=J.parents[K].nodeName;if(M==="OL"||M==="UL"){break}}G.active(L&&M==="OL")})}if(G.settings.stateSelector){I.selectorChanged(G.settings.stateSelector,function(J){G.active(J)},true)}if(G.settings.disabledStateSelector){I.selectorChanged(G.settings.disabledStateSelector,function(J){G.disabled(J)})}}if(G==="|"){A=null}else{if(n.has(G)){G={type:G};if(p.toolbar_items_size){G.size=p.toolbar_items_size}E.push(G);A=null}else{if(!A){A={type:"buttongroup",items:[]};E.push(A)}if(e.buttons[G]){H=G;G=e.buttons[H];if(typeof G==="function"){G=G()}G.type=G.type||"button";if(p.toolbar_items_size){G.size=p.toolbar_items_size}G=n.create(G);A.items.push(G);if(e.initialized){F()}else{e.on("init",F)}}}}});C=n.create({type:"panel",layout:"stack",classes:"toolbar-grp inline-toolbar-grp",ariaRoot:true,ariaRemember:true,items:[{type:"toolbar",layout:"flow",items:E}]});C.bottom=B;function z(){if(!q){return this}var U=window.pageXOffset||document.documentElement.scrollLeft,T=window.pageYOffset||document.documentElement.scrollTop,ac=window.innerWidth,O=window.innerHeight,H=w?w.getBoundingClientRect():{top:0,right:ac,bottom:O,left:0,width:ac,height:O},Q=this.getEl(),S=Q.offsetWidth,aa=Q.clientHeight,ae=q.getBoundingClientRect(),X=(ae.left+ae.right)/2,W=5,J=aa+W,K=o?o.getBoundingClientRect().bottom:0,Z=x?x.getBoundingClientRect().bottom:0,V=y?O-y.getBoundingClientRect().top:0,N=u?O-u.getBoundingClientRect().top:0,L=Math.max(0,K,Z,H.top),P=Math.max(0,V,N,O-H.bottom),F=ae.top+H.top-L,Y=O-H.top-ae.bottom-P,ad=O-L-P,G="",M=0,ab=0,R,I;if(F>=ad||Y>=ad){this.scrolling=true;this.hide();this.scrolling=false;return this}if(a.Env.iOS&&q.nodeName==="IMG"){M=54;ab=46}if(this.bottom){if(Y>=J){G=" mce-arrow-up";R=ae.bottom+H.top+T-ab}else{if(F>=J){G=" mce-arrow-down";R=ae.top+H.top+T-aa+M}}}else{if(F>=J){G=" mce-arrow-down";R=ae.top+H.top+T-aa+M}else{if(Y>=J&&ad/2>ae.bottom+H.top-L){G=" mce-arrow-up";R=ae.bottom+H.top+T-ab}}}if(typeof R==="undefined"){R=T+L+W+ab}I=X-S/2+H.left+U;if(ae.left<0||ae.right>H.width){I=H.left+U+(H.width-S)/2}else{if(S>=ac){G+=" mce-arrow-full";I=0}else{if((I<0&&ae.left+S>ac)||(I+S>ac&&ae.right-S<0)){I=(ac-S)/2}else{if(I<H.left+U){G+=" mce-arrow-left";I=ae.left+H.left+U}else{if(I+S>H.width+H.left+U){G+=" mce-arrow-right";I=ae.right-S+H.left+U}}}}}if(a.Env.iOS&&q.nodeName==="IMG"){G=G.replace(/ ?mce-arrow-(up|down)/g,"")}Q.className=Q.className.replace(/ ?mce-arrow-[\w]+/g,"")+G;l.setStyles(Q,{left:I,top:R});return this}C.on("show",function(){this.reposition()});C.on("keydown",function(F){if(F.keyCode===27){this.hide();e.focus()}});e.on("remove",function(){C.remove()});C.reposition=z;C.hide().renderTo(document.body);return C}e.shortcuts.add("alt+119","",function(){var z;if(t){z=t.find("toolbar")[0];z&&z.focus(true)}});e.on("nodechange",function(A){var B=e.selection.isCollapsed();var z={element:A.element,parents:A.parents,collapsed:B};e.fire("wptoolbar",z);q=z.selection||z.element;if(t&&t!==z.toolbar){t.hide()}if(z.toolbar){if(t!==z.toolbar){t=z.toolbar;t.show()}else{t.reposition()}}else{t=false}});e.on("focus",function(){if(t){t.show()}});function s(z){if(t){if(t.tempHide||z.type==="hide"||z.type==="blur"){t.hide();t=false}else{if((z.type==="resizewindow"||z.type==="scrollwindow"||z.type==="resize"||z.type==="scroll")&&!t.blockHide){clearTimeout(v);v=setTimeout(function(){if(t&&typeof t.show==="function"){t.scrolling=false;t.show()}},250);t.scrolling=true;t.hide()}}}}e.on("resizewindow scrollwindow",s);e.dom.bind(e.getWin(),"resize scroll",s);e.on("remove",function(){e.off("resizewindow scrollwindow",s);e.dom.unbind(e.getWin(),"resize scroll",s)});e.on("blur hide",s);e.wp=e.wp||{};e.wp._createToolbar=r},true);function k(){}return{_showButtons:k,_hideButtons:k,_setEmbed:k,_getEmbed:k}})}(window.tinymce));