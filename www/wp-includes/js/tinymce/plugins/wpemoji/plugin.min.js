(function(c,a,b){c.PluginManager.add("wpemoji",function(h){var l,i=c.Env,e=window.navigator.userAgent,g=e.indexOf("Windows")>-1,j=(function(){var m=e.match(/Windows NT 6\.(\d)/);if(m&&m[1]>1){return true}return false}());if(!a||!a.emoji||b.supports.everything){return}function f(m){m.className="emoji";m.setAttribute("data-mce-resize","false");m.setAttribute("data-mce-placeholder","1");m.setAttribute("data-wp-emoji","1")}function k(n){var m={"data-mce-resize":"false","data-mce-placeholder":"1","data-wp-emoji":"1"};a.emoji.parse(n,{imgAttr:m})}function d(o){var n,m;if(o&&window.twemoji&&window.twemoji.test(o.textContent||o.innerText)){if(i.webkit){n=h.selection;m=n.getBookmark()}k(o);if(i.webkit){n.moveToBookmark(m)}}}if(j){h.on("keyup",function(m){if(m.keyCode===231){d(h.selection.getNode())}})}else{if(!g){h.on("keydown keyup",function(m){l=(m.type==="keydown")});h.on("input",function(){if(l){return}d(h.selection.getNode())})}}h.on("setcontent",function(o){var m=h.selection,n=m.getNode();if(window.twemoji&&window.twemoji.test(n.textContent||n.innerText)){k(n);if(i.ie&&i.ie<9&&o.load&&n&&n.nodeName==="BODY"){m.collapse(true)}}});h.on("PastePostProcess",function(m){if(window.twemoji){c.each(h.dom.$("img.emoji",m.node),function(n){if(n.alt&&window.twemoji.test(n.alt)){f(n)}})}});h.on("postprocess",function(m){if(m.content){m.content=m.content.replace(/<img[^>]+data-wp-emoji="[^>]+>/g,function(n){var o=n.match(/alt="([^"]+)"/);if(o&&o[1]){return o[1]}return n})}});h.on("resolvename",function(m){if(m.target.nodeName==="IMG"&&h.dom.getAttrib(m.target,"data-wp-emoji")){m.preventDefault()}})})})(window.tinymce,window.wp,window._wpemojiSettings);