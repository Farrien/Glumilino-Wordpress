(function(f,e,d){f.PluginManager.add("wpemoji",function(n){var a,m=f.Env,q=window.navigator.userAgent,o=q.indexOf("Windows")>-1,c=(function(){var g=q.match(/Windows NT 6\.(\d)/);if(g&&g[1]>1){return true}return false}());if(!e||!e.emoji||d.supports.everything){return}function p(g){g.className="emoji";g.setAttribute("data-mce-resize","false");g.setAttribute("data-mce-placeholder","1");g.setAttribute("data-wp-emoji","1")}function b(h){var g={"data-mce-resize":"false","data-mce-placeholder":"1","data-wp-emoji":"1"};e.emoji.parse(h,{imgAttr:g})}function r(h){var i,g;if(h&&window.twemoji&&window.twemoji.test(h.textContent||h.innerText)){if(m.webkit){i=n.selection;g=i.getBookmark()}b(h);if(m.webkit){i.moveToBookmark(g)}}}if(c){n.on("keyup",function(g){if(g.keyCode===231){r(n.selection.getNode())}})}else{if(!o){n.on("keydown keyup",function(g){a=(g.type==="keydown")});n.on("input",function(){if(a){return}r(n.selection.getNode())})}}n.on("setcontent",function(h){var g=n.selection,i=g.getNode();if(window.twemoji&&window.twemoji.test(i.textContent||i.innerText)){b(i);if(m.ie&&m.ie<9&&h.load&&i&&i.nodeName==="BODY"){g.collapse(true)}}});n.on("PastePostProcess",function(g){if(window.twemoji){f.each(n.dom.$("img.emoji",g.node),function(h){if(h.alt&&window.twemoji.test(h.alt)){p(h)}})}});n.on("postprocess",function(g){if(g.content){g.content=g.content.replace(/<img[^>]+data-wp-emoji="[^>]+>/g,function(i){var h=i.match(/alt="([^"]+)"/);if(h&&h[1]){return h[1]}return i})}});n.on("resolvename",function(g){if(g.target.nodeName==="IMG"&&n.dom.getAttrib(g.target,"data-wp-emoji")){g.preventDefault()}})})})(window.tinymce,window.wp,window._wpemojiSettings);