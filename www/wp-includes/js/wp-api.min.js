(function(b,c){function a(){this.models={};this.collections={};this.views={}}b.wp=b.wp||{};wp.api=wp.api||new a();wp.api.versionString=wp.api.versionString||"wp/v2/";if(!_.isFunction(_.includes)&&_.isFunction(_.contains)){_.includes=_.contains}})(window);(function(b,d){var c,a;b.wp=b.wp||{};wp.api=wp.api||{};wp.api.utils=wp.api.utils||{};if(!Date.prototype.toISOString){c=function(e){a=String(e);if(1===a.length){a="0"+a}return a};Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+c(this.getUTCMonth()+1)+"-"+c(this.getUTCDate())+"T"+c(this.getUTCHours())+":"+c(this.getUTCMinutes())+":"+c(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1000).toFixed(3)).slice(2,5)+"Z"}}wp.api.utils.parseISO8601=function(g){var l,m,h,f,j=0,e=[1,4,5,6,7,10,11];if((m=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/.exec(g))){for(h=0;(f=e[h]);++h){m[f]=+m[f]||0}m[2]=(+m[2]||1)-1;m[3]=+m[3]||1;if("Z"!==m[8]&&d!==m[9]){j=m[10]*60+m[11];if("+"===m[9]){j=0-j}}l=Date.UTC(m[1],m[2],m[3],m[4],m[5]+j,m[6],m[7])}else{l=Date.parse?Date.parse(g):NaN}return l};wp.api.utils.getRootUrl=function(){return b.location.origin?b.location.origin+"/":b.location.protocol+"/"+b.location.host+"/"};wp.api.utils.capitalize=function(e){if(_.isUndefined(e)){return e}return e.charAt(0).toUpperCase()+e.slice(1)};wp.api.utils.capitalizeAndCamelCaseDashes=function(e){if(_.isUndefined(e)){return e}e=wp.api.utils.capitalize(e);return wp.api.utils.camelCaseDashes(e)};wp.api.utils.camelCaseDashes=function(e){return e.replace(/-([a-z])/g,function(f){return f[1].toUpperCase()})};wp.api.utils.extractRoutePart=function(f,h,e,g){var i;h=h||1;e=e||wp.api.versionString;if(0===f.indexOf("/"+e)){f=f.substr(e.length+1)}i=f.split("/");if(g){i=i.reverse()}if(_.isUndefined(i[--h])){return""}return i[h]};wp.api.utils.extractParentName=function(f){var g,e=f.lastIndexOf("_id>[\\d]+)/");if(e<0){return""}g=f.substr(0,e-1);g=g.split("/");g.pop();g=g.pop();return g};wp.api.utils.decorateFromRoute=function(f,e){_.each(f,function(g){if(_.includes(g.methods,"POST")||_.includes(g.methods,"PUT")){if(!_.isEmpty(g.args)){if(_.isEmpty(e.prototype.args)){e.prototype.args=g.args}else{e.prototype.args=_.extend(e.prototype.args,g.args)}}}else{if(_.includes(g.methods,"GET")){if(!_.isEmpty(g.args)){if(_.isEmpty(e.prototype.options)){e.prototype.options=g.args}else{e.prototype.options=_.extend(e.prototype.options,g.args)}}}}})};wp.api.utils.addMixinsAndHelpers=function(j,e,g){var q=false,p=["date","modified","date_gmt","modified_gmt"],o={setDate:function(u,v){var t=v||"date";if(_.indexOf(p,t)<0){return false}this.set(t,u.toISOString())},getDate:function(v){var t=v||"date",u=this.get(t);if(_.indexOf(p,t)<0||_.isNull(u)){return false}return new Date(wp.api.utils.parseISO8601(u))}},m=function(v,A,x,u,y){var t,z,w,B;B=jQuery.Deferred();z=v.get("_embedded")||{};if(!_.isNumber(A)||0===A){B.reject();return B}if(z[u]){w=_.findWhere(z[u],{id:A})}if(!w){w={id:A}}t=new wp.api.models[x](w);if(!t.get(y)){t.fetch({success:function(C){B.resolve(C)},error:function(D,C){B.reject(C)}})}else{B.resolve(t)}return B.promise()},n=function(v,w,t,B){var u,A,z,x="",y="",C=jQuery.Deferred();u=v.get("id");A=v.get("_embedded")||{};if(!_.isNumber(u)||0===u){C.reject();return C}if(!_.isUndefined(t)&&!_.isUndefined(A[t])){if(_.isUndefined(B)){y=A[t]}else{y=A[t][B]}}else{x={parent:u}}z=new wp.api.collections[w](y,x);if(_.isUndefined(z.models[0])){z.fetch({success:function(D){s(D,u);C.resolve(D)},error:function(E,D){C.reject(D)}})}else{s(z,u);C.resolve(z)}return C.promise()},s=function(u,t){_.each(u.models,function(v){v.set("parent_post",t)})},l={getMeta:function(){return n(this,"PostMeta","https://api.w.org/meta")}},f={getRevisions:function(){return n(this,"PostRevisions")}},r={getTags:function(){var u=this.get("tags"),t=new wp.api.collections.Tags();if(_.isEmpty(u)){return jQuery.Deferred().resolve([])}return t.fetch({data:{include:u}})},setTags:function(w){var v,x,u=this,t=[];if(_.isString(w)){return false}if(_.isArray(w)){v=new wp.api.collections.Tags();v.fetch({data:{per_page:100},success:function(y){_.each(w,function(z){x=new wp.api.models.Tag(y.findWhere({slug:z}));x.set("parent_post",u.get("id"));t.push(x)});w=new wp.api.collections.Tags(t);u.setTagsWithCollection(w)}})}else{this.setTagsWithCollection(w)}},setTagsWithCollection:function(t){this.set("tags",t.pluck("id"));return this.save()}},i={getCategories:function(){var u=this.get("categories"),t=new wp.api.collections.Categories();if(_.isEmpty(u)){return jQuery.Deferred().resolve([])}return t.fetch({data:{include:u}})},setCategories:function(u){var v,x,t=this,w=[];if(_.isString(u)){return false}if(_.isArray(u)){v=new wp.api.collections.Categories();v.fetch({data:{per_page:100},success:function(y){_.each(u,function(z){x=new wp.api.models.Category(y.findWhere({slug:z}));x.set("parent_post",t.get("id"));w.push(x)});u=new wp.api.collections.Categories(w);t.setCategoriesWithCollection(u)}})}else{this.setCategoriesWithCollection(u)}},setCategoriesWithCollection:function(t){this.set("categories",t.pluck("id"));return this.save()}},k={getAuthorUser:function(){return m(this,this.get("author"),"User","author","name")}},h={getFeaturedMedia:function(){return m(this,this.get("featured_media"),"Media","wp:featuredmedia","source_url")}};if(_.isUndefined(j.prototype.args)){return j}_.each(p,function(t){if(!_.isUndefined(j.prototype.args[t])){q=true}});if(q){j=j.extend(o)}if(!_.isUndefined(j.prototype.args.author)){j=j.extend(k)}if(!_.isUndefined(j.prototype.args.featured_media)){j=j.extend(h)}if(!_.isUndefined(j.prototype.args.categories)){j=j.extend(i)}if(!_.isUndefined(g.collections[e+"Meta"])){j=j.extend(l)}if(!_.isUndefined(j.prototype.args.tags)){j=j.extend(r)}if(!_.isUndefined(g.collections[e+"Revisions"])){j=j.extend(f)}return j}})(window);(function(){var a=window.wpApiSettings||{};wp.api.WPApiBaseModel=Backbone.Model.extend({sync:function(e,c,b){var d;b=b||{};if(_.isNull(c.get("date_gmt"))){c.unset("date_gmt")}if(_.isEmpty(c.get("slug"))){c.unset("slug")}if(!_.isUndefined(a.nonce)&&!_.isNull(a.nonce)){d=b.beforeSend;b.beforeSend=function(f){f.setRequestHeader("X-WP-Nonce",a.nonce);if(d){return d.apply(this,arguments)}}}if(this.requireForceForDelete&&"delete"===e){c.url=c.url()+"?force=true"}return Backbone.sync(e,c,b)},save:function(c,b){if(_.includes(this.methods,"PUT")||_.includes(this.methods,"POST")){return Backbone.Model.prototype.save.call(this,c,b)}else{return false}},destroy:function(b){if(_.includes(this.methods,"DELETE")){return Backbone.Model.prototype.destroy.call(this,b)}else{return false}}});wp.api.models.Schema=wp.api.WPApiBaseModel.extend({defaults:{_links:{},namespace:null,routes:{}},initialize:function(b,d){var c=this;d=d||{};wp.api.WPApiBaseModel.prototype.initialize.call(c,b,d);c.apiRoot=d.apiRoot||a.root;c.versionString=d.versionString||a.versionString},url:function(){return this.apiRoot+this.versionString}})})();(function(){var a=window.wpApiSettings||{};wp.api.WPApiBaseCollection=Backbone.Collection.extend({initialize:function(c,b){this.state={data:{},currentPage:null,totalPages:null,totalObjects:null};if(_.isUndefined(b)){this.parent=""}else{this.parent=b.parent}},sync:function(g,d,c){var e,f,b=this;c=c||{};e=c.beforeSend;if("undefined"!==typeof a.nonce){c.beforeSend=function(h){h.setRequestHeader("X-WP-Nonce",a.nonce);if(e){return e.apply(b,arguments)}}}if("read"===g){if(c.data){b.state.data=_.clone(c.data);delete b.state.data.page}else{b.state.data=c.data={}}if("undefined"===typeof c.data.page){b.state.currentPage=null;b.state.totalPages=null;b.state.totalObjects=null}else{b.state.currentPage=c.data.page-1}f=c.success;c.success=function(i,j,h){if(!_.isUndefined(h)){b.state.totalPages=parseInt(h.getResponseHeader("x-wp-totalpages"),10);b.state.totalObjects=parseInt(h.getResponseHeader("x-wp-total"),10)}if(null===b.state.currentPage){b.state.currentPage=1}else{b.state.currentPage++}if(f){return f.apply(this,arguments)}}}return Backbone.sync(g,d,c)},more:function(b){b=b||{};b.data=b.data||{};_.extend(b.data,this.state.data);if("undefined"===typeof b.data.page){if(!this.hasMore()){return false}if(null===this.state.currentPage||this.state.currentPage<=1){b.data.page=2}else{b.data.page=this.state.currentPage+1}}return this.fetch(b)},hasMore:function(){if(null===this.state.totalPages||null===this.state.totalObjects||null===this.state.currentPage){return null}else{return(this.state.currentPage<this.state.totalPages)}}})})();(function(){var c,a={},b=window.wpApiSettings||{};window.wp=window.wp||{};wp.api=wp.api||{};if(_.isEmpty(b)){b.root=window.location.origin+"/wp-json/"}c=Backbone.Model.extend({defaults:{apiRoot:b.root,versionString:wp.api.versionString,schema:null,models:{},collections:{}},initialize:function(){var e=this,d;Backbone.Model.prototype.initialize.apply(e,arguments);d=jQuery.Deferred();e.schemaConstructed=d.promise();e.schemaModel=new wp.api.models.Schema(null,{apiRoot:e.get("apiRoot"),versionString:e.get("versionString")});e.schemaModel.once("change",function(){e.constructFromSchema();d.resolve(e)});if(e.get("schema")){e.schemaModel.set(e.schemaModel.parse(e.get("schema")))}else{if(!_.isUndefined(sessionStorage)&&(_.isUndefined(b.cacheSchema)||b.cacheSchema)&&sessionStorage.getItem("wp-api-schema-model"+e.get("apiRoot")+e.get("versionString"))){e.schemaModel.set(e.schemaModel.parse(JSON.parse(sessionStorage.getItem("wp-api-schema-model"+e.get("apiRoot")+e.get("versionString")))))}else{e.schemaModel.fetch({success:function(g){if(!_.isUndefined(sessionStorage)&&(_.isUndefined(b.cacheSchema)||b.cacheSchema)){try{sessionStorage.setItem("wp-api-schema-model"+e.get("apiRoot")+e.get("versionString"),JSON.stringify(g))}catch(f){}}},error:function(f){window.console.log(f)}})}}},constructFromSchema:function(){var e=this,g,d,i,h,f=b.mapping||{models:{Categories:"Category",Comments:"Comment",Pages:"Page",PagesMeta:"PageMeta",PagesRevisions:"PageRevision",Posts:"Post",PostsCategories:"PostCategory",PostsRevisions:"PostRevision",PostsTags:"PostTag",Schema:"Schema",Statuses:"Status",Tags:"Tag",Taxonomies:"Taxonomy",Types:"Type",Users:"User"},collections:{PagesMeta:"PageMeta",PagesRevisions:"PageRevisions",PostsCategories:"PostCategories",PostsMeta:"PostMeta",PostsRevisions:"PostRevisions",PostsTags:"PostTags"}};g=[];d=[];i=e.get("apiRoot").replace(wp.api.utils.getRootUrl(),"");h={};h.models={};h.collections={};_.each(e.schemaModel.get("routes"),function(j,k){if(k!==e.get(" versionString")&&k!==i&&k!==("/"+e.get("versionString").slice(0,-1))){if(/(?:.*[+)]|\/me)$/.test(k)){g.push({index:k,route:j})}else{d.push({index:k,route:j})}}});_.each(g,function(n){var m,j=wp.api.utils.extractRoutePart(n.index,2,e.get("versionString"),true),l=wp.api.utils.extractRoutePart(n.index,1,e.get("versionString"),false),k=wp.api.utils.extractRoutePart(n.index,1,e.get("versionString"),true);if(l===e.get("versionString")){l=""}if("me"===k){j="me"}if(""!==l&&l!==j){m=wp.api.utils.capitalizeAndCamelCaseDashes(l)+wp.api.utils.capitalizeAndCamelCaseDashes(j);m=f.models[m]||m;h.models[m]=wp.api.WPApiBaseModel.extend({url:function(){var o=e.get("apiRoot")+e.get("versionString")+l+"/"+((_.isUndefined(this.get("parent"))||0===this.get("parent"))?(_.isUndefined(this.get("parent_post"))?"":this.get("parent_post")+"/"):this.get("parent")+"/")+j;if(!_.isUndefined(this.get("id"))){o+="/"+this.get("id")}return o},route:n,name:m,methods:n.route.methods,initialize:function(o,p){wp.api.WPApiBaseModel.prototype.initialize.call(this,o,p);if("Posts"!==this.name&&"Pages"!==this.name&&_.includes(this.methods,"DELETE")){this.requireForceForDelete=true}}})}else{m=wp.api.utils.capitalizeAndCamelCaseDashes(j);m=f.models[m]||m;h.models[m]=wp.api.WPApiBaseModel.extend({url:function(){var o=e.get("apiRoot")+e.get("versionString")+(("me"===j)?"users/me":j);if(!_.isUndefined(this.get("id"))){o+="/"+this.get("id")}return o},route:n,name:m,methods:n.route.methods})}wp.api.utils.decorateFromRoute(n.route.endpoints,h.models[m],e.get("versionString"))});_.each(d,function(n){var k,m,j=n.index.slice(n.index.lastIndexOf("/")+1),l=wp.api.utils.extractRoutePart(n.index,1,e.get("versionString"),false);if(""!==l&&l!==j&&e.get("versionString")!==l){k=wp.api.utils.capitalizeAndCamelCaseDashes(l)+wp.api.utils.capitalizeAndCamelCaseDashes(j);m=f.models[k]||k;k=f.collections[k]||k;h.collections[k]=wp.api.WPApiBaseCollection.extend({url:function(){return e.get("apiRoot")+e.get("versionString")+l+"/"+this.parent+"/"+j},model:function(p,o){return new h.models[m](p,o)},name:k,route:n,methods:n.route.methods})}else{k=wp.api.utils.capitalizeAndCamelCaseDashes(j);m=f.models[k]||k;k=f.collections[k]||k;h.collections[k]=wp.api.WPApiBaseCollection.extend({url:function(){return e.get("apiRoot")+e.get("versionString")+j},model:function(p,o){return new h.models[m](p,o)},name:k,route:n,methods:n.route.methods})}wp.api.utils.decorateFromRoute(n.route.endpoints,h.collections[k])});_.each(h.models,function(k,j){h.models[j]=wp.api.utils.addMixinsAndHelpers(k,j,h)});e.set("models",h.models);e.set("collections",h.collections)}});wp.api.endpoints=new Backbone.Collection();wp.api.init=function(f){var h,e={},d,g;f=f||{};e.apiRoot=f.apiRoot||b.root||"/wp-json";e.versionString=f.versionString||b.versionString||"wp/v2/";e.schema=f.schema||null;if(!e.schema&&e.apiRoot===b.root&&e.versionString===b.versionString){e.schema=b.schema}if(!a[e.apiRoot+e.versionString]){h=wp.api.endpoints.findWhere({apiRoot:e.apiRoot,versionString:e.versionString});if(!h){h=new c(e)}d=jQuery.Deferred();g=d.promise();h.schemaConstructed.done(function(i){wp.api.endpoints.add(i);wp.api.models=_.extend(wp.api.models,i.get("models"));wp.api.collections=_.extend(wp.api.collections,i.get("collections"));d.resolve(i)});a[e.apiRoot+e.versionString]=g}return a[e.apiRoot+e.versionString]};wp.api.loadPromise=wp.api.init()})();