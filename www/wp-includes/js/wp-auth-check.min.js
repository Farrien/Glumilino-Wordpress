(function(e){var d,c;function a(){var i=e("#wp-auth-check"),j=e("#wp-auth-check-form"),g=d.find(".wp-auth-fallback-expired"),k,h=false;if(j.length){e(window).on("beforeunload.wp-auth-check",function(l){l.originalEvent.returnValue=window.authcheckL10n.beforeunload});k=e('<iframe id="wp-auth-check-frame" frameborder="0">').attr("title",g.text());k.on("load",function(){var m,l;h=true;j.removeClass("loading");try{l=e(this).contents().find("body");m=l.height()}catch(n){d.addClass("fallback");i.css("max-height","");j.remove();g.focus();return}if(m){if(l&&l.hasClass("interim-login-success")){b()}else{i.css("max-height",m+40+"px")}}else{if(!l||!l.length){d.addClass("fallback");i.css("max-height","");j.remove();g.focus()}}}).attr("src",j.data("src"));j.append(k)}e("body").addClass("modal-open");d.removeClass("hidden");if(k){k.focus();setTimeout(function(){if(!h){d.addClass("fallback");j.remove();g.focus()}},10000)}else{g.focus()}}function b(){e(window).off("beforeunload.wp-auth-check");if(typeof adminpage!=="undefined"&&(adminpage==="post-php"||adminpage==="post-new-php")&&typeof wp!=="undefined"&&wp.heartbeat){e(document).off("heartbeat-tick.wp-auth-check");wp.heartbeat.connectNow()}d.fadeOut(200,function(){d.addClass("hidden").css("display","");e("#wp-auth-check-frame").remove();e("body").removeClass("modal-open")})}function f(){var g=parseInt(window.authcheckL10n.interval,10)||180;c=(new Date()).getTime()+(g*1000)}e(document).on("heartbeat-tick.wp-auth-check",function(h,g){if("wp-auth-check" in g){f();if(!g["wp-auth-check"]&&d.hasClass("hidden")){a()}else{if(g["wp-auth-check"]&&!d.hasClass("hidden")){b()}}}}).on("heartbeat-send.wp-auth-check",function(h,g){if((new Date()).getTime()>c){g["wp-auth-check"]=true}}).ready(function(){f();d=e("#wp-auth-check-wrap");d.find(".wp-auth-check-close").on("click",function(){b()})})}(jQuery));