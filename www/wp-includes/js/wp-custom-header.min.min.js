(function(m,n){var h,l;m.wp=m.wp||{};if(!("addEventListener" in m)){return}function i(a,b){var c;if("function"===typeof m.Event){c=new Event(b)}else{c=document.createEvent("Event");c.initEvent(b,true,true)}a.dispatchEvent(c)}function j(){this.handlers={nativeVideo:new h(),youtube:new l()}}j.prototype={initialize:function(){if(this.supportsVideo()){for(var a in this.handlers){var b=this.handlers[a];if("test" in b&&b.test(n)){this.activeHandler=b.initialize.call(b,n);i(document,"wp-custom-header-video-loaded");break}}}},supportsVideo:function(){if(m.innerWidth<n.minWidth||m.innerHeight<n.minHeight){return false}return true},BaseVideoHandler:k};function k(){}k.prototype={initialize:function(a){var b=this,c=document.createElement("button");this.settings=a;this.container=document.getElementById("wp-custom-header");this.button=c;c.setAttribute("type","button");c.setAttribute("id","wp-custom-header-video-button");c.setAttribute("class","wp-custom-header-video-button wp-custom-header-video-play");c.innerHTML=a.l10n.play;c.addEventListener("click",function(){if(b.isPaused()){b.play()}else{b.pause()}});this.container.addEventListener("play",function(){c.className="wp-custom-header-video-button wp-custom-header-video-play";c.innerHTML=a.l10n.pause;if("a11y" in m.wp){m.wp.a11y.speak(a.l10n.playSpeak)}});this.container.addEventListener("pause",function(){c.className="wp-custom-header-video-button wp-custom-header-video-pause";c.innerHTML=a.l10n.play;if("a11y" in m.wp){m.wp.a11y.speak(a.l10n.pauseSpeak)}});this.ready()},ready:function(){},isPaused:function(){},pause:function(){},play:function(){},setVideo:function(b){var c,a=this.container.getElementsByClassName("customize-partial-edit-shortcut");if(a.length){c=this.container.removeChild(a[0])}this.container.innerHTML="";this.container.appendChild(b);if(c){this.container.appendChild(c)}},showControls:function(){if(!this.container.contains(this.button)){this.container.appendChild(this.button)}},test:function(){return false},trigger:function(a){i(this.container,a)}};k.extend=function(c){var a;function b(){var d=k.apply(this,arguments);return d}b.prototype=Object.create(k.prototype);b.prototype.constructor=b;for(a in c){b.prototype[a]=c[a]}return b};h=k.extend({test:function(b){var a=document.createElement("video");return a.canPlayType(b.mimeType)},ready:function(){var b=this,a=document.createElement("video");a.id="wp-custom-header-video";a.autoplay="autoplay";a.loop="loop";a.muted="muted";a.width=this.settings.width;a.height=this.settings.height;a.addEventListener("play",function(){b.trigger("play")});a.addEventListener("pause",function(){b.trigger("pause")});a.addEventListener("canplay",function(){b.showControls()});this.video=a;b.setVideo(a);a.src=this.settings.videoUrl},isPaused:function(){return this.video.paused},pause:function(){this.video.pause()},play:function(){this.video.play()}});l=k.extend({test:function(a){return"video/x-youtube"===a.mimeType},ready:function(){var a=this;if("YT" in m){YT.ready(a.loadVideo.bind(a))}else{var b=document.createElement("script");b.src="https://www.youtube.com/iframe_api";b.onload=function(){YT.ready(a.loadVideo.bind(a))};document.getElementsByTagName("head")[0].appendChild(b)}},loadVideo:function(){var b=this,a=document.createElement("div"),c=/^.*(?:(?:youtu\.be\/|v\/|vi\/|u\/\w\/|embed\/)|(?:(?:watch)?\?v(?:i)?=|\&v(?:i)?=))([^#\&\?]*).*/;a.id="wp-custom-header-video";b.setVideo(a);b.player=new YT.Player(a,{height:this.settings.height,width:this.settings.width,videoId:this.settings.videoUrl.match(c)[1],events:{onReady:function(d){d.target.mute();b.showControls()},onStateChange:function(d){if(YT.PlayerState.PLAYING===d.data){b.trigger("play")}else{if(YT.PlayerState.PAUSED===d.data){b.trigger("pause")}else{if(YT.PlayerState.ENDED===d.data){d.target.playVideo()}}}}},playerVars:{autoplay:1,controls:0,disablekb:1,fs:0,iv_load_policy:3,loop:1,modestbranding:1,playsinline:1,rel:0,showinfo:0}})},isPaused:function(){return YT.PlayerState.PAUSED===this.player.getPlayerState()},pause:function(){this.player.pauseVideo()},play:function(){this.player.playVideo()}});m.wp.customHeader=new j();document.addEventListener("DOMContentLoaded",m.wp.customHeader.initialize.bind(m.wp.customHeader),false);if("customize" in m.wp){m.wp.customize.selectiveRefresh.bind("render-partials-response",function(a){if("custom_header_settings" in a){n=a.custom_header_settings}});m.wp.customize.selectiveRefresh.bind("partial-content-rendered",function(a){if("custom_header"===a.partial.id){m.wp.customHeader.initialize()}})}})(window,window._wpCustomHeaderSettings||{});