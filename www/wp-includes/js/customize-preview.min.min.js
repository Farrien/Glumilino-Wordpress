(function(t,r){var p=wp.customize,m,s={};(function(a){var b;if(!a.replaceState){return}b=function(e){var f,c,d;f=document.createElement("a");f.href=e;c=p.utils.parseQueryString(location.search.substr(1));d=p.utils.parseQueryString(f.search.substr(1));d.customize_changeset_uuid=c.customize_changeset_uuid;if(c.customize_theme){d.customize_theme=c.customize_theme}if(c.customize_messenger_channel){d.customize_messenger_channel=c.customize_messenger_channel}f.search=r.param(d);return f.href};a.replaceState=(function(d){return function c(f,e,g){s=f;return d.call(a,f,e,"string"===typeof g&&g.length>0?b(g):g)}})(a.replaceState);a.pushState=(function(c){return function d(f,e,g){s=f;return c.call(a,f,e,"string"===typeof g&&g.length>0?b(g):g)}})(a.pushState);window.addEventListener("popstate",function(c){s=c.state})}(history));m=function(d,b,a){var c;return function(){var e=arguments;a=a||this;clearTimeout(c);c=setTimeout(function(){c=null;d.apply(a,e)},b)}};p.Preview=p.Messenger.extend({initialize:function(c,a){var d=this,b=document.createElement("a");p.Messenger.prototype.initialize.call(d,c,a);b.href=d.origin();d.add("scheme",b.protocol.replace(/:$/,""));d.body=r(document.body);d.window=r(window);if(p.settings.channel){d.body.on("click.preview","a",function(e){d.handleLinkClick(e)});d.body.on("submit.preview","form",function(e){d.handleFormSubmit(e)});d.window.on("scroll.preview",m(function(){d.send("scroll",d.window.scrollTop())},200));d.bind("scroll",function(e){d.window.scrollTop(e)})}},handleLinkClick:function(a){var c=this,b,d;b=r(a.target).closest("a");if(_.isUndefined(b.attr("href"))){return}d=("#"===b.attr("href").substr(0,1));if(d||!/^https?:$/.test(b.prop("protocol"))){return}if(!p.isLinkPreviewable(b[0])){wp.a11y.speak(p.settings.l10n.linkUnpreviewable);a.preventDefault();return}a.preventDefault();if(a.shiftKey){return}c.send("url",b.prop("href"))},handleFormSubmit:function(d){var c=this,b,a;b=document.createElement("a");a=r(d.target);b.href=a.prop("action");if("GET"!==a.prop("method").toUpperCase()||!p.isLinkPreviewable(b)){wp.a11y.speak(p.settings.l10n.formUnpreviewable);d.preventDefault();return}if(!d.isDefaultPrevented()){if(b.search.length>1){b.search+="&"}b.search+=a.serialize();c.send("url",b.href)}d.preventDefault()}});p.addLinkPreviewing=function q(){var a="a[href], area";r(document.body).find(a).each(function(){p.prepareLinkPreview(this)});if("undefined"!==typeof MutationObserver){p.mutationObserver=new MutationObserver(function(b){_.each(b,function(c){r(c.target).find(a).each(function(){p.prepareLinkPreview(this)})})});p.mutationObserver.observe(document.documentElement,{childList:true,subtree:true})}else{r(document.documentElement).on("click focus mouseover",a,function(){p.prepareLinkPreview(this)})}};p.isLinkPreviewable=function l(e,f){var c,d,a,b;a=_.extend({},{allowAdminAjax:false},f||{});if("javascript:"===e.protocol){return true}if("https:"!==e.protocol&&"http:"!==e.protocol){return false}b=e.host.replace(/:(80|443)$/,"");d=document.createElement("a");c=!_.isUndefined(_.find(p.settings.url.allowed,function(g){d.href=g;return d.protocol===e.protocol&&d.host.replace(/:(80|443)$/,"")===b&&0===e.pathname.indexOf(d.pathname.replace(/\/$/,""))}));if(!c){return false}if(/\/wp-(login|signup)\.php$/.test(e.pathname)){return false}if(/\/wp-admin\/admin-ajax\.php$/.test(e.pathname)){return a.allowAdminAjax}if(/\/wp-(admin|includes|content)(\/|$)/.test(e.pathname)){return false}return true};p.prepareLinkPreview=function u(b){var a;if(r(b).closest("#wpadminbar").length){return}if("#"===r(b).attr("href").substr(0,1)||!/^https?:$/.test(b.protocol)){return}if(p.settings.channel&&"https"===p.preview.scheme.get()&&"http:"===b.protocol&&-1!==p.settings.url.allowedHosts.indexOf(b.host)){b.protocol="https:"}if(!p.isLinkPreviewable(b)){if(p.settings.channel){r(b).addClass("customize-unpreviewable")}return}r(b).removeClass("customize-unpreviewable");a=p.utils.parseQueryString(b.search.substring(1));a.customize_changeset_uuid=p.settings.changeset.uuid;if(!p.settings.theme.active){a.customize_theme=p.settings.theme.stylesheet}if(p.settings.channel){a.customize_messenger_channel=p.settings.channel}b.search=r.param(a);if(p.settings.channel){b.target="_self"}};p.addRequestPreviewing=function v(){var a=function(g,c,d){var h,f,e,b={};h=document.createElement("a");h.href=g.url;if(!p.isLinkPreviewable(h,{allowAdminAjax:true})){return}f=p.utils.parseQueryString(h.search.substring(1));p.each(function(i){if(i._dirty){b[i.id]=i.get()}});if(!_.isEmpty(b)){e=g.type.toUpperCase();if("POST"!==e){d.setRequestHeader("X-HTTP-Method-Override",e);f._method=e;g.type="POST"}if(g.data){g.data+="&"}else{g.data=""}g.data+=r.param({customized:JSON.stringify(b)})}f.customize_changeset_uuid=p.settings.changeset.uuid;if(!p.settings.theme.active){f.customize_theme=p.settings.theme.stylesheet}h.search=r.param(f);g.url=h.href};r.ajaxPrefilter(a)};p.addFormPreviewing=function n(){r(document.body).find("form").each(function(){p.prepareFormPreview(this)});if("undefined"!==typeof MutationObserver){p.mutationObserver=new MutationObserver(function(a){_.each(a,function(b){r(b.target).find("form").each(function(){p.prepareFormPreview(this)})})});p.mutationObserver.observe(document.documentElement,{childList:true,subtree:true})}};p.prepareFormPreview=function o(c){var a,b={};if(!c.action){c.action=location.href}a=document.createElement("a");a.href=c.action;if(p.settings.channel&&"https"===p.preview.scheme.get()&&"http:"===a.protocol&&-1!==p.settings.url.allowedHosts.indexOf(a.host)){a.protocol="https:";c.action=a.href}if("GET"!==c.method.toUpperCase()||!p.isLinkPreviewable(a)){if(p.settings.channel){r(c).addClass("customize-unpreviewable")}return}r(c).removeClass("customize-unpreviewable");b.customize_changeset_uuid=p.settings.changeset.uuid;if(!p.settings.theme.active){b.customize_theme=p.settings.theme.stylesheet}if(p.settings.channel){b.customize_messenger_channel=p.settings.channel}_.each(b,function(d,e){var f=r(c).find('input[name="'+e+'"]');if(f.length){f.val(d)}else{r(c).prepend(r("<input>",{type:"hidden",name:e,value:d}))}});if(p.settings.channel){c.target="_self"}};p.keepAliveCurrentUrl=(function(){var d=location.pathname,e=location.search.substr(1),c=null,b=["customize_theme","customize_changeset_uuid","customize_messenger_channel"];return function a(){var g,f;if(e===location.search.substr(1)&&d===location.pathname){p.preview.send("keep-alive");return}g=document.createElement("a");if(null===c){g.search=e;c=p.utils.parseQueryString(e);_.each(b,function(h){delete c[h]})}g.href=location.href;f=p.utils.parseQueryString(g.search.substr(1));_.each(b,function(h){delete f[h]});if(d!==location.pathname||!_.isEqual(c,f)){g.search=r.param(f);g.hash="";p.settings.url.self=g.href;p.preview.send("ready",{currentUrl:p.settings.url.self,activePanels:p.settings.activePanels,activeSections:p.settings.activeSections,activeControls:p.settings.activeControls,settingValidities:p.settings.settingValidities})}else{p.preview.send("keep-alive")}c=f;e=location.search.substr(1);d=location.pathname}})();p.settingPreviewHandlers={custom_logo:function(a){r("body").toggleClass("wp-custom-logo",!!a)},custom_css:function(a){r("#wp-custom-css").text(a)},background:function(){var b="",a={};_.each(["color","image","preset","position_x","position_y","size","repeat","attachment"],function(c){a[c]=p("background_"+c)});r(document.body).toggleClass("custom-background",!!(a.color()||a.image()));if(a.color()){b+="background-color: "+a.color()+";"}if(a.image()){b+='background-image: url("'+a.image()+'");';b+="background-size: "+a.size()+";";b+="background-position: "+a.position_x()+" "+a.position_y()+";";b+="background-repeat: "+a.repeat()+";";b+="background-attachment: "+a.attachment()+";"}r("#custom-background-css").text("body.custom-background { "+b+" }")}};r(function(){var b,a;p.settings=window._wpCustomizeSettings;if(!p.settings){return}p.preview=new p.Preview({url:window.location.href,channel:p.settings.channel});p.addLinkPreviewing();p.addRequestPreviewing();p.addFormPreviewing();a=function(c,d,e){var f=p(c);if(f){f.set(d)}else{e=e||false;f=p.create(c,d,{id:c});if(e){f._dirty=true}}};p.preview.bind("settings",function(c){r.each(c,a)});p.preview.trigger("settings",p.settings.values);r.each(p.settings._dirty,function(e,c){var d=p(c);if(d){d._dirty=true}});p.preview.bind("setting",function(d){var c=true;a.apply(null,d.concat(c))});p.preview.bind("sync",function(c){if(c.settings&&c["settings-modified-while-loading"]){_.each(_.keys(c.settings),function(d){if(p.has(d)&&!c["settings-modified-while-loading"][d]){delete c.settings[d]}})}r.each(c,function(d,e){p.preview.trigger(d,e)});p.preview.send("synced")});p.preview.bind("active",function(){p.preview.send("nonce",p.settings.nonce);p.preview.send("documentTitle",document.title);p.preview.send("scroll",r(window).scrollTop())});p.preview.bind("saved",function(c){if(c.next_changeset_uuid){p.settings.changeset.uuid=c.next_changeset_uuid;r(document.body).find("a[href], area").each(function(){p.prepareLinkPreview(this)});r(document.body).find("form").each(function(){p.prepareFormPreview(this)});if(history.replaceState){history.replaceState(s,"",location.href)}}p.trigger("saved",c)});p.preview.bind("changeset-saved",function(c){_.each(c.saved_changeset_values,function(e,d){var f=p(d);if(f&&_.isEqual(f.get(),e)){f._dirty=false}})});p.preview.bind("nonce-refresh",function(c){r.extend(p.settings.nonce,c)});p.preview.send("ready",{currentUrl:p.settings.url.self,activePanels:p.settings.activePanels,activeSections:p.settings.activeSections,activeControls:p.settings.activeControls,settingValidities:p.settings.settingValidities});setInterval(p.keepAliveCurrentUrl,p.settings.timeouts.keepAliveSend);p.preview.bind("loading-initiated",function(){r("body").addClass("wp-customizer-unloading")});p.preview.bind("loading-failed",function(){r("body").removeClass("wp-customizer-unloading")});b=r.map(["color","image","preset","position_x","position_y","size","repeat","attachment"],function(c){return"background_"+c});p.when.apply(p,b).done(function(){r.each(arguments,function(){this.bind(p.settingPreviewHandlers.background)})});p("custom_logo",function(c){p.settingPreviewHandlers.custom_logo.call(c,c.get());c.bind(p.settingPreviewHandlers.custom_logo)});p("custom_css["+p.settings.theme.stylesheet+"]",function(c){c.bind(p.settingPreviewHandlers.custom_css)});p.trigger("preview-ready")})})(wp,jQuery);