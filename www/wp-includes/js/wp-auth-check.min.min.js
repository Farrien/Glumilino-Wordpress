(function(j){var k,l;function h(){var c=j("#wp-auth-check"),b=j("#wp-auth-check-form"),e=k.find(".wp-auth-fallback-expired"),a,d=false;if(b.length){j(window).on("beforeunload.wp-auth-check",function(f){f.originalEvent.returnValue=window.authcheckL10n.beforeunload});a=j('<iframe id="wp-auth-check-frame" frameborder="0">').attr("title",e.text());a.on("load",function(){var f,o;d=true;b.removeClass("loading");try{o=j(this).contents().find("body");f=o.height()}catch(p){k.addClass("fallback");c.css("max-height","");b.remove();e.focus();return}if(f){if(o&&o.hasClass("interim-login-success")){g()}else{c.css("max-height",f+40+"px")}}else{if(!o||!o.length){k.addClass("fallback");c.css("max-height","");b.remove();e.focus()}}}).attr("src",b.data("src"));b.append(a)}j("body").addClass("modal-open");k.removeClass("hidden");if(a){a.focus();setTimeout(function(){if(!d){k.addClass("fallback");b.remove();e.focus()}},10000)}else{e.focus()}}function g(){j(window).off("beforeunload.wp-auth-check");if(typeof adminpage!=="undefined"&&(adminpage==="post-php"||adminpage==="post-new-php")&&typeof wp!=="undefined"&&wp.heartbeat){j(document).off("heartbeat-tick.wp-auth-check");wp.heartbeat.connectNow()}k.fadeOut(200,function(){k.addClass("hidden").css("display","");j("#wp-auth-check-frame").remove();j("body").removeClass("modal-open")})}function i(){var a=parseInt(window.authcheckL10n.interval,10)||180;l=(new Date()).getTime()+(a*1000)}j(document).on("heartbeat-tick.wp-auth-check",function(a,b){if("wp-auth-check" in b){i();if(!b["wp-auth-check"]&&k.hasClass("hidden")){h()}else{if(b["wp-auth-check"]&&!k.hasClass("hidden")){g()}}}}).on("heartbeat-send.wp-auth-check",function(a,b){if((new Date()).getTime()>l){b["wp-auth-check"]=true}}).ready(function(){i();k=j("#wp-auth-check-wrap");k.find(".wp-auth-check-close").on("click",function(){g()})})}(jQuery));