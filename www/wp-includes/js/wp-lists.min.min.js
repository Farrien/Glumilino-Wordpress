(function(e){var d={add:"ajaxAdd",del:"ajaxDel",dim:"ajaxDim",process:"process",recolor:"recolor"},f;f={settings:{url:ajaxurl,type:"POST",response:"ajax-response",what:"",alt:"alternate",altOffset:0,addColor:"#ffff33",delColor:"#faafaa",dimAddColor:"#ffff33",dimDelColor:"#ff3333",confirm:null,addBefore:null,addAfter:null,delBefore:null,delAfter:null,dimBefore:null,dimAfter:null},nonce:function(b,a){var c=wpAjax.unserialize(b.attr("href")),h=e("#"+a.element);return a.nonce||c._ajax_nonce||h.find('input[name="_ajax_nonce"]').val()||c._wpnonce||h.find('input[name="_wpnonce"]').val()||0},parseData:function(c,b){var a=[],i;try{i=e(c).data("wp-lists")||"";i=i.match(new RegExp(b+":[\\S]+"));if(i){a=i[0].split(":")}}catch(j){}return a},pre:function(b,j,c){var l,k,a;j=e.extend({},this.wpList.settings,{element:null,nonce:0,target:b.get(0)},j||{});if(e.isFunction(j.confirm)){l=e("#"+j.element);if("add"!==c){k=l.css("backgroundColor");l.css("backgroundColor","#ff9966")}a=j.confirm.call(this,b,j,c,k);if("add"!==c){l.css("backgroundColor",k)}if(!a){return false}}return j},ajaxAdd:function(n,p){var b=this,a=e(n),o=f.parseData(a,"add"),c,r,m,q;p=p||{};p=f.pre.call(b,a,p,"add");p.element=o[2]||a.prop("id")||p.element||null;p.addColor=o[3]?"#"+o[3]:p.addColor;if(!p){return false}if(!a.is('[id="'+p.element+'-submit"]')){return !f.add.call(b,a,p)}if(!p.element){return true}p.action="add-"+p.what;p.nonce=f.nonce(a,p);if(!wpAjax.validateForm("#"+p.element)){return false}p.data=e.param(e.extend({_ajax_nonce:p.nonce,action:p.action},wpAjax.unserialize(o[4]||"")));c=e("#"+p.element+" :input").not('[name="_ajax_nonce"], [name="_wpnonce"], [name="action"]');r=e.isFunction(c.fieldSerialize)?c.fieldSerialize():c.serialize();if(r){p.data+="&"+r}if(e.isFunction(p.addBefore)){p=p.addBefore(p);if(!p){return true}}if(!p.data.match(/_ajax_nonce=[a-f0-9]+/)){return true}p.success=function(g){m=wpAjax.parseAjaxResponse(g,p.response,p.element);q=g;if(!m||m.errors){return false}if(true===m){return true}e.each(m.responses,function(){f.add.call(b,this.data,e.extend({},p,{position:this.position||0,id:this.id||0,oldId:this.oldId||null}))});b.wpList.recolor();e(b).trigger("wpListAddEnd",[p,b.wpList]);f.clear.call(b,"#"+p.element)};p.complete=function(h,g){if(e.isFunction(p.addAfter)){p.addAfter(q,e.extend({xml:h,status:g,parsed:m},p))}};e.ajax(p);return false},ajaxDel:function(n,m){var b=this,p=e(n),c=f.parseData(p,"delete"),o,l,a;m=m||{};m=f.pre.call(b,p,m,"delete");m.element=c[2]||m.element||null;m.delColor=c[3]?"#"+c[3]:m.delColor;if(!m||!m.element){return false}m.action="delete-"+m.what;m.nonce=f.nonce(p,m);m.data=e.extend({_ajax_nonce:m.nonce,action:m.action,id:m.element.split("-").pop()},wpAjax.unserialize(c[4]||""));if(e.isFunction(m.delBefore)){m=m.delBefore(m,b);if(!m){return true}}if(!m.data._ajax_nonce){return true}o=e("#"+m.element);if("none"!==m.delColor){o.css("backgroundColor",m.delColor).fadeOut(350,function(){b.wpList.recolor();e(b).trigger("wpListDelEnd",[m,b.wpList])})}else{b.wpList.recolor();e(b).trigger("wpListDelEnd",[m,b.wpList])}m.success=function(g){l=wpAjax.parseAjaxResponse(g,m.response,m.element);a=g;if(!l||l.errors){o.stop().stop().css("backgroundColor","#faa").show().queue(function(){b.wpList.recolor();e(this).dequeue()});return false}};m.complete=function(g,h){if(e.isFunction(m.delAfter)){o.queue(function(){m.delAfter(a,e.extend({xml:g,status:h,parsed:l},m))}).dequeue()}};e.ajax(m);return false},ajaxDim:function(q,t){var o=this,a=e(q),r=f.parseData(a,"dim"),c,v,s,b,p,u;if("none"===a.parent().css("display")){return false}t=t||{};t=f.pre.call(o,a,t,"dim");t.element=r[2]||t.element||null;t.dimClass=r[3]||t.dimClass||null;t.dimAddColor=r[4]?"#"+r[4]:t.dimAddColor;t.dimDelColor=r[5]?"#"+r[5]:t.dimDelColor;if(!t||!t.element||!t.dimClass){return true}t.action="dim-"+t.what;t.nonce=f.nonce(a,t);t.data=e.extend({_ajax_nonce:t.nonce,action:t.action,id:t.element.split("-").pop(),dimClass:t.dimClass},wpAjax.unserialize(r[6]||""));if(e.isFunction(t.dimBefore)){t=t.dimBefore(t);if(!t){return true}}c=e("#"+t.element);v=c.toggleClass(t.dimClass).is("."+t.dimClass);s=f.getColor(c);b=v?t.dimAddColor:t.dimDelColor;c.toggleClass(t.dimClass);if("none"!==b){c.animate({backgroundColor:b},"fast").queue(function(){c.toggleClass(t.dimClass);e(this).dequeue()}).animate({backgroundColor:s},{complete:function(){e(this).css("backgroundColor","");e(o).trigger("wpListDimEnd",[t,o.wpList])}})}else{e(o).trigger("wpListDimEnd",[t,o.wpList])}if(!t.data._ajax_nonce){return true}t.success=function(i){p=wpAjax.parseAjaxResponse(i,t.response,t.element);u=i;if(true===p){return true}if(!p||p.errors){c.stop().stop().css("backgroundColor","#ff3333")[v?"removeClass":"addClass"](t.dimClass).show().queue(function(){o.wpList.recolor();e(this).dequeue()});return false}if("undefined"!==typeof p.responses[0].supplemental.comment_link){var h=a.find(".submitted-on"),g=h.find("a");if(""!==p.responses[0].supplemental.comment_link){h.html(e("<a></a>").text(h.text()).prop("href",p.responses[0].supplemental.comment_link))}else{if(g.length){h.text(g.text())}}}};t.complete=function(g,h){if(e.isFunction(t.dimAfter)){c.queue(function(){t.dimAfter(u,e.extend({xml:g,status:h,parsed:p},t))}).dequeue()}};e.ajax(t);return false},getColor:function(a){return e(a).css("backgroundColor")||"#ffffff"},add:function(b,a){var c=e(this),k=e(b),l=false,m,n;if("string"===typeof a){a={what:a}}a=e.extend({position:0,id:0,oldId:null},this.wpList.settings,a);if(!k.length||!a.what){return false}if(a.oldId){l=e("#"+a.what+"-"+a.oldId)}if(a.id&&(a.id!==a.oldId||!l||!l.length)){e("#"+a.what+"-"+a.id).remove()}if(l&&l.length){l.before(k);l.remove()}else{if(isNaN(a.position)){m="after";if("-"===a.position.substr(0,1)){a.position=a.position.substr(1);m="before"}n=c.find("#"+a.position);if(1===n.length){n[m](k)}else{c.append(k)}}else{if("comment"!==a.what||0===e("#"+a.element).length){if(a.position<0){c.prepend(k)}else{c.append(k)}}}}if(a.alt){k.toggleClass(a.alt,(c.children(":visible").index(k[0])+a.altOffset)%2)}if("none"!==a.addColor){k.css("backgroundColor",a.addColor).animate({backgroundColor:f.getColor(k)},{complete:function(){e(this).css("backgroundColor","")}})}c.each(function(h,g){g.wpList.process(k)});return k},clear:function(i){var a=this,j=e(i),b,c;if(a.wpList&&j.parents("#"+a.id).length){return}j.find(":input").each(function(g,h){if(e(h).parents(".form-no-clear").length){return}b=h.type.toLowerCase();c=h.tagName.toLowerCase();if("text"===b||"password"===b||"textarea"===c){h.value=""}else{if("checkbox"===b||"radio"===b){h.checked=false}else{if("select"===c){h.selectedIndex=null}}}})},process:function(b){var a=this,c=e(b||document);c.on("submit",'form[data-wp-lists^="add:'+a.id+':"]',function(){return a.wpList.add(this)});c.on("click",'a[data-wp-lists^="add:'+a.id+':"], input[data-wp-lists^="add:'+a.id+':"]',function(){return a.wpList.add(this)});c.on("click",'[data-wp-lists^="delete:'+a.id+':"]',function(){return a.wpList.del(this)});c.on("click",'[data-wp-lists^="dim:'+a.id+':"]',function(){return a.wpList.dim(this)})},recolor:function(){var b=this,a=[":even",":odd"],c;if(!b.wpList.settings.alt){return}c=e(".list-item:visible",b);if(!c.length){c=e(b).children(":visible")}if(b.wpList.settings.altOffset%2){a.reverse()}c.filter(a[0]).addClass(b.wpList.settings.alt).end();c.filter(a[1]).removeClass(b.wpList.settings.alt)},init:function(){var a=this;a.wpList.process=function(b){a.each(function(){this.wpList.process(b)})};a.wpList.recolor=function(){a.each(function(){this.wpList.recolor()})}}};e.fn.wpList=function(a){this.each(function(c,b){b.wpList={settings:e.extend({},f.settings,{what:f.parseData(b,"list")[1]||""},a)};e.each(d,function(j,i){b.wpList[j]=function(h,g){return f[i].call(b,h,g)}})});f.init.call(this);this.wpList.process();return this}})(jQuery);