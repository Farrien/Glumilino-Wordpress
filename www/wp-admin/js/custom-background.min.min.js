(function(b){b(document).ready(function(){var d,a=b("#custom-background-image");b("#background-color").wpColorPicker({change:function(f,c){a.css("background-color",c.color.toString())},clear:function(){a.css("background-color","")}});b('select[name="background-size"]').change(function(){a.css("background-size",b(this).val())});b('input[name="background-position"]').change(function(){a.css("background-position",b(this).val())});b('input[name="background-repeat"]').change(function(){a.css("background-repeat",b(this).is(":checked")?"repeat":"no-repeat")});b('input[name="background-attachment"]').change(function(){a.css("background-attachment",b(this).is(":checked")?"scroll":"fixed")});b("#choose-from-library-link").click(function(c){var f=b(this);c.preventDefault();if(d){d.open();return}d=wp.media.frames.customBackground=wp.media({title:f.data("choose"),library:{type:"image"},button:{text:f.data("update"),close:false}});d.on("select",function(){var e=d.state().get("selection").first();b.post(ajaxurl,{action:"set-background-image",attachment_id:e.id,size:"full"}).done(function(){window.location.reload()})});d.open()})})})(jQuery);