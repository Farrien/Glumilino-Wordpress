window.wp=window.wp||{};var inlineEditPost;(function(b,a){inlineEditPost={init:function(){var d=this,e=b("#inline-edit"),c=b("#bulk-edit");d.type=b("table.widefat").hasClass("pages")?"page":"post";d.what="#post-";e.keyup(function(f){if(f.which===27){return inlineEditPost.revert()}});c.keyup(function(f){if(f.which===27){return inlineEditPost.revert()}});b(".cancel",e).click(function(){return inlineEditPost.revert()});b(".save",e).click(function(){return inlineEditPost.save(this)});b("td",e).keydown(function(f){if(f.which===13&&!b(f.target).hasClass("cancel")){return inlineEditPost.save(this)}});b(".cancel",c).click(function(){return inlineEditPost.revert()});b('#inline-edit .inline-edit-private input[value="private"]').click(function(){var f=b("input.inline-edit-password-input");if(b(this).prop("checked")){f.val("").prop("disabled",true)}else{f.prop("disabled",false)}});b("#the-list").on("click","a.editinline",function(f){f.preventDefault();inlineEditPost.edit(this)});b("#bulk-edit").find("fieldset:first").after(b("#inline-edit fieldset.inline-edit-categories").clone()).siblings("fieldset:last").prepend(b("#inline-edit label.inline-edit-tags").clone());b('select[name="_status"] option[value="future"]',c).remove();b("#doaction, #doaction2").click(function(f){var g;d.whichBulkButtonId=b(this).attr("id");g=d.whichBulkButtonId.substr(2);if("edit"===b('select[name="'+g+'"]').val()){f.preventDefault();d.setBulk()}else{if(b("form#posts-filter tr.inline-editor").length>0){d.revert()}}})},toggle:function(d){var c=this;b(c.what+c.getId(d)).css("display")==="none"?c.revert():c.edit(d)},setBulk:function(){var e="",d=this.type,f=true;this.revert();b("#bulk-edit td").attr("colspan",b("th:visible, td:visible",".widefat:first thead").length);b("table.widefat tbody").prepend(b("#bulk-edit")).prepend('<tr class="hidden"></tr>');b("#bulk-edit").addClass("inline-editor").show();b('tbody th.check-column input[type="checkbox"]').each(function(){if(b(this).prop("checked")){f=false;var g=b(this).val(),c;c=b("#inline_"+g+" .post_title").html()||inlineEditL10n.notitle;e+='<div id="ttle'+g+'"><a id="_'+g+'" class="ntdelbutton" title="'+inlineEditL10n.ntdeltitle+'">X</a>'+c+"</div>"}});if(f){return this.revert()}b("#bulk-titles").html(e);b("#bulk-titles a").click(function(){var c=b(this).attr("id").substr(1);b('table.widefat input[value="'+c+'"]').prop("checked",false);b("#ttle"+c).remove()});if("post"===d){b("tr.inline-editor textarea[data-wp-taxonomy]").each(function(g,c){if(b(c).autocomplete("instance")){return}b(c).wpTagsSuggest()})}b("html, body").animate({scrollTop:0},"fast")},edit:function(c){var p=this,k,g,h,j,i,n,m,d=true,q,l,e,o;p.revert();if(typeof(c)==="object"){c=p.getId(c)}k=["post_title","post_name","post_author","_status","jj","mm","aa","hh","mn","ss","post_password","post_format","menu_order","page_template"];if(p.type==="page"){k.push("post_parent")}g=b("#inline-edit").clone(true);b("td",g).attr("colspan",b("th:visible, td:visible",".widefat:first thead").length);b(p.what+c).removeClass("is-expanded").hide().after(g).after('<tr class="hidden"></tr>');h=b("#inline_"+c);if(!b(':input[name="post_author"] option[value="'+b(".post_author",h).text()+'"]',g).val()){b(':input[name="post_author"]',g).prepend('<option value="'+b(".post_author",h).text()+'">'+b("#"+p.type+"-"+c+" .author").text()+"</option>")}if(b(':input[name="post_author"] option',g).length===1){b("label.inline-edit-author",g).hide()}for(l=0;l<k.length;l++){e=b("."+k[l],h);e.find("img").replaceWith(function(){return this.alt});e=e.text();b(':input[name="'+k[l]+'"]',g).val(e)}if(b(".comment_status",h).text()==="open"){b('input[name="comment_status"]',g).prop("checked",true)}if(b(".ping_status",h).text()==="open"){b('input[name="ping_status"]',g).prop("checked",true)}if(b(".sticky",h).text()==="sticky"){b('input[name="sticky"]',g).prop("checked",true)}b(".post_category",h).each(function(){var r,f=b(this).text();if(f){r=b(this).attr("id").replace("_"+c,"");b("ul."+r+"-checklist :checkbox",g).val(f.split(","))}});b(".tags_input",h).each(function(){var s=b(this),t=b(this).attr("id").replace("_"+c,""),r=b("textarea.tax_input_"+t,g),f=inlineEditL10n.comma;s.find("img").replaceWith(function(){return this.alt});s=s.text();if(s){if(","!==f){s=s.replace(/,/g,f)}r.val(s)}r.wpTagsSuggest()});j=b("._status",h).text();if("future"!==j){b('select[name="_status"] option[value="future"]',g).remove()}o=b(".inline-edit-password-input").prop("disabled",false);if("private"===j){b('input[name="keep_private"]',g).prop("checked",true);o.val("").prop("disabled",true)}i=b('select[name="post_parent"] option[value="'+c+'"]',g);if(i.length>0){n=i[0].className.split("-")[1];m=i;while(d){m=m.next("option");if(m.length===0){break}q=m[0].className.split("-")[1];if(q<=n){d=false}else{m.remove();m=i}}i.remove()}b(g).attr("id","edit-"+c).addClass("inline-editor").show();b(".ptitle",g).focus();return false},save:function(f){var e,c,d=b(".post_status_page").val()||"";if(typeof(f)==="object"){f=this.getId(f)}b("table.widefat .spinner").addClass("is-active");e={action:"inline-save",post_type:typenow,post_ID:f,edit_date:"true",post_status:d};c=b("#edit-"+f).find(":input").serialize();e=c+"&"+b.param(e);b.post(ajaxurl,e,function(h){var g=b("#edit-"+f+" .inline-edit-save .error");b("table.widefat .spinner").removeClass("is-active");b(".ac_results").hide();if(h){if(-1!==h.indexOf("<tr")){b(inlineEditPost.what+f).siblings("tr.hidden").addBack().remove();b("#edit-"+f).before(h).remove();b(inlineEditPost.what+f).hide().fadeIn(400,function(){b(this).find(".editinline").focus();a.a11y.speak(inlineEditL10n.saved)})}else{h=h.replace(/<.[^<>]*?>/g,"");g.html(h).show();a.a11y.speak(g.text())}}else{g.html(inlineEditL10n.error).show();a.a11y.speak(inlineEditL10n.error)}},"html");return false},revert:function(){var c=b(".widefat"),d=b(".inline-editor",c).attr("id");if(d){b(".spinner",c).removeClass("is-active");b(".ac_results").hide();if("bulk-edit"===d){b("#bulk-edit",c).removeClass("inline-editor").hide().siblings(".hidden").remove();b("#bulk-titles").empty();b("#inlineedit").append(b("#bulk-edit"));b("#"+inlineEditPost.whichBulkButtonId).focus()}else{b("#"+d).siblings("tr.hidden").addBack().remove();d=d.substr(d.lastIndexOf("-")+1);b(this.what+d).show().find(".editinline").focus()}}return false},getId:function(d){var e=b(d).closest("tr").attr("id"),c=e.split("-");return c[c.length-1]}};b(document).ready(function(){inlineEditPost.init()});b(document).on("heartbeat-tick.wp-check-locked-posts",function(f,d){var c=d["wp-check-locked-posts"]||{};b("#the-list tr").each(function(h,j){var g=j.id,l=b(j),k,e;if(c.hasOwnProperty(g)){if(!l.hasClass("wp-locked")){k=c[g];l.find(".column-title .locked-text").text(k.text);l.find(".check-column checkbox").prop("checked",false);if(k.avatar_src){e=b('<img class="avatar avatar-18 photo" width="18" height="18" alt="" />').attr("src",k.avatar_src.replace(/&amp;/g,"&"));l.find(".column-title .locked-avatar").empty().append(e)}l.addClass("wp-locked")}}else{if(l.hasClass("wp-locked")){l.removeClass("wp-locked").delay(1000).find(".locked-info span").empty()}}})}).on("heartbeat-send.wp-check-locked-posts",function(f,d){var c=[];b("#the-list tr").each(function(e,g){if(g.id){c.push(g.id)}});if(c.length){d["wp-check-locked-posts"]=c}}).ready(function(){if(typeof a!=="undefined"&&a.heartbeat){a.heartbeat.interval(15)}})})(jQuery,window.wp);