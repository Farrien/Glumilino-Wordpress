(function(b){function a(){var j,k,f={};function l(){if(!j&&window.tinymce){j=window.tinymce;k=j.$;k(document).on("click",function(m){var p,o,n=k(m.target);if(n.hasClass("wp-switch-editor")){p=n.attr("data-wp-editor-id");o=n.hasClass("switch-tmce")?"tmce":"html";e(p,o)}})}}function d(n){var o=k(".mce-toolbar-grp",n.getContainer())[0],m=o&&o.clientHeight;if(m&&m>10&&m<200){return parseInt(m,10)}return 30}function e(m,q){m=m||"content";q=q||"toggle";var s,u,o,r=j.get(m),n=k("#wp-"+m+"-wrap"),p=k("#"+m),t=p[0];if("toggle"===q){if(r&&!r.isHidden()){q="html"}else{q="tmce"}}if("tmce"===q||"tinymce"===q){if(r&&!r.isHidden()){return false}if(typeof(window.QTags)!=="undefined"){window.QTags.closeAllTags(m)}s=parseInt(t.style.height,10)||0;if(r){r.show();if(!j.Env.iOS&&s){u=d(r);s=s-u+14;if(s>50&&s<5000){r.theme.resizeTo(null,s)}}}else{j.init(window.tinyMCEPreInit.mceInit[m])}n.removeClass("html-active").addClass("tmce-active");p.attr("aria-hidden",true);window.setUserSetting("editor","tinymce")}else{if("html"===q){if(r&&r.isHidden()){return false}if(r){if(!j.Env.iOS){o=r.iframeElement;s=o?parseInt(o.style.height,10):0;if(s){u=d(r);s=s+u-14;if(s>50&&s<5000){t.style.height=s+"px"}}}r.hide()}else{p.css({display:"",visibility:""})}n.removeClass("tmce-active").addClass("html-active");p.attr("aria-hidden",false);window.setUserSetting("editor","html")}}}function c(n){var s="blockquote|ul|ol|li|dl|dt|dd|table|thead|tbody|tfoot|tr|th|td|h[1-6]|fieldset|figure",q=s+"|div|p",p=s+"|pre",r=false,o=false,m=[];if(!n){return""}if(n.indexOf("<script")!==-1||n.indexOf("<style")!==-1){n=n.replace(/<(script|style)[^>]*>[\s\S]*?<\/\1>/g,function(t){m.push(t);return"<wp-preserve>"})}if(n.indexOf("<pre")!==-1){r=true;n=n.replace(/<pre[^>]*>[\s\S]+?<\/pre>/g,function(t){t=t.replace(/<br ?\/?>(\r\n|\n)?/g,"<wp-line-break>");t=t.replace(/<\/?p( [^>]*)?>(\r\n|\n)?/g,"<wp-line-break>");return t.replace(/\r?\n/g,"<wp-line-break>")})}if(n.indexOf("[caption")!==-1){o=true;n=n.replace(/\[caption[\s\S]+?\[\/caption\]/g,function(t){return t.replace(/<br([^>]*)>/g,"<wp-temp-br$1>").replace(/[\r\n\t]+/,"")})}n=n.replace(new RegExp("\\s*</("+q+")>\\s*","g"),"</$1>\n");n=n.replace(new RegExp("\\s*<((?:"+q+")(?: [^>]*)?)>","g"),"\n<$1>");n=n.replace(/(<p [^>]+>.*?)<\/p>/g,"$1</p#>");n=n.replace(/<div( [^>]*)?>\s*<p>/gi,"<div$1>\n\n");n=n.replace(/\s*<p>/gi,"");n=n.replace(/\s*<\/p>\s*/gi,"\n\n");n=n.replace(/\n[\s\u00a0]+\n/g,"\n\n");n=n.replace(/\s*<br ?\/?>\s*/gi,"\n");n=n.replace(/\s*<div/g,"\n<div");n=n.replace(/<\/div>\s*/g,"</div>\n");n=n.replace(/\s*\[caption([^\[]+)\[\/caption\]\s*/gi,"\n\n[caption$1[/caption]\n\n");n=n.replace(/caption\]\n\n+\[caption/g,"caption]\n\n[caption");n=n.replace(new RegExp("\\s*<((?:"+p+")(?: [^>]*)?)\\s*>","g"),"\n<$1>");n=n.replace(new RegExp("\\s*</("+p+")>\\s*","g"),"</$1>\n");n=n.replace(/<((li|dt|dd)[^>]*)>/g," \t<$1>");if(n.indexOf("<option")!==-1){n=n.replace(/\s*<option/g,"\n<option");n=n.replace(/\s*<\/select>/g,"\n</select>")}if(n.indexOf("<hr")!==-1){n=n.replace(/\s*<hr( [^>]*)?>\s*/g,"\n\n<hr$1>\n\n")}if(n.indexOf("<object")!==-1){n=n.replace(/<object[\s\S]+?<\/object>/g,function(t){return t.replace(/[\r\n]+/g,"")})}n=n.replace(/<\/p#>/g,"</p>\n");n=n.replace(/\s*(<p [^>]+>[\s\S]*?<\/p>)/g,"\n$1");n=n.replace(/^\s+/,"");n=n.replace(/[\s\u00a0]+$/,"");if(r){n=n.replace(/<wp-line-break>/g,"\n")}if(o){n=n.replace(/<wp-temp-br([^>]*)>/g,"<br$1>")}if(m.length){n=n.replace(/<wp-preserve>/g,function(){return m.shift()})}return n}function h(o){var n=false,m=false,p="table|thead|tfoot|caption|col|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|form|map|area|blockquote|address|math|style|p|h[1-6]|hr|fieldset|legend|section|article|aside|hgroup|header|footer|nav|figure|figcaption|details|menu|summary";o=o.replace(/\r\n|\r/g,"\n");if(o.indexOf("\n")===-1){return o}if(o.indexOf("<object")!==-1){o=o.replace(/<object[\s\S]+?<\/object>/g,function(q){return q.replace(/\n+/g,"")})}o=o.replace(/<[^<>]+>/g,function(q){return q.replace(/[\n\t ]+/g," ")});if(o.indexOf("<pre")!==-1||o.indexOf("<script")!==-1){n=true;o=o.replace(/<(pre|script)[^>]*>[\s\S]*?<\/\1>/g,function(q){return q.replace(/\n/g,"<wp-line-break>")})}if(o.indexOf("<figcaption")!==-1){o=o.replace(/\s*(<figcaption[^>]*>)/g,"$1");o=o.replace(/<\/figcaption>\s*/g,"</figcaption>")}if(o.indexOf("[caption")!==-1){m=true;o=o.replace(/\[caption[\s\S]+?\[\/caption\]/g,function(q){q=q.replace(/<br([^>]*)>/g,"<wp-temp-br$1>");q=q.replace(/<[^<>]+>/g,function(r){return r.replace(/[\n\t ]+/," ")});return q.replace(/\s*\n\s*/g,"<wp-temp-br />")})}o=o+"\n\n";o=o.replace(/<br \/>\s*<br \/>/gi,"\n\n");o=o.replace(new RegExp("(<(?:"+p+")(?: [^>]*)?>)","gi"),"\n\n$1");o=o.replace(new RegExp("(</(?:"+p+")>)","gi"),"$1\n\n");o=o.replace(/<hr( [^>]*)?>/gi,"<hr$1>\n\n");o=o.replace(/\s*<option/gi,"<option");o=o.replace(/<\/option>\s*/gi,"</option>");o=o.replace(/\n\s*\n+/g,"\n\n");o=o.replace(/([\s\S]+?)\n\n/g,"<p>$1</p>\n");o=o.replace(/<p>\s*?<\/p>/gi,"");o=o.replace(new RegExp("<p>\\s*(</?(?:"+p+")(?: [^>]*)?>)\\s*</p>","gi"),"$1");o=o.replace(/<p>(<li.+?)<\/p>/gi,"$1");o=o.replace(/<p>\s*<blockquote([^>]*)>/gi,"<blockquote$1><p>");o=o.replace(/<\/blockquote>\s*<\/p>/gi,"</p></blockquote>");o=o.replace(new RegExp("<p>\\s*(</?(?:"+p+")(?: [^>]*)?>)","gi"),"$1");o=o.replace(new RegExp("(</?(?:"+p+")(?: [^>]*)?>)\\s*</p>","gi"),"$1");o=o.replace(/(<br[^>]*>)\s*\n/gi,"$1");o=o.replace(/\s*\n/g,"<br />\n");o=o.replace(new RegExp("(</?(?:"+p+")[^>]*>)\\s*<br />","gi"),"$1");o=o.replace(/<br \/>(\s*<\/?(?:p|li|div|dl|dd|dt|th|pre|td|ul|ol)>)/gi,"$1");o=o.replace(/(?:<p>|<br ?\/?>)*\s*\[caption([^\[]+)\[\/caption\]\s*(?:<\/p>|<br ?\/?>)*/gi,"[caption$1[/caption]");o=o.replace(/(<(?:div|th|td|form|fieldset|dd)[^>]*>)(.*?)<\/p>/g,function(r,q,s){if(s.match(/<p( [^>]*)?>/)){return r}return q+"<p>"+s+"</p>"});if(n){o=o.replace(/<wp-line-break>/g,"\n")}if(m){o=o.replace(/<wp-temp-br([^>]*)>/g,"<br$1>")}return o}function i(m){var n={o:f,data:m,unfiltered:m};if(b){b("body").trigger("beforePreWpautop",[n])}n.data=c(n.data);if(b){b("body").trigger("afterPreWpautop",[n])}return n.data}function g(n){var m={o:f,data:n,unfiltered:n};if(b){b("body").trigger("beforeWpautop",[m])}m.data=h(m.data);if(b){b("body").trigger("afterWpautop",[m])}return m.data}if(b){b(document).ready(l)}else{if(document.addEventListener){document.addEventListener("DOMContentLoaded",l,false);window.addEventListener("load",l,false)}else{if(window.attachEvent){window.attachEvent("onload",l);document.attachEvent("onreadystatechange",function(){if("complete"===document.readyState){l()}})}}}window.wp=window.wp||{};window.wp.editor=window.wp.editor||{};window.wp.editor.autop=g;window.wp.editor.removep=i;f={go:e,wpautop:g,pre_wpautop:i,_wp_Autop:h,_wp_Nop:c};return f}window.switchEditors=new a()}(window.jQuery));