(function(Z,J,S,g){var aa=Z.encodeURIComponent,ae=J.createElement("form"),ab=J.getElementsByTagName("head")[0],y="_press_this_app",P=true,L,X,n,af,ad,T,W,ac,q;if(!g){return}if(S.match(/^https?:/)){g+="&u="+aa(S);if(S.match(/^https:/)&&g.match(/^http:/)){P=false}}else{top.location.href=g;return}if(Z.getSelection){n=Z.getSelection()+""}else{if(J.getSelection){n=J.getSelection()+""}else{if(J.selection){n=J.selection.createRange().text||""}}}g+="&buster="+(new Date().getTime());if(!P){if(J.title){g+="&t="+aa(J.title.substr(0,256))}if(n){g+="&s="+aa(n.substr(0,512))}}L=Z.outerWidth||J.documentElement.clientWidth||600;X=Z.outerHeight||J.documentElement.clientHeight||700;L=(L<800||L>5000)?600:(L*0.7);X=(X<800||X>3000)?700:(X*0.9);if(!P){Z.open(g,y,"location,resizable,scrollbars,width="+L+",height="+X);return}function U(a,c){if(typeof c==="undefined"){return}var b=J.createElement("input");b.name=a;b.value=c;b.type="hidden";ae.appendChild(b)}af=ab.getElementsByTagName("meta")||[];for(var m=0;m<af.length;m++){if(m>200){break}var R=af[m],V=R.getAttribute("name"),K=R.getAttribute("property"),N=R.getAttribute("content");if(N){if(V){U("_meta["+V+"]",N)}else{if(K){U("_meta["+K+"]",N)}}}}ad=ab.getElementsByTagName("link")||[];for(var Y=0;Y<ad.length;Y++){if(Y>=50){break}var Q=ad[Y],M=Q.getAttribute("rel");if(M==="canonical"||M==="icon"||M==="shortlink"){U("_links["+M+"]",Q.getAttribute("href"))}}if(J.body.getElementsByClassName){T=J.body.getElementsByClassName("hfeed")[0]}T=J.getElementById("content")||T||J.body;W=T.getElementsByTagName("img")||[];for(var p=0;p<W.length;p++){if(p>=100){break}q=W[p];if(q.src.indexOf("avatar")>-1||q.className.indexOf("avatar")>-1||(q.width&&q.width<256)||(q.height&&q.height<128)){continue}U("_images[]",q.src)}ac=J.body.getElementsByTagName("iframe")||[];for(var O=0;O<ac.length;O++){if(O>=50){break}U("_embeds[]",ac[O].src)}if(J.title){U("t",J.title)}if(n){U("s",n)}ae.setAttribute("method","POST");ae.setAttribute("action",g);ae.setAttribute("target",y);ae.setAttribute("style","display: none;");Z.open("about:blank",y,"location,resizable,scrollbars,width="+L+",height="+X);J.body.appendChild(ae);ae.submit()})(window,document,top.location.href,window.pt_url);