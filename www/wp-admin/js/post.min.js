var commentsBox,WPSetThumbnailHTML,WPSetThumbnailID,WPRemoveThumbnail,wptitlehint,makeSlugeditClickable,editPermalink;makeSlugeditClickable=editPermalink=function(){};window.wp=window.wp||{};(function(a){var b=false;commentsBox={st:0,get:function(e,d){var c=this.st,f;if(!d){d=20}this.st+=d;this.total=e;a("#commentsdiv .spinner").addClass("is-active");f={action:"get-comments",mode:"single",_ajax_nonce:a("#add_comment_nonce").val(),p:a("#post_ID").val(),start:c,number:d};a.post(ajaxurl,f,function(g){g=wpAjax.parseAjaxResponse(g);a("#commentsdiv .widefat").show();a("#commentsdiv .spinner").removeClass("is-active");if("object"==typeof g&&g.responses[0]){a("#the-comment-list").append(g.responses[0].data);theList=theExtraList=null;a("a[className*=':']").unbind();if(commentsBox.st>commentsBox.total){a("#show-comments").hide()}else{a("#show-comments").show().children("a").html(postL10n.showcomm)}return}else{if(1==g){a("#show-comments").html(postL10n.endcomm);return}}a("#the-comment-list").append('<tr><td colspan="2">'+wpAjax.broken+"</td></tr>")});return false},load:function(c){this.st=jQuery("#the-comment-list tr.comment:visible").length;this.get(c)}};WPSetThumbnailHTML=function(c){a(".inside","#postimagediv").html(c)};WPSetThumbnailID=function(d){var c=a('input[value="_thumbnail_id"]',"#list-table");if(c.length>0){a("#meta\\["+c.attr("id").match(/[0-9]+/)+"\\]\\[value\\]").text(d)}};WPRemoveThumbnail=function(c){a.post(ajaxurl,{action:"set-post-thumbnail",post_id:a("#post_ID").val(),thumbnail_id:-1,_ajax_nonce:c,cookie:encodeURIComponent(document.cookie)},function(d){if(d=="0"){alert(setPostThumbnailL10n.error)}else{WPSetThumbnailHTML(d)}})};a(document).on("heartbeat-send.refresh-lock",function(h,f){var d=a("#active_post_lock").val(),c=a("#post_ID").val(),g={};if(!c||!a("#post-lock-dialog").length){return}g.post_id=c;if(d){g.lock=d}f["wp-refresh-post-lock"]=g}).on("heartbeat-tick.refresh-lock",function(g,f){var h,d,c;if(f["wp-refresh-post-lock"]){h=f["wp-refresh-post-lock"];if(h.lock_error){d=a("#post-lock-dialog");if(d.length&&!d.is(":visible")){if(wp.autosave){a(document).one("heartbeat-tick",function(){wp.autosave.server.suspend();d.removeClass("saving").addClass("saved");a(window).off("beforeunload.edit-post")});d.addClass("saving");wp.autosave.server.triggerSave()}if(h.lock_error.avatar_src){c=a('<img class="avatar avatar-64 photo" width="64" height="64" alt="" />').attr("src",h.lock_error.avatar_src.replace(/&amp;/g,"&"));d.find("div.post-locked-avatar").empty().append(c)}d.show().find(".currently-editing").text(h.lock_error.text);d.find(".wp-tab-first").focus()}}else{if(h.new_lock){a("#active_post_lock").val(h.new_lock)}}}}).on("before-autosave.update-post-slug",function(){b=document.activeElement&&document.activeElement.id==="title"}).on("after-autosave.update-post-slug",function(){if(!a("#edit-slug-box > *").length&&!b){a.post(ajaxurl,{action:"sample-permalink",post_id:a("#post_ID").val(),new_title:a("#title").val(),samplepermalinknonce:a("#samplepermalinknonce").val()},function(c){if(c!="-1"){a("#edit-slug-box").html(c)}})}})}(jQuery));(function(c){var a,b;function d(){a=false;window.clearTimeout(b);b=window.setTimeout(function(){a=true},300000)}c(document).on("heartbeat-send.wp-refresh-nonces",function(h,g){var f,i=c("#wp-auth-check-wrap");if(a||(i.length&&!i.hasClass("hidden"))){if((f=c("#post_ID").val())&&c("#_wpnonce").val()){g["wp-refresh-post-nonces"]={post_id:f}}}}).on("heartbeat-tick.wp-refresh-nonces",function(h,g){var f=g["wp-refresh-post-nonces"];if(f){d();if(f.replace){c.each(f.replace,function(e,i){c("#"+e).val(i)})}if(f.heartbeatNonce){window.heartbeatSettings.nonce=f.heartbeatNonce}}}).ready(function(){d()})}(jQuery));jQuery(document).ready(function(c){var g,j,k,e,i,r="",m=c("#content"),p=c(document),d=c("#post_ID").val()||0,a=c("#submitpost"),l=true,q=c("#post-visibility-select"),n=c("#timestampdiv"),h=c("#post-status-select"),f=window.navigator.platform?window.navigator.platform.indexOf("Mac")!==-1:false;postboxes.add_postbox_toggles(pagenow);window.name="";c("#post-lock-dialog .notification-dialog").on("keydown",function(t){if(t.which!=9){return}var s=c(t.target);if(s.hasClass("wp-tab-first")&&t.shiftKey){c(this).find(".wp-tab-last").focus();t.preventDefault()}else{if(s.hasClass("wp-tab-last")&&!t.shiftKey){c(this).find(".wp-tab-first").focus();t.preventDefault()}}}).filter(":visible").find(".wp-tab-first").focus();if(wp.heartbeat&&c("#post-lock-dialog").length){wp.heartbeat.interval(15)}k=a.find(":submit, a.submitdelete, #post-preview").on("click.edit-post",function(s){var t=c(this);if(t.hasClass("disabled")){s.preventDefault();return}if(t.hasClass("submitdelete")||t.is("#post-preview")){return}c("form#post").off("submit.edit-post").on("submit.edit-post",function(u){if(u.isDefaultPrevented()){return}if(wp.autosave){wp.autosave.server.suspend()}if(typeof commentReply!=="undefined"){if(!commentReply.discardCommentChanges()){return false}commentReply.close()}l=false;c(window).off("beforeunload.edit-post");k.addClass("disabled");if(t.attr("id")==="publish"){a.find("#major-publishing-actions .spinner").addClass("is-active")}else{a.find("#minor-publishing .spinner").addClass("is-active")}})});c("#post-preview").on("click.post-preview",function(u){var x=c(this),s=c("form#post"),v=c("input#wp-preview"),w=x.attr("target")||"wp-preview",t=navigator.userAgent.toLowerCase();u.preventDefault();if(x.hasClass("disabled")){return}if(wp.autosave){wp.autosave.server.tempBlockSave()}v.val("dopreview");s.attr("target",w).submit().attr("target","");if(t.indexOf("safari")!==-1&&t.indexOf("chrome")===-1){s.attr("action",function(y,z){return z+"?t="+(new Date()).getTime()})}v.val("")});c("#title").on("keydown.editor-focus",function(t){var s;if(t.keyCode===9&&!t.ctrlKey&&!t.altKey&&!t.shiftKey){s=typeof tinymce!="undefined"&&tinymce.get("content");if(s&&!s.isHidden()){s.focus()}else{if(m.length){m.focus()}else{return}}t.preventDefault()}});if(c("#auto_draft").val()){c("#title").blur(function(){var s;if(!this.value||c("#edit-slug-box > *").length){return}c("form#post").one("submit",function(){s=true});window.setTimeout(function(){if(!s&&wp.autosave){wp.autosave.server.triggerSave()}},200)})}p.on("autosave-disable-buttons.edit-post",function(){k.addClass("disabled")}).on("autosave-enable-buttons.edit-post",function(){if(!wp.heartbeat||!wp.heartbeat.hasConnectionError()){k.removeClass("disabled")}}).on("before-autosave.edit-post",function(){c(".autosave-message").text(postL10n.savingText)}).on("after-autosave.edit-post",function(s,t){c(".autosave-message").text(t.message);if(c(document.body).hasClass("post-new-php")){c(".submitbox .submitdelete").show()}});c(window).on("beforeunload.edit-post",function(){var s=typeof tinymce!=="undefined"&&tinymce.get("content");if((s&&!s.isHidden()&&s.isDirty())||(wp.autosave&&wp.autosave.server.postChanged())){return postL10n.saveAlert}}).on("unload.edit-post",function(t){if(!l){return}if(t.target&&t.target.nodeName!="#document"){return}var s=c("#post_ID").val();var w=c("#active_post_lock").val();if(!s||!w){return}var u={action:"wp-remove-post-lock",_wpnonce:c("#_wpnonce").val(),post_ID:s,active_post_lock:w};if(window.FormData&&window.navigator.sendBeacon){var v=new window.FormData();c.each(u,function(x,y){v.append(x,y)});if(window.navigator.sendBeacon(ajaxurl,v)){return}}c.post({async:false,data:u,url:ajaxurl})});if(c("#tagsdiv-post_tag").length){window.tagBox&&window.tagBox.init()}else{c(".meta-box-sortables").children("div.postbox").each(function(){if(this.id.indexOf("tagsdiv-")===0){window.tagBox&&window.tagBox.init();return false}})}c(".categorydiv").each(function(){var w=c(this).attr("id"),v,x,u,s,t;u=w.split("-");u.shift();s=u.join("-");t=s+"_tab";if(s=="category"){t="cats"}c("a","#"+s+"-tabs").click(function(z){z.preventDefault();var y=c(this).attr("href");c(this).parent().addClass("tabs").siblings("li").removeClass("tabs");c("#"+s+"-tabs").siblings(".tabs-panel").hide();c(y).show();if("#"+s+"-all"==y){deleteUserSetting(t)}else{setUserSetting(t,"pop")}});if(getUserSetting(t)){c('a[href="#'+s+'-pop"]',"#"+s+"-tabs").click()}c("#new"+s).one("focus",function(){c(this).val("").removeClass("form-input-tip")});c("#new"+s).keypress(function(y){if(13===y.keyCode){y.preventDefault();c("#"+s+"-add-submit").click()}});c("#"+s+"-add-submit").click(function(){c("#new"+s).focus()});v=function(y){if(!c("#new"+s).val()){return false}y.data+="&"+c(":checked","#"+s+"checklist").serialize();c("#"+s+"-add-submit").prop("disabled",true);return y};x=function(B,A){var z,y=c("#new"+s+"_parent");c("#"+s+"-add-submit").prop("disabled",false);if("undefined"!=A.parsed.responses[0]&&(z=A.parsed.responses[0].supplemental.newcat_parent)){y.before(z);y.remove()}};c("#"+s+"checklist").wpList({alt:"",response:s+"-ajax-response",addBefore:v,addAfter:x});c("#"+s+"-add-toggle").click(function(y){y.preventDefault();c("#"+s+"-adder").toggleClass("wp-hidden-children");c('a[href="#'+s+'-all"]',"#"+s+"-tabs").click();c("#new"+s).focus()});c("#"+s+"checklist, #"+s+"checklist-pop").on("click",'li.popular-category > label input[type="checkbox"]',function(){var y=c(this),A=y.is(":checked"),z=y.val();if(z&&y.parents("#taxonomy-"+s).length){c("#in-"+s+"-"+z+", #in-popular-"+s+"-"+z).prop("checked",A)}})});if(c("#postcustom").length){c("#the-list").wpList({addBefore:function(t){t.data+="&post_id="+c("#post_ID").val();return t},addAfter:function(){c("table#list-table").show()}})}if(c("#submitdiv").length){g=c("#timestamp").html();j=c("#post-visibility-display").html();e=function(){if(q.find("input:radio:checked").val()!="public"){c("#sticky").prop("checked",false);c("#sticky-span").hide()}else{c("#sticky-span").show()}if(q.find("input:radio:checked").val()!="password"){c("#password-span").hide()}else{c("#password-span").show()}};i=function(){if(!n.length){return true}var z,A,t,C,B=c("#post_status"),u=c('option[value="publish"]',B),s=c("#aa").val(),x=c("#mm").val(),y=c("#jj").val(),w=c("#hh").val(),v=c("#mn").val();z=new Date(s,x-1,y,w,v);A=new Date(c("#hidden_aa").val(),c("#hidden_mm").val()-1,c("#hidden_jj").val(),c("#hidden_hh").val(),c("#hidden_mn").val());t=new Date(c("#cur_aa").val(),c("#cur_mm").val()-1,c("#cur_jj").val(),c("#cur_hh").val(),c("#cur_mn").val());if(z.getFullYear()!=s||(1+z.getMonth())!=x||z.getDate()!=y||z.getMinutes()!=v){n.find(".timestamp-wrap").addClass("form-invalid");return false}else{n.find(".timestamp-wrap").removeClass("form-invalid")}if(z>t&&c("#original_post_status").val()!="future"){C=postL10n.publishOnFuture;c("#publish").val(postL10n.schedule)}else{if(z<=t&&c("#original_post_status").val()!="publish"){C=postL10n.publishOn;c("#publish").val(postL10n.publish)}else{C=postL10n.publishOnPast;c("#publish").val(postL10n.update)}}if(A.toUTCString()==z.toUTCString()){c("#timestamp").html(g)}else{c("#timestamp").html("\n"+C+" <b>"+postL10n.dateFormat.replace("%1$s",c('option[value="'+x+'"]',"#mm").attr("data-text")).replace("%2$s",parseInt(y,10)).replace("%3$s",s).replace("%4$s",("00"+w).slice(-2)).replace("%5$s",("00"+v).slice(-2))+"</b> ")}if(q.find("input:radio:checked").val()=="private"){c("#publish").val(postL10n.update);if(0===u.length){B.append('<option value="publish">'+postL10n.privatelyPublished+"</option>")}else{u.html(postL10n.privatelyPublished)}c('option[value="publish"]',B).prop("selected",true);c("#misc-publishing-actions .edit-post-status").hide()}else{if(c("#original_post_status").val()=="future"||c("#original_post_status").val()=="draft"){if(u.length){u.remove();B.val(c("#hidden_post_status").val())}}else{u.html(postL10n.published)}if(B.is(":hidden")){c("#misc-publishing-actions .edit-post-status").show()}}c("#post-status-display").html(c("option:selected",B).text());if(c("option:selected",B).val()=="private"||c("option:selected",B).val()=="publish"){c("#save-post").hide()}else{c("#save-post").show();if(c("option:selected",B).val()=="pending"){c("#save-post").show().val(postL10n.savePending)}else{c("#save-post").show().val(postL10n.saveDraft)}}return true};c("#visibility .edit-visibility").click(function(s){s.preventDefault();if(q.is(":hidden")){e();q.slideDown("fast",function(){q.find('input[type="radio"]').first().focus()});c(this).hide()}});q.find(".cancel-post-visibility").click(function(s){q.slideUp("fast");c("#visibility-radio-"+c("#hidden-post-visibility").val()).prop("checked",true);c("#post_password").val(c("#hidden-post-password").val());c("#sticky").prop("checked",c("#hidden-post-sticky").prop("checked"));c("#post-visibility-display").html(j);c("#visibility .edit-visibility").show().focus();i();s.preventDefault()});q.find(".save-post-visibility").click(function(s){q.slideUp("fast");c("#visibility .edit-visibility").show().focus();i();if(q.find("input:radio:checked").val()!="public"){c("#sticky").prop("checked",false)}if(c("#sticky").prop("checked")){r="Sticky"}else{r=""}c("#post-visibility-display").html(postL10n[q.find("input:radio:checked").val()+r]);s.preventDefault()});q.find("input:radio").change(function(){e()});n.siblings("a.edit-timestamp").click(function(s){if(n.is(":hidden")){n.slideDown("fast",function(){c("input, select",n.find(".timestamp-wrap")).first().focus()});c(this).hide()}s.preventDefault()});n.find(".cancel-timestamp").click(function(s){n.slideUp("fast").siblings("a.edit-timestamp").show().focus();c("#mm").val(c("#hidden_mm").val());c("#jj").val(c("#hidden_jj").val());c("#aa").val(c("#hidden_aa").val());c("#hh").val(c("#hidden_hh").val());c("#mn").val(c("#hidden_mn").val());i();s.preventDefault()});n.find(".save-timestamp").click(function(s){if(i()){n.slideUp("fast");n.siblings("a.edit-timestamp").show().focus()}s.preventDefault()});c("#post").on("submit",function(s){if(!i()){s.preventDefault();n.show();if(wp.autosave){wp.autosave.enableButtons()}c("#publishing-action .spinner").removeClass("is-active")}});h.siblings("a.edit-post-status").click(function(s){if(h.is(":hidden")){h.slideDown("fast",function(){h.find("select").focus()});c(this).hide()}s.preventDefault()});h.find(".save-post-status").click(function(s){h.slideUp("fast").siblings("a.edit-post-status").show().focus();i();s.preventDefault()});h.find(".cancel-post-status").click(function(s){h.slideUp("fast").siblings("a.edit-post-status").show().focus();c("#post_status").val(c("#hidden_post_status").val());i();s.preventDefault()})}function o(){var t,z,D,x,w=0,A=c("#post_name"),E=A.val(),B=c("#sample-permalink"),s=B.html(),y=c("#sample-permalink a").html(),v=c("#edit-slug-buttons"),C=v.html(),u=c("#editable-post-name-full");u.find("img").replaceWith(function(){return this.alt});u=u.html();B.html(y);D=c("#editable-post-name");x=D.html();v.html('<button type="button" class="save button button-small">'+postL10n.ok+'</button> <button type="button" class="cancel button-link">'+postL10n.cancel+"</button>");v.children(".save").click(function(){var F=D.children("input").val();if(F==c("#editable-post-name-full").text()){v.children(".cancel").click();return}c.post(ajaxurl,{action:"sample-permalink",post_id:d,new_slug:F,new_title:c("#title").val(),samplepermalinknonce:c("#samplepermalinknonce").val()},function(H){var G=c("#edit-slug-box");G.html(H);if(G.hasClass("hidden")){G.fadeIn("fast",function(){G.removeClass("hidden")})}v.html(C);B.html(s);A.val(F);c(".edit-slug").focus();wp.a11y.speak(postL10n.permalinkSaved)})});v.children(".cancel").click(function(){c("#view-post-btn").show();D.html(x);v.html(C);B.html(s);A.val(E);c(".edit-slug").focus()});for(t=0;t<u.length;++t){if("%"==u.charAt(t)){w++}}z=(w>u.length/4)?"":u;D.html('<input type="text" id="new-post-slug" value="'+z+'" autocomplete="off" />').children("input").keydown(function(G){var F=G.which;if(13===F){G.preventDefault();v.children(".save").click()}if(27===F){v.children(".cancel").click()}}).keyup(function(){A.val(this.value)}).focus()}c("#titlediv").on("click",".edit-slug",function(){o()});wptitlehint=function(u){u=u||"title";var s=c("#"+u),t=c("#"+u+"-prompt-text");if(""===s.val()){t.removeClass("screen-reader-text")}t.click(function(){c(this).addClass("screen-reader-text");s.focus()});s.blur(function(){if(""===this.value){t.removeClass("screen-reader-text")}}).focus(function(){t.addClass("screen-reader-text")}).keydown(function(v){t.addClass("screen-reader-text");c(this).unbind(v)})};wptitlehint();(function(){var u,w,s,y=c("#post-status-info"),t=c("#postdivrich");if(!m.length||"ontouchstart" in window){c("#content-resize-handle").hide();return}function v(z){if(t.hasClass("wp-editor-expand")){return}if(s){u.theme.resizeTo(null,w+z.pageY)}else{m.height(Math.max(50,w+z.pageY))}z.preventDefault()}function x(){var z,A;if(t.hasClass("wp-editor-expand")){return}if(s){u.focus();A=parseInt(c("#wp-content-editor-container .mce-toolbar-grp").height(),10);if(A<10||A>200){A=30}z=parseInt(c("#content_ifr").css("height"),10)+A-28}else{m.focus();z=parseInt(m.css("height"),10)}p.off(".wp-editor-resize");if(z&&z>50&&z<5000){setUserSetting("ed_size",z)}}y.on("mousedown.wp-editor-resize",function(z){if(typeof tinymce!=="undefined"){u=tinymce.get("content")}if(u&&!u.isHidden()){s=true;w=c("#content_ifr").height()-z.pageY}else{s=false;w=m.height()-z.pageY;m.blur()}p.on("mousemove.wp-editor-resize",v).on("mouseup.wp-editor-resize mouseleave.wp-editor-resize",x);z.preventDefault()}).on("mouseup.wp-editor-resize",x)})();if(typeof tinymce!=="undefined"){c("#post-formats-select input.post-format").on("change.set-editor-class",function(){var t,s,u=this.id;if(u&&c(this).prop("checked")&&(t=tinymce.get("content"))){s=t.getBody();s.className=s.className.replace(/\bpost-format-[^ ]+/,"");t.dom.addClass(s,u=="post-format-0"?"post-format-standard":u);c(document).trigger("editor-classchange")}});c("#page_template").on("change.set-editor-class",function(){var u,s,t=c(this).val()||"";t=t.substr(t.lastIndexOf("/")+1,t.length).replace(/\.php$/,"").replace(/\./g,"-");if(t&&(u=tinymce.get("content"))){s=u.getBody();s.className=s.className.replace(/\bpage-template-[^ ]+/,"");u.dom.addClass(s,"page-template-"+t);c(document).trigger("editor-classchange")}})}m.on("keydown.wp-autosave",function(s){if(s.which===83){if(s.shiftKey||s.altKey||(f&&(!s.metaKey||s.ctrlKey))||(!f&&!s.ctrlKey)){return}wp.autosave&&wp.autosave.server.triggerSave();s.preventDefault()}});if(c("#original_post_status").val()==="auto-draft"&&window.history.replaceState){var b;c("#publish").on("click",function(){b=window.location.href;b+=(b.indexOf("?")!==-1)?"&":"?";b+="wp-post-new-reload=true";window.history.replaceState(null,null,b)})}});(function(b,a){b(function(){var e=b("#content"),d=b("#wp-word-count").find(".word-count"),f=0,c;function g(){var i,h;if(!c||c.isHidden()){i=e.val()}else{i=c.getContent({format:"raw"})}h=a.count(i);if(h!==f){d.text(h)}f=h}b(document).on("tinymce-editor-init",function(i,h){if(h.id!=="content"){return}c=h;h.on("nodechange keyup",_.debounce(g,1000))});e.on("input keyup",_.debounce(g,1000));g()})})(jQuery,new wp.utils.WordCounter());