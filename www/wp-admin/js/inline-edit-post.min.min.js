window.wp=window.wp||{};var inlineEditPost;(function(c,d){inlineEditPost={init:function(){var b=this,a=c("#inline-edit"),f=c("#bulk-edit");b.type=c("table.widefat").hasClass("pages")?"page":"post";b.what="#post-";a.keyup(function(e){if(e.which===27){return inlineEditPost.revert()}});f.keyup(function(e){if(e.which===27){return inlineEditPost.revert()}});c(".cancel",a).click(function(){return inlineEditPost.revert()});c(".save",a).click(function(){return inlineEditPost.save(this)});c("td",a).keydown(function(e){if(e.which===13&&!c(e.target).hasClass("cancel")){return inlineEditPost.save(this)}});c(".cancel",f).click(function(){return inlineEditPost.revert()});c('#inline-edit .inline-edit-private input[value="private"]').click(function(){var e=c("input.inline-edit-password-input");if(c(this).prop("checked")){e.val("").prop("disabled",true)}else{e.prop("disabled",false)}});c("#the-list").on("click","a.editinline",function(e){e.preventDefault();inlineEditPost.edit(this)});c("#bulk-edit").find("fieldset:first").after(c("#inline-edit fieldset.inline-edit-categories").clone()).siblings("fieldset:last").prepend(c("#inline-edit label.inline-edit-tags").clone());c('select[name="_status"] option[value="future"]',f).remove();c("#doaction, #doaction2").click(function(h){var e;b.whichBulkButtonId=c(this).attr("id");e=b.whichBulkButtonId.substr(2);if("edit"===c('select[name="'+e+'"]').val()){h.preventDefault();b.setBulk()}else{if(c("form#posts-filter tr.inline-editor").length>0){b.revert()}}})},toggle:function(a){var b=this;c(b.what+b.getId(a)).css("display")==="none"?b.revert():b.edit(a)},setBulk:function(){var b="",g=this.type,a=true;this.revert();c("#bulk-edit td").attr("colspan",c("th:visible, td:visible",".widefat:first thead").length);c("table.widefat tbody").prepend(c("#bulk-edit")).prepend('<tr class="hidden"></tr>');c("#bulk-edit").addClass("inline-editor").show();c('tbody th.check-column input[type="checkbox"]').each(function(){if(c(this).prop("checked")){a=false;var e=c(this).val(),f;f=c("#inline_"+e+" .post_title").html()||inlineEditL10n.notitle;b+='<div id="ttle'+e+'"><a id="_'+e+'" class="ntdelbutton" title="'+inlineEditL10n.ntdeltitle+'">X</a>'+f+"</div>"}});if(a){return this.revert()}c("#bulk-titles").html(b);c("#bulk-titles a").click(function(){var e=c(this).attr("id").substr(1);c('table.widefat input[value="'+e+'"]').prop("checked",false);c("#ttle"+e).remove()});if("post"===g){c("tr.inline-editor textarea[data-wp-taxonomy]").each(function(e,f){if(c(f).autocomplete("instance")){return}c(f).wpTagsSuggest()})}c("html, body").animate({scrollTop:0},"fast")},edit:function(B){var b=this,u,y,x,v,w,r,s,A=true,a,t,z,f;b.revert();if(typeof(B)==="object"){B=b.getId(B)}u=["post_title","post_name","post_author","_status","jj","mm","aa","hh","mn","ss","post_password","post_format","menu_order","page_template"];if(b.type==="page"){u.push("post_parent")}y=c("#inline-edit").clone(true);c("td",y).attr("colspan",c("th:visible, td:visible",".widefat:first thead").length);c(b.what+B).removeClass("is-expanded").hide().after(y).after('<tr class="hidden"></tr>');x=c("#inline_"+B);if(!c(':input[name="post_author"] option[value="'+c(".post_author",x).text()+'"]',y).val()){c(':input[name="post_author"]',y).prepend('<option value="'+c(".post_author",x).text()+'">'+c("#"+b.type+"-"+B+" .author").text()+"</option>")}if(c(':input[name="post_author"] option',y).length===1){c("label.inline-edit-author",y).hide()}for(t=0;t<u.length;t++){z=c("."+u[t],x);z.find("img").replaceWith(function(){return this.alt});z=z.text();c(':input[name="'+u[t]+'"]',y).val(z)}if(c(".comment_status",x).text()==="open"){c('input[name="comment_status"]',y).prop("checked",true)}if(c(".ping_status",x).text()==="open"){c('input[name="ping_status"]',y).prop("checked",true)}if(c(".sticky",x).text()==="sticky"){c('input[name="sticky"]',y).prop("checked",true)}c(".post_category",x).each(function(){var e,g=c(this).text();if(g){e=c(this).attr("id").replace("_"+B,"");c("ul."+e+"-checklist :checkbox",y).val(g.split(","))}});c(".tags_input",x).each(function(){var g=c(this),e=c(this).attr("id").replace("_"+B,""),h=c("textarea.tax_input_"+e,y),i=inlineEditL10n.comma;g.find("img").replaceWith(function(){return this.alt});g=g.text();if(g){if(","!==i){g=g.replace(/,/g,i)}h.val(g)}h.wpTagsSuggest()});v=c("._status",x).text();if("future"!==v){c('select[name="_status"] option[value="future"]',y).remove()}f=c(".inline-edit-password-input").prop("disabled",false);if("private"===v){c('input[name="keep_private"]',y).prop("checked",true);f.val("").prop("disabled",true)}w=c('select[name="post_parent"] option[value="'+B+'"]',y);if(w.length>0){r=w[0].className.split("-")[1];s=w;while(A){s=s.next("option");if(s.length===0){break}a=s[0].className.split("-")[1];if(a<=r){A=false}else{s.remove();s=w}}w.remove()}c(y).attr("id","edit-"+B).addClass("inline-editor").show();c(".ptitle",y).focus();return false},save:function(a){var b,h,g=c(".post_status_page").val()||"";if(typeof(a)==="object"){a=this.getId(a)}c("table.widefat .spinner").addClass("is-active");b={action:"inline-save",post_type:typenow,post_ID:a,edit_date:"true",post_status:g};h=c("#edit-"+a).find(":input").serialize();b=h+"&"+c.param(b);c.post(ajaxurl,b,function(e){var f=c("#edit-"+a+" .inline-edit-save .error");c("table.widefat .spinner").removeClass("is-active");c(".ac_results").hide();if(e){if(-1!==e.indexOf("<tr")){c(inlineEditPost.what+a).siblings("tr.hidden").addBack().remove();c("#edit-"+a).before(e).remove();c(inlineEditPost.what+a).hide().fadeIn(400,function(){c(this).find(".editinline").focus();d.a11y.speak(inlineEditL10n.saved)})}else{e=e.replace(/<.[^<>]*?>/g,"");f.html(e).show();d.a11y.speak(f.text())}}else{f.html(inlineEditL10n.error).show();d.a11y.speak(inlineEditL10n.error)}},"html");return false},revert:function(){var b=c(".widefat"),a=c(".inline-editor",b).attr("id");if(a){c(".spinner",b).removeClass("is-active");c(".ac_results").hide();if("bulk-edit"===a){c("#bulk-edit",b).removeClass("inline-editor").hide().siblings(".hidden").remove();c("#bulk-titles").empty();c("#inlineedit").append(c("#bulk-edit"));c("#"+inlineEditPost.whichBulkButtonId).focus()}else{c("#"+a).siblings("tr.hidden").addBack().remove();a=a.substr(a.lastIndexOf("-")+1);c(this.what+a).show().find(".editinline").focus()}}return false},getId:function(b){var a=c(b).closest("tr").attr("id"),f=a.split("-");return f[f.length-1]}};c(document).ready(function(){inlineEditPost.init()});c(document).on("heartbeat-tick.wp-check-locked-posts",function(a,b){var e=b["wp-check-locked-posts"]||{};c("#the-list tr").each(function(n,m){var o=m.id,f=c(m),i,p;if(e.hasOwnProperty(o)){if(!f.hasClass("wp-locked")){i=e[o];f.find(".column-title .locked-text").text(i.text);f.find(".check-column checkbox").prop("checked",false);if(i.avatar_src){p=c('<img class="avatar avatar-18 photo" width="18" height="18" alt="" />').attr("src",i.avatar_src.replace(/&amp;/g,"&"));f.find(".column-title .locked-avatar").empty().append(p)}f.addClass("wp-locked")}}else{if(f.hasClass("wp-locked")){f.removeClass("wp-locked").delay(1000).find(".locked-info span").empty()}}})}).on("heartbeat-send.wp-check-locked-posts",function(a,b){var e=[];c("#the-list tr").each(function(h,f){if(f.id){e.push(f.id)}});if(e.length){b["wp-check-locked-posts"]=e}}).ready(function(){if(typeof d!=="undefined"&&d.heartbeat){d.heartbeat.interval(15)}})})(jQuery,window.wp);