/*! Iris Color Picker - v1.1.0-beta - 2016-10-25
* https://github.com/Automattic/Iris
* Copyright (c) 2016 Matt Wiebe; Licensed GPLv2 */
;!function(H,G){function F(){var a,f,e="backgroundImage";y?x="filter":(a=H('<div id="iris-gradtest" />'),f="linear-gradient(top,#fff,#000)",H.each(w,function(b,c){if(a.css(e,c+f),a.css(e).match("gradient")){return x=b,!1}}),x===!1&&(a.css("background","-webkit-gradient(linear,0% 0%,0% 100%,from(#fff),to(#000))"),a.css(e).match("gradient")&&(x="webkit")),a.remove())}function E(a,d){return a="top"===a?"top":"left",d=H.isArray(d)?d:Array.prototype.slice.call(arguments,1),"webkit"===x?C(a,d):w[x]+"linear-gradient("+a+", "+d.join(", ")+")"}function D(M,L){var K,J,I,q,p,o,n,g,a;M="top"===M?"top":"left",L=H.isArray(L)?L:Array.prototype.slice.call(arguments,1),K="top"===M?0:1,J=H(this),I=L.length-1,q="filter",p=1===K?"left":"top",o=1===K?"right":"bottom",n=1===K?"height":"width",g='<div class="iris-ie-gradient-shim" style="position:absolute;'+n+":100%;"+p+":%start%;"+o+":%end%;"+q+':%filter%;" data-color:"%color%"></div>',a="","static"===J.css("position")&&J.css({position:"relative"}),L=B(L),H.each(L,function(d,c){var j,i,f;return d!==I&&(j=L[d+1],void (c.stop!==j.stop&&(i=100-parseFloat(j.stop)+"%",c.octoHex=new Color(c.color).toIEOctoHex(),j.octoHex=new Color(j.color).toIEOctoHex(),f="progid:DXImageTransform.Microsoft.Gradient(GradientType="+K+", StartColorStr='"+c.octoHex+"', EndColorStr='"+j.octoHex+"')",a+=g.replace("%start%",c.stop).replace("%end%",i).replace("%filter%",f))))}),J.find(".iris-ie-gradient-shim").remove(),H(a).prependTo(J)}function C(a,f){var e=[];return a="top"===a?"0% 0%,0% 100%,":"0% 100%,100% 100%,",f=B(f),H.each(f,function(d,c){e.push("color-stop("+parseFloat(c.stop)/100+", "+c.color+")")}),"-webkit-gradient(linear,"+a+e.join(",")+")"}function B(a){var j=[],i=[],h=[],g=a.length-1;return H.each(a,function(d,c){var m=c,l=!1,k=c.match(/1?[0-9]{1,2}%$/);k&&(m=c.replace(/\s?1?[0-9]{1,2}%$/,""),l=k.shift()),j.push(m),i.push(l)}),i[0]===!1&&(i[0]="0%"),i[g]===!1&&(i[g]="100%"),i=A(i),H.each(i,function(b){h[b]={color:j[b],stop:i[b]}}),h}function A(I){var q,p,o,n,m=0,l=I.length-1,h=0,a=!1;if(I.length<=2||H.inArray(!1,I)<0){return I}for(;h<I.length-1;){a||I[h]!==!1?a&&I[h]!==!1&&(l=h,h=I.length):(m=h-1,a=!0),h++}for(p=l-m,n=parseInt(I[m].replace("%"),10),q=(parseFloat(I[l].replace("%"))-n)/p,h=m+1,o=1;h<l;){I[h]=n+o*q+"%",o++,h++}return A(I)}var z,y,x,w,v,u,t,s,r;return z='<div class="iris-picker"><div class="iris-picker-inner"><div class="iris-square"><a class="iris-square-value" href="#"><span class="iris-square-handle ui-slider-handle"></span></a><div class="iris-square-inner iris-square-horiz"></div><div class="iris-square-inner iris-square-vert"></div></div><div class="iris-slider iris-strip"><div class="iris-slider-offset"></div></div></div></div>',v='.iris-picker{display:block;position:relative}.iris-picker,.iris-picker *{-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}input+.iris-picker{margin-top:4px}.iris-error{background-color:#ffafaf}.iris-border{border-radius:3px;border:1px solid #aaa;width:200px;background-color:#fff}.iris-picker-inner{position:absolute;top:0;right:0;left:0;bottom:0}.iris-border .iris-picker-inner{top:10px;right:10px;left:10px;bottom:10px}.iris-picker .iris-square-inner{position:absolute;left:0;right:0;top:0;bottom:0}.iris-picker .iris-square,.iris-picker .iris-slider,.iris-picker .iris-square-inner,.iris-picker .iris-palette{border-radius:3px;box-shadow:inset 0 0 5px rgba(0,0,0,.4);height:100%;width:12.5%;float:left;margin-right:5%}.iris-only-strip .iris-slider{width:100%}.iris-picker .iris-square{width:76%;margin-right:10%;position:relative}.iris-only-strip .iris-square{display:none}.iris-picker .iris-square-inner{width:auto;margin:0}.iris-ie-9 .iris-square,.iris-ie-9 .iris-slider,.iris-ie-9 .iris-square-inner,.iris-ie-9 .iris-palette{box-shadow:none;border-radius:0}.iris-ie-9 .iris-square,.iris-ie-9 .iris-slider,.iris-ie-9 .iris-palette{outline:1px solid rgba(0,0,0,.1)}.iris-ie-lt9 .iris-square,.iris-ie-lt9 .iris-slider,.iris-ie-lt9 .iris-square-inner,.iris-ie-lt9 .iris-palette{outline:1px solid #aaa}.iris-ie-lt9 .iris-square .ui-slider-handle{outline:1px solid #aaa;background-color:#fff;-ms-filter:"alpha(Opacity=30)"}.iris-ie-lt9 .iris-square .iris-square-handle{background:0 0;border:3px solid #fff;-ms-filter:"alpha(Opacity=50)"}.iris-picker .iris-strip{margin-right:0;position:relative}.iris-picker .iris-strip .ui-slider-handle{position:absolute;background:0 0;margin:0;right:-3px;left:-3px;border:4px solid #aaa;border-width:4px 3px;width:auto;height:6px;border-radius:4px;box-shadow:0 1px 2px rgba(0,0,0,.2);opacity:.9;z-index:5;cursor:ns-resize}.iris-strip-horiz .iris-strip .ui-slider-handle{right:auto;left:auto;bottom:-3px;top:-3px;height:auto;width:6px;cursor:ew-resize}.iris-strip .ui-slider-handle:before{content:" ";position:absolute;left:-2px;right:-2px;top:-3px;bottom:-3px;border:2px solid #fff;border-radius:3px}.iris-picker .iris-slider-offset{position:absolute;top:11px;left:0;right:0;bottom:-3px;width:auto;height:auto;background:transparent;border:0;border-radius:0}.iris-strip-horiz .iris-slider-offset{top:0;bottom:0;right:11px;left:-3px}.iris-picker .iris-square-handle{background:transparent;border:5px solid #aaa;border-radius:50%;border-color:rgba(128,128,128,.5);box-shadow:none;width:12px;height:12px;position:absolute;left:-10px;top:-10px;cursor:move;opacity:1;z-index:10}.iris-picker .ui-state-focus .iris-square-handle{opacity:.8}.iris-picker .iris-square-handle:hover{border-color:#999}.iris-picker .iris-square-value:focus .iris-square-handle{box-shadow:0 0 2px rgba(0,0,0,.75);opacity:.8}.iris-picker .iris-square-handle:hover::after{border-color:#fff}.iris-picker .iris-square-handle::after{position:absolute;bottom:-4px;right:-4px;left:-4px;top:-4px;border:3px solid #f9f9f9;border-color:rgba(255,255,255,.8);border-radius:50%;content:" "}.iris-picker .iris-square-value{width:8px;height:8px;position:absolute}.iris-ie-lt9 .iris-square-value,.iris-mozilla .iris-square-value{width:1px;height:1px}.iris-palette-container{position:absolute;bottom:0;left:0;margin:0;padding:0}.iris-border .iris-palette-container{left:10px;bottom:10px}.iris-picker .iris-palette{margin:0;cursor:pointer}.iris-square-handle,.ui-slider-handle{border:0;outline:0}',t=navigator.userAgent.toLowerCase(),s="Microsoft Internet Explorer"===navigator.appName,r=s?parseFloat(t.match(/msie ([0-9]{1,}[\.0-9]{0,})/)[1]):0,y=s&&r<10,x=!1,w=["-moz-","-webkit-","-o-","-ms-"],y&&r<=7?(H.fn.iris=H.noop,void (H.support.iris=!1)):(H.support.iris=!0,H.fn.gradient=function(){var a=arguments;return this.each(function(){y?D.apply(this,a):H(this).css("backgroundImage",E.apply(this,a))})},H.fn.rainbowGradient=function(a,l){var k,j,i,h;for(a=a||"top",k=H.extend({},{s:100,l:50},l),j="hsl(%h%,"+k.s+"%,"+k.l+"%)",i=0,h=[];i<=360;){h.push(j.replace("%h%",i)),i+=30}return this.each(function(){H(this).gradient(a,h)})},u={options:{color:!1,mode:"hsl",controls:{horiz:"s",vert:"l",strip:"h"},hide:!0,border:!0,target:!1,width:200,palettes:!1,type:"full",slider:"horizontal"},_color:"",_palettes:["#000","#fff","#d33","#d93","#ee2","#81d742","#1e73be","#8224e3"],_inited:!1,_defaultHSLControls:{horiz:"s",vert:"l",strip:"h"},_defaultHSVControls:{horiz:"h",vert:"v",strip:"s"},_scale:{h:360,s:100,l:100,v:100},_create:function(){var a=this,f=a.element,c=a.options.color||f.val();x===!1&&F(),f.is("input")?(a.options.target?a.picker=H(z).appendTo(a.options.target):a.picker=H(z).insertAfter(f),a._addInputListeners(f)):(f.append(z),a.picker=f.find(".iris-picker")),s?9===r?a.picker.addClass("iris-ie-9"):r<=8&&a.picker.addClass("iris-ie-lt9"):t.indexOf("compatible")<0&&t.indexOf("khtml")<0&&t.match(/mozilla/)&&a.picker.addClass("iris-mozilla"),a.options.palettes&&a._addPalettes(),a.onlySlider="hue"===a.options.type,a.horizontalSlider=a.onlySlider&&"horizontal"===a.options.slider,a.onlySlider&&(a.options.controls.strip="h",c||(c="hsl(10,100,50)")),a._color=new Color(c).setHSpace(a.options.mode),a.options.color=a._color.toString(),a.controls={square:a.picker.find(".iris-square"),squareDrag:a.picker.find(".iris-square-value"),horiz:a.picker.find(".iris-square-horiz"),vert:a.picker.find(".iris-square-vert"),strip:a.picker.find(".iris-strip"),stripSlider:a.picker.find(".iris-strip .iris-slider-offset")},"hsv"===a.options.mode&&a._has("l",a.options.controls)?a.options.controls=a._defaultHSVControls:"hsl"===a.options.mode&&a._has("v",a.options.controls)&&(a.options.controls=a._defaultHSLControls),a.hue=a._color.h(),a.options.hide&&a.picker.hide(),a.options.border&&!a.onlySlider&&a.picker.addClass("iris-border"),a._initControls(),a.active="external",a._dimensions(),a._change()},_has:function(a,f){var e=!1;return H.each(f,function(b,d){if(a===d){return e=!0,!1}}),e},_addPalettes:function(){var a=H('<div class="iris-palette-container" />'),f=H('<a class="iris-palette" tabindex="0" />'),e=H.isArray(this.options.palettes)?this.options.palettes:this._palettes;this.picker.find(".iris-palette-container").length&&(a=this.picker.find(".iris-palette-container").detach().html("")),H.each(e,function(b,c){f.clone().data("color",c).css("backgroundColor",c).appendTo(a).height(10).width(10)}),this.picker.append(a)},_paint:function(){var b=this;b.horizontalSlider?b._paintDimension("left","strip"):b._paintDimension("top","strip"),b._paintDimension("top","vert"),b._paintDimension("left","horiz")},_paintDimension:function(I,q){var p,o=this,n=o._color,m=o.options.mode,l=o._getHSpaceColor(),k=o.controls[q],j=o.options.controls;if(q!==o.active&&("square"!==o.active||"strip"===q)){switch(j[q]){case"h":if("hsv"===m){switch(l=n.clone(),q){case"horiz":l[j.vert](100);break;case"vert":l[j.horiz](100);break;case"strip":l.setHSpace("hsl")}p=l.toHsl()}else{p="strip"===q?{s:l.s,l:l.l}:{s:100,l:l.l}}k.rainbowGradient(I,p);break;case"s":"hsv"===m?"vert"===q?p=[n.clone().a(0).s(0).toCSS("rgba"),n.clone().a(1).s(0).toCSS("rgba")]:"strip"===q?p=[n.clone().s(100).toCSS("hsl"),n.clone().s(0).toCSS("hsl")]:"horiz"===q&&(p=["#fff","hsl("+l.h+",100%,50%)"]):p="vert"===q&&"h"===o.options.controls.horiz?["hsla(0, 0%, "+l.l+"%, 0)","hsla(0, 0%, "+l.l+"%, 1)"]:["hsl("+l.h+",0%,50%)","hsl("+l.h+",100%,50%)"],k.gradient(I,p);break;case"l":p="strip"===q?["hsl("+l.h+",100%,100%)","hsl("+l.h+", "+l.s+"%,50%)","hsl("+l.h+",100%,0%)"]:["#fff","rgba(255,255,255,0) 50%","rgba(0,0,0,0) 50%","rgba(0,0,0,1)"],k.gradient(I,p);break;case"v":p="strip"===q?[n.clone().v(100).toCSS(),n.clone().v(0).toCSS()]:["rgba(0,0,0,0)","#000"],k.gradient(I,p)}}},_getHSpaceColor:function(){return"hsv"===this.options.mode?this._color.toHsv():this._color.toHsl()},_stripOnlyDimensions:function(){var e=this,d=this.options.width,f=0.12*d;e.horizontalSlider?e.picker.css({width:d,height:f}).addClass("iris-only-strip iris-strip-horiz"):e.picker.css({width:f,height:d}).addClass("iris-only-strip iris-strip-vert")},_dimensions:function(U){if("hue"===this.options.type){return this._stripOnlyDimensions()}var T,S,R,Q,P=this,O=P.options,N=P.controls,M=N.square,L=P.picker.find(".iris-strip"),K="77.5%",J="12%",I=20,q=O.border?O.width-I:O.width,a=H.isArray(O.palettes)?O.palettes.length:P._palettes.length;return U&&(M.css("width",""),L.css("width",""),P.picker.css({width:"",height:""})),K=q*(parseFloat(K)/100),J=q*(parseFloat(J)/100),T=O.border?K+I:K,M.width(K).height(K),L.height(K).width(J),P.picker.css({width:O.width,height:T}),O.palettes?(S=2*K/100,Q=K-(a-1)*S,R=Q/a,P.picker.find(".iris-palette").each(function(d){var e=0===d?0:S;H(this).css({width:R,height:R,marginLeft:e})}),P.picker.css("paddingBottom",R+S),void L.height(R+S+K)):P.picker.css("paddingBottom","")},_addInputListeners:function(f){var e=this,h=100,g=function(i){var b=new Color(f.val()),a=f.val().replace(/^#/,"");f.removeClass("iris-error"),b.error?""!==a&&f.addClass("iris-error"):b.toString()!==e._color.toString()&&("keyup"===i.type&&a.match(/^[0-9a-fA-F]{3}$/)||e._setOption("color",b.toString()))};f.on("change",g).on("keyup",e._debounce(g,h)),e.options.hide&&f.one("focus",function(){e.show()})},_initControls:function(){var a=this,l=a.controls,k=l.square,j=a.options.controls,i=a._scale[j.strip],h=a.horizontalSlider?"horizontal":"vertical";l.stripSlider.slider({orientation:h,max:i,slide:function(b,d){a.active="strip","h"===j.strip&&"vertical"===h&&(d.value=i-d.value),a._color[j.strip](d.value),a._change.apply(a,arguments)}}),l.squareDrag.draggable({containment:l.square.find(".iris-square-inner"),zIndex:1000,cursor:"move",drag:function(b,d){a._squareDrag(b,d)},start:function(){k.addClass("iris-dragging"),H(this).addClass("ui-state-focus")},stop:function(){k.removeClass("iris-dragging"),H(this).removeClass("ui-state-focus")}}).on("mousedown mouseup",function(e){var b="ui-state-focus";e.preventDefault(),"mousedown"===e.type?(a.picker.find("."+b).removeClass(b).blur(),H(this).addClass(b).focus()):H(this).removeClass(b)}).on("keydown",function(b){var o=l.square,n=l.squareDrag,m=n.position(),c=a.options.width/100;switch(b.altKey&&(c*=10),b.keyCode){case 37:m.left-=c;break;case 38:m.top-=c;break;case 39:m.left+=c;break;case 40:m.top+=c;break;default:return !0}m.left=Math.max(0,Math.min(m.left,o.width())),m.top=Math.max(0,Math.min(m.top,o.height())),n.css(m),a._squareDrag(b,{position:m}),b.preventDefault()}),k.mousedown(function(g){var f,b;1===g.which&&H(g.target).is("div")&&(f=a.controls.square.offset(),b={top:g.pageY-f.top,left:g.pageX-f.left},g.preventDefault(),a._squareDrag(g,{position:b}),g.target=a.controls.squareDrag.get(0),a.controls.squareDrag.css(b).trigger(g))}),a.options.palettes&&a._paletteListeners()},_paletteListeners:function(){var a=this;a.picker.find(".iris-palette-container").on("click.palette",".iris-palette",function(){a._color.fromCSS(H(this).data("color")),a.active="external",a._change()}).on("keydown.palette",".iris-palette",function(c){return 13!==c.keyCode&&32!==c.keyCode||(c.stopPropagation(),void H(this).click())})},_squareDrag:function(i,h){var n=this,m=n.options.controls,l=n._squareDimensions(),k=Math.round((l.h-h.position.top)/l.h*n._scale[m.vert]),j=n._scale[m.horiz]-Math.round((l.w-h.position.left)/l.w*n._scale[m.horiz]);n._color[m.horiz](j)[m.vert](k),n.active="square",n._change.apply(n,arguments)},_setOption:function(a,p){var o,n,m,l=this,k=l.options[a],j=!1;switch(l.options[a]=p,a){case"color":l.onlySlider?(p=parseInt(p,10),p=isNaN(p)||p<0||p>359?k:"hsl("+p+",100,50)",l.options.color=l.options[a]=p,l._color=new Color(p).setHSpace(l.options.mode),l.active="external",l._change()):(p=""+p,o=p.replace(/^#/,""),n=new Color(p).setHSpace(l.options.mode),n.error?l.options[a]=k:(l._color=n,l.options.color=l.options[a]=l._color.toString(),l.active="external",l._change()));break;case"palettes":j=!0,p?l._addPalettes():l.picker.find(".iris-palette-container").remove(),k||l._paletteListeners();break;case"width":j=!0;break;case"border":j=!0,m=p?"addClass":"removeClass",l.picker[m]("iris-border");break;case"mode":case"controls":if(k===p){return}return m=l.element,k=l.options,k.hide=!l.picker.is(":visible"),l.destroy(),l.picker.remove(),H(l.element).iris(k)}j&&l._dimensions(!0)},_squareDimensions:function(b){var h,g,f=this.controls.square;return b!==G&&f.data("dimensions")?f.data("dimensions"):(g=this.controls.squareDrag,h={w:f.width(),h:f.height()},f.data("dimensions",h),h)},_isNonHueControl:function(d,c){return"square"===d&&"h"===this.options.controls.strip||"external"!==c&&("h"!==c||"strip"!==d)},_change:function(){var a=this,n=a.controls,m=a._getHSpaceColor(),l=["square","strip"],k=a.options.controls,j=k[a.active]||"external",i=a.hue;"strip"===a.active?l=[]:"external"!==a.active&&l.pop(),H.each(l,function(b,o){var f,d,c;if(o!==a.active){switch(o){case"strip":f="h"!==k.strip||a.horizontalSlider?m[k.strip]:a._scale[k.strip]-m[k.strip],n.stripSlider.slider("value",f);break;case"square":d=a._squareDimensions(),c={left:m[k.horiz]/a._scale[k.horiz]*d.w,top:d.h-m[k.vert]/a._scale[k.vert]*d.h},a.controls.squareDrag.css(c)}}}),m.h!==i&&a._isNonHueControl(a.active,j)&&a._color.h(i),a.hue=a._color.h(),a.options.color=a._color.toString(),a._inited&&a._trigger("change",{type:a.active},{color:a._color}),a.element.is(":input")&&!a._color.error&&(a.element.removeClass("iris-error"),a.onlySlider?a.element.val()!==a.hue&&a.element.val(a.hue):a.element.val()!==a._color.toString()&&a.element.val(a._color.toString())),a._paint(),a._inited=!0,a.active=!1},_debounce:function(g,f,j){var i,h;return function(){var d,c,b=this,a=arguments;return d=function(){i=null,j||(h=g.apply(b,a))},c=j&&!i,clearTimeout(i),i=setTimeout(d,f),c&&(h=g.apply(b,a)),h}},show:function(){this.picker.show()},hide:function(){this.picker.hide()},toggle:function(){this.picker.toggle()},color:function(b){return b===!0?this._color.clone():b===G?this._color.toString():void this.option("color",b)}},H.widget("a8c.iris",u),void H('<style id="iris-css">'+v+"</style>").appendTo("head"))}(jQuery),function(g,f){var j=function(d,c){return this instanceof j?this._init(d,c):new j(d,c)};j.fn=j.prototype={_color:0,_alpha:1,error:!1,_hsl:{h:0,s:0,l:0},_hsv:{h:0,s:0,v:0},_hSpace:"hsl",_init:function(b){var d="noop";switch(typeof b){case"object":return b.a!==f&&this.a(b.a),d=b.r!==f?"fromRgb":b.l!==f?"fromHsl":b.v!==f?"fromHsv":d,this[d](b);case"string":return this.fromCSS(b);case"number":return this.fromInt(parseInt(b,10))}return this},_error:function(){return this.error=!0,this},clone:function(){for(var e=new j(this.toInt()),c=["_alpha","_hSpace","_hsl","_hsv","error"],k=c.length-1;k>=0;k--){e[c[k]]=this[c[k]]}return e},setHSpace:function(b){return this._hSpace="hsv"===b?b:"hsl",this},noop:function(){return this},fromCSS:function(k){var e,m=/^(rgb|hs(l|v))a?\(/;if(this.error=!1,k=k.replace(/^\s+/,"").replace(/\s+$/,"").replace(/;$/,""),k.match(m)&&k.match(/\)$/)){if(e=k.replace(/(\s|%)/g,"").replace(m,"").replace(/,?\);?$/,"").split(","),e.length<3){return this._error()}if(4===e.length&&(this.a(parseFloat(e.pop())),this.error)){return this}for(var l=e.length-1;l>=0;l--){if(e[l]=parseInt(e[l],10),isNaN(e[l])){return this._error()}}return k.match(/^rgb/)?this.fromRgb({r:e[0],g:e[1],b:e[2]}):k.match(/^hsv/)?this.fromHsv({h:e[0],s:e[1],v:e[2]}):this.fromHsl({h:e[0],s:e[1],l:e[2]})}return this.fromHex(k)},fromRgb:function(b,d){return"object"!=typeof b||b.r===f||b.g===f||b.b===f?this._error():(this.error=!1,this.fromInt(parseInt((b.r<<16)+(b.g<<8)+b.b,10),d))},fromHex:function(b){return b=b.replace(/^#/,"").replace(/^0x/,""),3===b.length&&(b=b[0]+b[0]+b[1]+b[1]+b[2]+b[2]),this.error=!/^[0-9A-F]{6}$/i.test(b),this.fromInt(parseInt(b,16))},fromHsl:function(r){var q,p,o,n,m,l,k,b;return"object"!=typeof r||r.h===f||r.s===f||r.l===f?this._error():(this._hsl=r,this._hSpace="hsl",l=r.h/360,k=r.s/100,b=r.l/100,0===k?q=p=o=b:(n=b<0.5?b*(1+k):b+k-b*k,m=2*b-n,q=this.hue2rgb(m,n,l+1/3),p=this.hue2rgb(m,n,l),o=this.hue2rgb(m,n,l-1/3)),this.fromRgb({r:255*q,g:255*p,b:255*o},!0))},fromHsv:function(x){var w,v,u,t,s,r,q,p,o,n,b;if("object"!=typeof x||x.h===f||x.s===f||x.v===f){return this._error()}switch(this._hsv=x,this._hSpace="hsv",w=x.h/360,v=x.s/100,u=x.v/100,q=Math.floor(6*w),p=6*w-q,o=u*(1-v),n=u*(1-p*v),b=u*(1-(1-p)*v),q%6){case 0:t=u,s=b,r=o;break;case 1:t=n,s=u,r=o;break;case 2:t=o,s=u,r=b;break;case 3:t=o,s=n,r=u;break;case 4:t=b,s=o,r=u;break;case 5:t=u,s=o,r=n}return this.fromRgb({r:255*t,g:255*s,b:255*r},!0)},fromInt:function(b,d){return this._color=parseInt(b,10),isNaN(this._color)&&(this._color=0),this._color>16777215?this._color=16777215:this._color<0&&(this._color=0),d===f&&(this._hsv.h=this._hsv.s=this._hsl.h=this._hsl.s=0),this},hue2rgb:function(e,d,k){return k<0&&(k+=1),k>1&&(k-=1),k<1/6?e+6*(d-e)*k:k<0.5?d:k<2/3?e+(d-e)*(2/3-k)*6:e},toString:function(){var d=parseInt(this._color,10).toString(16);if(this.error){return""}if(d.length<6){for(var c=6-d.length-1;c>=0;c--){d="0"+d}}return"#"+d},toCSS:function(k,e){switch(k=k||"hex",e=parseFloat(e||this._alpha),k){case"rgb":case"rgba":var m=this.toRgb();return e<1?"rgba( "+m.r+", "+m.g+", "+m.b+", "+e+" )":"rgb( "+m.r+", "+m.g+", "+m.b+" )";case"hsl":case"hsla":var l=this.toHsl();return e<1?"hsla( "+l.h+", "+l.s+"%, "+l.l+"%, "+e+" )":"hsl( "+l.h+", "+l.s+"%, "+l.l+"% )";default:return this.toString()}},toRgb:function(){return{r:255&this._color>>16,g:255&this._color>>8,b:255&this._color}},toHsl:function(){var t,s,r=this.toRgb(),q=r.r/255,p=r.g/255,o=r.b/255,n=Math.max(q,p,o),m=Math.min(q,p,o),l=(n+m)/2;if(n===m){t=s=0}else{var k=n-m;switch(s=l>0.5?k/(2-n-m):k/(n+m),n){case q:t=(p-o)/k+(p<o?6:0);break;case p:t=(o-q)/k+2;break;case o:t=(q-p)/k+4}t/=6}return t=Math.round(360*t),0===t&&this._hsl.h!==t&&(t=this._hsl.h),s=Math.round(100*s),0===s&&this._hsl.s&&(s=this._hsl.s),{h:t,s:s,l:Math.round(100*l)}},toHsv:function(){var t,s,r=this.toRgb(),q=r.r/255,p=r.g/255,o=r.b/255,n=Math.max(q,p,o),m=Math.min(q,p,o),l=n,k=n-m;if(s=0===n?0:k/n,n===m){t=s=0}else{switch(n){case q:t=(p-o)/k+(p<o?6:0);break;case p:t=(o-q)/k+2;break;case o:t=(q-p)/k+4}t/=6}return t=Math.round(360*t),0===t&&this._hsv.h!==t&&(t=this._hsv.h),s=Math.round(100*s),0===s&&this._hsv.s&&(s=this._hsv.s),{h:t,s:s,v:Math.round(100*l)}},toInt:function(){return this._color},toIEOctoHex:function(){var d=this.toString(),c=parseInt(255*this._alpha,10).toString(16);return 1===c.length&&(c="0"+c),"#"+c+d.replace(/^#/,"")},toLuminosity:function(){var k=this.toRgb(),e={};for(var m in k){if(k.hasOwnProperty(m)){var l=k[m]/255;e[m]=l<=0.03928?l/12.92:Math.pow((l+0.055)/1.055,2.4)}}return 0.2126*e.r+0.7152*e.g+0.0722*e.b},getDistanceLuminosityFrom:function(e){if(!(e instanceof j)){throw"getDistanceLuminosityFrom requires a Color object"}var c=this.toLuminosity(),k=e.toLuminosity();return c>k?(c+0.05)/(k+0.05):(k+0.05)/(c+0.05)},getMaxContrastColor:function(){var e=this.getDistanceLuminosityFrom(new j("#000")),c=this.getDistanceLuminosityFrom(new j("#fff")),k=e>=c?"#000":"#fff";return new j(k)},getReadableContrastingColor:function(b,o){if(!(b instanceof j)){return this}var n,m,l,k=o===f?5:o,c=b.getDistanceLuminosityFrom(this);if(c>=k){return this}if(n=b.getMaxContrastColor(),m=n.getDistanceLuminosityFrom(b),m<=k){return n}for(l=0===n.toInt()?-1:1;c<k&&(this.l(l,!0),c=this.getDistanceLuminosityFrom(b),0!==this._color&&16777215!==this._color);){}return this},a:function(b){if(b===f){return this._alpha}var d=parseFloat(b);return isNaN(d)?this._error():(this._alpha=d,this)},darken:function(b){return b=b||5,this.l(-b,!0)},lighten:function(b){return b=b||5,this.l(b,!0)},saturate:function(b){return b=b||15,this.s(b,!0)},desaturate:function(b){return b=b||15,this.s(-b,!0)},toGrayscale:function(){return this.setHSpace("hsl").s(0)},getComplement:function(){return this.h(180,!0)},getSplitComplement:function(d){d=d||1;var c=180+30*d;return this.h(c,!0)},getAnalog:function(d){d=d||1;var c=30*d;return this.h(c,!0)},getTetrad:function(d){d=d||1;var c=60*d;return this.h(c,!0)},getTriad:function(d){d=d||1;var c=120*d;return this.h(c,!0)},_partial:function(b){var d=i[b];return function(k,c){var a=this._spaceFunc("to",d.space);return k===f?a[b]:(c===!0&&(k=a[b]+k),d.mod&&(k%=d.mod),d.range&&(k=k<d.range[0]?d.range[0]:k>d.range[1]?d.range[1]:k),a[b]=k,this._spaceFunc("from",d.space,a))}},_spaceFunc:function(l,k,o){var n=k||this._hSpace,m=l+n.charAt(0).toUpperCase()+n.substr(1);return this[m](o)}};var i={h:{mod:360},s:{range:[0,100]},l:{space:"hsl",range:[0,100]},v:{space:"hsv",range:[0,100]},r:{space:"rgb",range:[0,255]},g:{space:"rgb",range:[0,255]},b:{space:"rgb",range:[0,255]}};for(var h in i){i.hasOwnProperty(h)&&(j.fn[h]=j.fn._partial(h))}"object"==typeof exports?module.exports=j:g.Color=j}(this);