(function(k,l){var m,i='<a tabindex="0" class="wp-color-result" />',n='<div class="wp-picker-holder" />',h='<div class="wp-picker-container" />',j='<input type="button" class="button button-small hidden" />';m={options:{defaultColor:false,change:false,clear:false,hide:true,palettes:true,width:255,mode:"hsv",type:"full",slider:"horizontal"},_createHueOnly:function(){var b=this,a=b.element,c;a.hide();c="hsl("+a.val()+", 100, 50)";a.iris({mode:"hsl",type:"hue",hide:false,color:c,change:function(e,d){if(k.isFunction(b.options.change)){b.options.change.call(this,e,d)}},width:b.options.width,slider:b.options.slider})},_create:function(){if(!k.support.iris){return}var b=this,a=b.element;k.extend(b.options,a.data());if(b.options.type==="hue"){return b._createHueOnly()}b.close=k.proxy(b.close,b);b.initialValue=a.val();a.addClass("wp-color-picker").hide().wrap(h);b.wrap=a.parent();b.toggler=k(i).insertBefore(a).css({backgroundColor:b.initialValue}).attr("title",wpColorPickerL10n.pick).attr("data-current",wpColorPickerL10n.current);b.pickerContainer=k(n).insertAfter(a);b.button=k(j);if(b.options.defaultColor){b.button.addClass("wp-picker-default").val(wpColorPickerL10n.defaultString)}else{b.button.addClass("wp-picker-clear").val(wpColorPickerL10n.clear)}a.wrap('<span class="wp-picker-input-wrap" />').after(b.button);a.iris({target:b.pickerContainer,hide:b.options.hide,width:b.options.width,mode:b.options.mode,palettes:b.options.palettes,change:function(d,c){b.toggler.css({backgroundColor:c.color.toString()});if(k.isFunction(b.options.change)){b.options.change.call(this,d,c)}}});a.val(b.initialValue);b._addListeners();if(!b.options.hide){b.toggler.click()}},_addListeners:function(){var a=this;a.wrap.on("click.wpcolorpicker",function(b){b.stopPropagation()});a.toggler.click(function(){if(a.toggler.hasClass("wp-picker-open")){a.close()}else{a.open()}});a.element.change(function(c){var d=k(this),b=d.val();if(b===""||b==="#"){a.toggler.css("backgroundColor","");if(k.isFunction(a.options.clear)){a.options.clear.call(this,c)}}});a.toggler.on("keyup",function(b){if(b.keyCode===13||b.keyCode===32){b.preventDefault();a.toggler.trigger("click").next().focus()}});a.button.click(function(b){var c=k(this);if(c.hasClass("wp-picker-clear")){a.element.val("");a.toggler.css("backgroundColor","");if(k.isFunction(a.options.clear)){a.options.clear.call(this,b)}}else{if(c.hasClass("wp-picker-default")){a.element.val(a.options.defaultColor).change()}}})},open:function(){this.element.show().iris("toggle").focus();this.button.removeClass("hidden");this.wrap.addClass("wp-picker-active");this.toggler.addClass("wp-picker-open");k("body").trigger("click.wpcolorpicker").on("click.wpcolorpicker",this.close)},close:function(){this.element.hide().iris("toggle");this.button.addClass("hidden");this.wrap.removeClass("wp-picker-active");this.toggler.removeClass("wp-picker-open");k("body").off("click.wpcolorpicker",this.close)},color:function(a){if(a===l){return this.element.iris("option","color")}this.element.iris("option","color",a)},defaultColor:function(a){if(a===l){return this.options.defaultColor}this.options.defaultColor=a}};k.widget("wp.wpColorPicker",m)}(jQuery));