(function(h,v,B,z){var f=h.encodeURIComponent,b=v.createElement("form"),e=v.getElementsByTagName("head")[0],G="_press_this_app",D=true,F,j,I,a,c,A,k,d,H;if(!z){return}if(B.match(/^https?:/)){z+="&u="+f(B);if(B.match(/^https:/)&&z.match(/^http:/)){D=false}}else{top.location.href=z;return}if(h.getSelection){I=h.getSelection()+""}else{if(v.getSelection){I=v.getSelection()+""}else{if(v.selection){I=v.selection.createRange().text||""}}}z+="&buster="+(new Date().getTime());if(!D){if(v.title){z+="&t="+f(v.title.substr(0,256))}if(I){z+="&s="+f(I.substr(0,512))}}F=h.outerWidth||v.documentElement.clientWidth||600;j=h.outerHeight||v.documentElement.clientHeight||700;F=(F<800||F>5000)?600:(F*0.7);j=(j<800||j>3000)?700:(j*0.9);if(!D){h.open(z,G,"location,resizable,scrollbars,width="+F+",height="+j);return}function o(m,n){if(typeof n==="undefined"){return}var g=v.createElement("input");g.name=m;g.value=n;g.type="hidden";b.appendChild(g)}a=e.getElementsByTagName("meta")||[];for(var x=0;x<a.length;x++){if(x>200){break}var r=a[x],l=r.getAttribute("name"),u=r.getAttribute("property"),t=r.getAttribute("content");if(t){if(l){o("_meta["+l+"]",t)}else{if(u){o("_meta["+u+"]",t)}}}}c=e.getElementsByTagName("link")||[];for(var i=0;i<c.length;i++){if(i>=50){break}var C=c[i],E=C.getAttribute("rel");if(E==="canonical"||E==="icon"||E==="shortlink"){o("_links["+E+"]",C.getAttribute("href"))}}if(v.body.getElementsByClassName){A=v.body.getElementsByClassName("hfeed")[0]}A=v.getElementById("content")||A||v.body;k=A.getElementsByTagName("img")||[];for(var w=0;w<k.length;w++){if(w>=100){break}H=k[w];if(H.src.indexOf("avatar")>-1||H.className.indexOf("avatar")>-1||(H.width&&H.width<256)||(H.height&&H.height<128)){continue}o("_images[]",H.src)}d=v.body.getElementsByTagName("iframe")||[];for(var s=0;s<d.length;s++){if(s>=50){break}o("_embeds[]",d[s].src)}if(v.title){o("t",v.title)}if(I){o("s",I)}b.setAttribute("method","POST");b.setAttribute("action",z);b.setAttribute("target",G);b.setAttribute("style","display: none;");h.open("about:blank",G,"location,resizable,scrollbars,width="+F+",height="+j);v.body.appendChild(b);b.submit()})(window,document,top.location.href,window.pt_url);