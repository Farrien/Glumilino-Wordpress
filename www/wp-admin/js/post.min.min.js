var commentsBox,WPSetThumbnailHTML,WPSetThumbnailID,WPRemoveThumbnail,wptitlehint,makeSlugeditClickable,editPermalink;makeSlugeditClickable=editPermalink=function(){};window.wp=window.wp||{};(function(d){var c=false;commentsBox={st:0,get:function(b,g){var h=this.st,a;if(!g){g=20}this.st+=g;this.total=b;d("#commentsdiv .spinner").addClass("is-active");a={action:"get-comments",mode:"single",_ajax_nonce:d("#add_comment_nonce").val(),p:d("#post_ID").val(),start:h,number:g};d.post(ajaxurl,a,function(e){e=wpAjax.parseAjaxResponse(e);d("#commentsdiv .widefat").show();d("#commentsdiv .spinner").removeClass("is-active");if("object"==typeof e&&e.responses[0]){d("#the-comment-list").append(e.responses[0].data);theList=theExtraList=null;d("a[className*=':']").unbind();if(commentsBox.st>commentsBox.total){d("#show-comments").hide()}else{d("#show-comments").show().children("a").html(postL10n.showcomm)}return}else{if(1==e){d("#show-comments").html(postL10n.endcomm);return}}d("#the-comment-list").append('<tr><td colspan="2">'+wpAjax.broken+"</td></tr>")});return false},load:function(a){this.st=jQuery("#the-comment-list tr.comment:visible").length;this.get(a)}};WPSetThumbnailHTML=function(a){d(".inside","#postimagediv").html(a)};WPSetThumbnailID=function(a){var b=d('input[value="_thumbnail_id"]',"#list-table");if(b.length>0){d("#meta\\["+b.attr("id").match(/[0-9]+/)+"\\]\\[value\\]").text(a)}};WPRemoveThumbnail=function(a){d.post(ajaxurl,{action:"set-post-thumbnail",post_id:d("#post_ID").val(),thumbnail_id:-1,_ajax_nonce:a,cookie:encodeURIComponent(document.cookie)},function(b){if(b=="0"){alert(setPostThumbnailL10n.error)}else{WPSetThumbnailHTML(b)}})};d(document).on("heartbeat-send.refresh-lock",function(a,e){var i=d("#active_post_lock").val(),j=d("#post_ID").val(),b={};if(!j||!d("#post-lock-dialog").length){return}b.post_id=j;if(i){b.lock=i}e["wp-refresh-post-lock"]=b}).on("heartbeat-tick.refresh-lock",function(b,e){var a,i,j;if(e["wp-refresh-post-lock"]){a=e["wp-refresh-post-lock"];if(a.lock_error){i=d("#post-lock-dialog");if(i.length&&!i.is(":visible")){if(wp.autosave){d(document).one("heartbeat-tick",function(){wp.autosave.server.suspend();i.removeClass("saving").addClass("saved");d(window).off("beforeunload.edit-post")});i.addClass("saving");wp.autosave.server.triggerSave()}if(a.lock_error.avatar_src){j=d('<img class="avatar avatar-64 photo" width="64" height="64" alt="" />').attr("src",a.lock_error.avatar_src.replace(/&amp;/g,"&"));i.find("div.post-locked-avatar").empty().append(j)}i.show().find(".currently-editing").text(a.lock_error.text);i.find(".wp-tab-first").focus()}}else{if(a.new_lock){d("#active_post_lock").val(a.new_lock)}}}}).on("before-autosave.update-post-slug",function(){c=document.activeElement&&document.activeElement.id==="title"}).on("after-autosave.update-post-slug",function(){if(!d("#edit-slug-box > *").length&&!c){d.post(ajaxurl,{action:"sample-permalink",post_id:d("#post_ID").val(),new_title:d("#title").val(),samplepermalinknonce:d("#samplepermalinknonce").val()},function(a){if(a!="-1"){d("#edit-slug-box").html(a)}})}})}(jQuery));(function(h){var f,e;function g(){f=false;window.clearTimeout(e);e=window.setTimeout(function(){f=true},300000)}h(document).on("heartbeat-send.wp-refresh-nonces",function(b,c){var d,a=h("#wp-auth-check-wrap");if(f||(a.length&&!a.hasClass("hidden"))){if((d=h("#post_ID").val())&&h("#_wpnonce").val()){c["wp-refresh-post-nonces"]={post_id:d}}}}).on("heartbeat-tick.wp-refresh-nonces",function(a,b){var c=b["wp-refresh-post-nonces"];if(c){g();if(c.replace){h.each(c.replace,function(j,d){h("#"+j).val(d)})}if(c.heartbeatNonce){window.heartbeatSettings.nonce=c.heartbeatNonce}}}).ready(function(){g()})}(jQuery));jQuery(document).ready(function(H){var D,A,z,F,B,s="",x=H("#content"),u=H(document),G=H("#post_ID").val()||0,J=H("#submitpost"),y=true,t=H("#post-visibility-select"),w=H("#timestampdiv"),C=H("#post-status-select"),E=window.navigator.platform?window.navigator.platform.indexOf("Mac")!==-1:false;postboxes.add_postbox_toggles(pagenow);window.name="";H("#post-lock-dialog .notification-dialog").on("keydown",function(a){if(a.which!=9){return}var b=H(a.target);if(b.hasClass("wp-tab-first")&&a.shiftKey){H(this).find(".wp-tab-last").focus();a.preventDefault()}else{if(b.hasClass("wp-tab-last")&&!a.shiftKey){H(this).find(".wp-tab-first").focus();a.preventDefault()}}}).filter(":visible").find(".wp-tab-first").focus();if(wp.heartbeat&&H("#post-lock-dialog").length){wp.heartbeat.interval(15)}z=J.find(":submit, a.submitdelete, #post-preview").on("click.edit-post",function(b){var a=H(this);if(a.hasClass("disabled")){b.preventDefault();return}if(a.hasClass("submitdelete")||a.is("#post-preview")){return}H("form#post").off("submit.edit-post").on("submit.edit-post",function(c){if(c.isDefaultPrevented()){return}if(wp.autosave){wp.autosave.server.suspend()}if(typeof commentReply!=="undefined"){if(!commentReply.discardCommentChanges()){return false}commentReply.close()}y=false;H(window).off("beforeunload.edit-post");z.addClass("disabled");if(a.attr("id")==="publish"){J.find("#major-publishing-actions .spinner").addClass("is-active")}else{J.find("#minor-publishing .spinner").addClass("is-active")}})});H("#post-preview").on("click.post-preview",function(d){var a=H(this),f=H("form#post"),c=H("input#wp-preview"),b=a.attr("target")||"wp-preview",e=navigator.userAgent.toLowerCase();d.preventDefault();if(a.hasClass("disabled")){return}if(wp.autosave){wp.autosave.server.tempBlockSave()}c.val("dopreview");f.attr("target",b).submit().attr("target","");if(e.indexOf("safari")!==-1&&e.indexOf("chrome")===-1){f.attr("action",function(h,g){return g+"?t="+(new Date()).getTime()})}c.val("")});H("#title").on("keydown.editor-focus",function(a){var b;if(a.keyCode===9&&!a.ctrlKey&&!a.altKey&&!a.shiftKey){b=typeof tinymce!="undefined"&&tinymce.get("content");if(b&&!b.isHidden()){b.focus()}else{if(x.length){x.focus()}else{return}}a.preventDefault()}});if(H("#auto_draft").val()){H("#title").blur(function(){var a;if(!this.value||H("#edit-slug-box > *").length){return}H("form#post").one("submit",function(){a=true});window.setTimeout(function(){if(!a&&wp.autosave){wp.autosave.server.triggerSave()}},200)})}u.on("autosave-disable-buttons.edit-post",function(){z.addClass("disabled")}).on("autosave-enable-buttons.edit-post",function(){if(!wp.heartbeat||!wp.heartbeat.hasConnectionError()){z.removeClass("disabled")}}).on("before-autosave.edit-post",function(){H(".autosave-message").text(postL10n.savingText)}).on("after-autosave.edit-post",function(b,a){H(".autosave-message").text(a.message);if(H(document.body).hasClass("post-new-php")){H(".submitbox .submitdelete").show()}});H(window).on("beforeunload.edit-post",function(){var a=typeof tinymce!=="undefined"&&tinymce.get("content");if((a&&!a.isHidden()&&a.isDirty())||(wp.autosave&&wp.autosave.server.postChanged())){return postL10n.saveAlert}}).on("unload.edit-post",function(d){if(!y){return}if(d.target&&d.target.nodeName!="#document"){return}var e=H("#post_ID").val();var a=H("#active_post_lock").val();if(!e||!a){return}var c={action:"wp-remove-post-lock",_wpnonce:H("#_wpnonce").val(),post_ID:e,active_post_lock:a};if(window.FormData&&window.navigator.sendBeacon){var b=new window.FormData();H.each(c,function(f,g){b.append(f,g)});if(window.navigator.sendBeacon(ajaxurl,b)){return}}H.post({async:false,data:c,url:ajaxurl})});if(H("#tagsdiv-post_tag").length){window.tagBox&&window.tagBox.init()}else{H(".meta-box-sortables").children("div.postbox").each(function(){if(this.id.indexOf("tagsdiv-")===0){window.tagBox&&window.tagBox.init();return false}})}H(".categorydiv").each(function(){var b=H(this).attr("id"),c,a,d,f,e;d=b.split("-");d.shift();f=d.join("-");e=f+"_tab";if(f=="category"){e="cats"}H("a","#"+f+"-tabs").click(function(g){g.preventDefault();var h=H(this).attr("href");H(this).parent().addClass("tabs").siblings("li").removeClass("tabs");H("#"+f+"-tabs").siblings(".tabs-panel").hide();H(h).show();if("#"+f+"-all"==h){deleteUserSetting(e)}else{setUserSetting(e,"pop")}});if(getUserSetting(e)){H('a[href="#'+f+'-pop"]',"#"+f+"-tabs").click()}H("#new"+f).one("focus",function(){H(this).val("").removeClass("form-input-tip")});H("#new"+f).keypress(function(g){if(13===g.keyCode){g.preventDefault();H("#"+f+"-add-submit").click()}});H("#"+f+"-add-submit").click(function(){H("#new"+f).focus()});c=function(g){if(!H("#new"+f).val()){return false}g.data+="&"+H(":checked","#"+f+"checklist").serialize();H("#"+f+"-add-submit").prop("disabled",true);return g};a=function(j,g){var h,i=H("#new"+f+"_parent");H("#"+f+"-add-submit").prop("disabled",false);if("undefined"!=g.parsed.responses[0]&&(h=g.parsed.responses[0].supplemental.newcat_parent)){i.before(h);i.remove()}};H("#"+f+"checklist").wpList({alt:"",response:f+"-ajax-response",addBefore:c,addAfter:a});H("#"+f+"-add-toggle").click(function(g){g.preventDefault();H("#"+f+"-adder").toggleClass("wp-hidden-children");H('a[href="#'+f+'-all"]',"#"+f+"-tabs").click();H("#new"+f).focus()});H("#"+f+"checklist, #"+f+"checklist-pop").on("click",'li.popular-category > label input[type="checkbox"]',function(){var i=H(this),g=i.is(":checked"),h=i.val();if(h&&i.parents("#taxonomy-"+f).length){H("#in-"+f+"-"+h+", #in-popular-"+f+"-"+h).prop("checked",g)}})});if(H("#postcustom").length){H("#the-list").wpList({addBefore:function(a){a.data+="&post_id="+H("#post_ID").val();return a},addAfter:function(){H("table#list-table").show()}})}if(H("#submitdiv").length){D=H("#timestamp").html();A=H("#post-visibility-display").html();F=function(){if(t.find("input:radio:checked").val()!="public"){H("#sticky").prop("checked",false);H("#sticky-span").hide()}else{H("#sticky-span").show()}if(t.find("input:radio:checked").val()!="password"){H("#password-span").hide()}else{H("#password-span").show()}};B=function(){if(!w.length){return true}var d,c,j,a,b=H("#post_status"),i=H('option[value="publish"]',b),k=H("#aa").val(),f=H("#mm").val(),e=H("#jj").val(),g=H("#hh").val(),h=H("#mn").val();d=new Date(k,f-1,e,g,h);c=new Date(H("#hidden_aa").val(),H("#hidden_mm").val()-1,H("#hidden_jj").val(),H("#hidden_hh").val(),H("#hidden_mn").val());j=new Date(H("#cur_aa").val(),H("#cur_mm").val()-1,H("#cur_jj").val(),H("#cur_hh").val(),H("#cur_mn").val());if(d.getFullYear()!=k||(1+d.getMonth())!=f||d.getDate()!=e||d.getMinutes()!=h){w.find(".timestamp-wrap").addClass("form-invalid");return false}else{w.find(".timestamp-wrap").removeClass("form-invalid")}if(d>j&&H("#original_post_status").val()!="future"){a=postL10n.publishOnFuture;H("#publish").val(postL10n.schedule)}else{if(d<=j&&H("#original_post_status").val()!="publish"){a=postL10n.publishOn;H("#publish").val(postL10n.publish)}else{a=postL10n.publishOnPast;H("#publish").val(postL10n.update)}}if(c.toUTCString()==d.toUTCString()){H("#timestamp").html(D)}else{H("#timestamp").html("\n"+a+" <b>"+postL10n.dateFormat.replace("%1$s",H('option[value="'+f+'"]',"#mm").attr("data-text")).replace("%2$s",parseInt(e,10)).replace("%3$s",k).replace("%4$s",("00"+g).slice(-2)).replace("%5$s",("00"+h).slice(-2))+"</b> ")}if(t.find("input:radio:checked").val()=="private"){H("#publish").val(postL10n.update);if(0===i.length){b.append('<option value="publish">'+postL10n.privatelyPublished+"</option>")}else{i.html(postL10n.privatelyPublished)}H('option[value="publish"]',b).prop("selected",true);H("#misc-publishing-actions .edit-post-status").hide()}else{if(H("#original_post_status").val()=="future"||H("#original_post_status").val()=="draft"){if(i.length){i.remove();b.val(H("#hidden_post_status").val())}}else{i.html(postL10n.published)}if(b.is(":hidden")){H("#misc-publishing-actions .edit-post-status").show()}}H("#post-status-display").html(H("option:selected",b).text());if(H("option:selected",b).val()=="private"||H("option:selected",b).val()=="publish"){H("#save-post").hide()}else{H("#save-post").show();if(H("option:selected",b).val()=="pending"){H("#save-post").show().val(postL10n.savePending)}else{H("#save-post").show().val(postL10n.saveDraft)}}return true};H("#visibility .edit-visibility").click(function(a){a.preventDefault();if(t.is(":hidden")){F();t.slideDown("fast",function(){t.find('input[type="radio"]').first().focus()});H(this).hide()}});t.find(".cancel-post-visibility").click(function(a){t.slideUp("fast");H("#visibility-radio-"+H("#hidden-post-visibility").val()).prop("checked",true);H("#post_password").val(H("#hidden-post-password").val());H("#sticky").prop("checked",H("#hidden-post-sticky").prop("checked"));H("#post-visibility-display").html(A);H("#visibility .edit-visibility").show().focus();B();a.preventDefault()});t.find(".save-post-visibility").click(function(a){t.slideUp("fast");H("#visibility .edit-visibility").show().focus();B();if(t.find("input:radio:checked").val()!="public"){H("#sticky").prop("checked",false)}if(H("#sticky").prop("checked")){s="Sticky"}else{s=""}H("#post-visibility-display").html(postL10n[t.find("input:radio:checked").val()+s]);a.preventDefault()});t.find("input:radio").change(function(){F()});w.siblings("a.edit-timestamp").click(function(a){if(w.is(":hidden")){w.slideDown("fast",function(){H("input, select",w.find(".timestamp-wrap")).first().focus()});H(this).hide()}a.preventDefault()});w.find(".cancel-timestamp").click(function(a){w.slideUp("fast").siblings("a.edit-timestamp").show().focus();H("#mm").val(H("#hidden_mm").val());H("#jj").val(H("#hidden_jj").val());H("#aa").val(H("#hidden_aa").val());H("#hh").val(H("#hidden_hh").val());H("#mn").val(H("#hidden_mn").val());B();a.preventDefault()});w.find(".save-timestamp").click(function(a){if(B()){w.slideUp("fast");w.siblings("a.edit-timestamp").show().focus()}a.preventDefault()});H("#post").on("submit",function(a){if(!B()){a.preventDefault();w.show();if(wp.autosave){wp.autosave.enableButtons()}H("#publishing-action .spinner").removeClass("is-active")}});C.siblings("a.edit-post-status").click(function(a){if(C.is(":hidden")){C.slideDown("fast",function(){C.find("select").focus()});H(this).hide()}a.preventDefault()});C.find(".save-post-status").click(function(a){C.slideUp("fast").siblings("a.edit-post-status").show().focus();B();a.preventDefault()});C.find(".cancel-post-status").click(function(a){C.slideUp("fast").siblings("a.edit-post-status").show().focus();H("#post_status").val(H("#hidden_post_status").val());B();a.preventDefault()})}function v(){var k,e,a,g,h=0,d=H("#post_name"),m=d.val(),c=H("#sample-permalink"),l=c.html(),f=H("#sample-permalink a").html(),i=H("#edit-slug-buttons"),b=i.html(),j=H("#editable-post-name-full");j.find("img").replaceWith(function(){return this.alt});j=j.html();c.html(f);a=H("#editable-post-name");g=a.html();i.html('<button type="button" class="save button button-small">'+postL10n.ok+'</button> <button type="button" class="cancel button-link">'+postL10n.cancel+"</button>");i.children(".save").click(function(){var n=a.children("input").val();if(n==H("#editable-post-name-full").text()){i.children(".cancel").click();return}H.post(ajaxurl,{action:"sample-permalink",post_id:G,new_slug:n,new_title:H("#title").val(),samplepermalinknonce:H("#samplepermalinknonce").val()},function(o){var p=H("#edit-slug-box");p.html(o);if(p.hasClass("hidden")){p.fadeIn("fast",function(){p.removeClass("hidden")})}i.html(b);c.html(l);d.val(n);H(".edit-slug").focus();wp.a11y.speak(postL10n.permalinkSaved)})});i.children(".cancel").click(function(){H("#view-post-btn").show();a.html(g);i.html(b);c.html(l);d.val(m);H(".edit-slug").focus()});for(k=0;k<j.length;++k){if("%"==j.charAt(k)){h++}}e=(h>j.length/4)?"":j;a.html('<input type="text" id="new-post-slug" value="'+e+'" autocomplete="off" />').children("input").keydown(function(n){var o=n.which;if(13===o){n.preventDefault();i.children(".save").click()}if(27===o){i.children(".cancel").click()}}).keyup(function(){d.val(this.value)}).focus()}H("#titlediv").on("click",".edit-slug",function(){v()});wptitlehint=function(a){a=a||"title";var c=H("#"+a),b=H("#"+a+"-prompt-text");if(""===c.val()){b.removeClass("screen-reader-text")}b.click(function(){H(this).addClass("screen-reader-text");c.focus()});c.blur(function(){if(""===this.value){b.removeClass("screen-reader-text")}}).focus(function(){b.addClass("screen-reader-text")}).keydown(function(d){b.addClass("screen-reader-text");H(this).unbind(d)})};wptitlehint();(function(){var d,b,f,g=H("#post-status-info"),e=H("#postdivrich");if(!x.length||"ontouchstart" in window){H("#content-resize-handle").hide();return}function c(h){if(e.hasClass("wp-editor-expand")){return}if(f){d.theme.resizeTo(null,b+h.pageY)}else{x.height(Math.max(50,b+h.pageY))}h.preventDefault()}function a(){var i,h;if(e.hasClass("wp-editor-expand")){return}if(f){d.focus();h=parseInt(H("#wp-content-editor-container .mce-toolbar-grp").height(),10);if(h<10||h>200){h=30}i=parseInt(H("#content_ifr").css("height"),10)+h-28}else{x.focus();i=parseInt(x.css("height"),10)}u.off(".wp-editor-resize");if(i&&i>50&&i<5000){setUserSetting("ed_size",i)}}g.on("mousedown.wp-editor-resize",function(h){if(typeof tinymce!=="undefined"){d=tinymce.get("content")}if(d&&!d.isHidden()){f=true;b=H("#content_ifr").height()-h.pageY}else{f=false;b=x.height()-h.pageY;x.blur()}u.on("mousemove.wp-editor-resize",c).on("mouseup.wp-editor-resize mouseleave.wp-editor-resize",a);h.preventDefault()}).on("mouseup.wp-editor-resize",a)})();if(typeof tinymce!=="undefined"){H("#post-formats-select input.post-format").on("change.set-editor-class",function(){var b,c,a=this.id;if(a&&H(this).prop("checked")&&(b=tinymce.get("content"))){c=b.getBody();c.className=c.className.replace(/\bpost-format-[^ ]+/,"");b.dom.addClass(c,a=="post-format-0"?"post-format-standard":a);H(document).trigger("editor-classchange")}});H("#page_template").on("change.set-editor-class",function(){var a,c,b=H(this).val()||"";b=b.substr(b.lastIndexOf("/")+1,b.length).replace(/\.php$/,"").replace(/\./g,"-");if(b&&(a=tinymce.get("content"))){c=a.getBody();c.className=c.className.replace(/\bpage-template-[^ ]+/,"");a.dom.addClass(c,"page-template-"+b);H(document).trigger("editor-classchange")}})}x.on("keydown.wp-autosave",function(a){if(a.which===83){if(a.shiftKey||a.altKey||(E&&(!a.metaKey||a.ctrlKey))||(!E&&!a.ctrlKey)){return}wp.autosave&&wp.autosave.server.triggerSave();a.preventDefault()}});if(H("#original_post_status").val()==="auto-draft"&&window.history.replaceState){var I;H("#publish").on("click",function(){I=window.location.href;I+=(I.indexOf("?")!==-1)?"&":"?";I+="wp-post-new-reload=true";window.history.replaceState(null,null,I)})}});(function(c,d){c(function(){var h=c("#content"),i=c("#wp-word-count").find(".word-count"),b=0,j;function a(){var e,f;if(!j||j.isHidden()){e=h.val()}else{e=j.getContent({format:"raw"})}f=d.count(e);if(f!==b){i.text(f)}b=f}c(document).on("tinymce-editor-init",function(e,f){if(f.id!=="content"){return}j=f;f.on("nodechange keyup",_.debounce(a,1000))});h.on("input keyup",_.debounce(a,1000));a()})})(jQuery,new wp.utils.WordCounter());